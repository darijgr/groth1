% -------------------------------------------------------------
% NOTES ON SOME HACKS USED IN THIS FILE:
% -------------------------------------------------------------
% One of my pet peeves with amsthm is its use of italics in the theorem and
% proposition environments; this makes math and text indistinguishable in said
% enviroments. To avoid this, I redefine the enviroments to use the standard
% font and to use a hanging indent, along with a bold vertical bar to its
% left, to distinguish these environments from surrounding text. (Along with
% the advantage of distinguishing math from text, this also allows nesting
% several such environments inside each other, like a definition inside a
% remark. I'm not sure how good of an idea this is, though. There are also
% downsides related to the hanging indentation, such as footnotes out of it
% being painful to do right.) This is done starting from the line
%   \theoremstyle{definition}
% and until the line
%   {\end{leftbar}\end{exmp}}

\documentclass[numbers=enddot,12pt,final,onecolumn,notitlepage]{scrartcl}%
\usepackage[all,cmtip]{xy}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{framed}
\usepackage{amsmath}
\usepackage{needspace}
\usepackage{color}
\usepackage{hyperref}
\usepackage[sc]{mathpazo}
\usepackage[T1]{fontenc}
\usepackage{amsthm}
\usepackage{fancyhdr}
\usepackage{ytableau}
\usepackage{tabu}
%TCIDATA{OutputFilter=latex2.dll}
%TCIDATA{Version=5.50.0.2960}
%TCIDATA{LastRevised=Monday, June 08, 2015 22:39:34}
%TCIDATA{SuppressPackageManagement}
%TCIDATA{<META NAME="GraphicsSave" CONTENT="32">}
%TCIDATA{<META NAME="SaveForMode" CONTENT="1">}
%TCIDATA{BibliographyScheme=Manual}
%BeginMSIPreambleData
\providecommand{\U}[1]{\protect\rule{.1in}{.1in}}
%EndMSIPreambleData
\theoremstyle{definition}
\newtheorem{theo}{Theorem}[section]
\newenvironment{theorem}[1][]
{\begin{theo}[#1]\begin{leftbar}}
{\end{leftbar}\end{theo}}
\newtheorem{lem}[theo]{Lemma}
\newenvironment{lemma}[1][]
{\begin{lem}[#1]\begin{leftbar}}
{\end{leftbar}\end{lem}}
\newtheorem{prop}[theo]{Proposition}
\newenvironment{proposition}[1][]
{\begin{prop}[#1]\begin{leftbar}}
{\end{leftbar}\end{prop}}
\newtheorem{defi}[theo]{Definition}
\newenvironment{definition}[1][]
{\begin{defi}[#1]\begin{leftbar}}
{\end{leftbar}\end{defi}}
\newtheorem{remk}[theo]{Remark}
\newenvironment{remark}[1][]
{\begin{remk}[#1]\begin{leftbar}}
{\end{leftbar}\end{remk}}
\newtheorem{coro}[theo]{Corollary}
\newenvironment{corollary}[1][]
{\begin{coro}[#1]\begin{leftbar}}
{\end{leftbar}\end{coro}}
\newtheorem{conv}[theo]{Convention}
\newenvironment{condition}[1][]
{\begin{conv}[#1]\begin{leftbar}}
{\end{leftbar}\end{conv}}
\newtheorem{quest}[theo]{TODO}
\newenvironment{todo}[1][]
{\begin{quest}[#1]\begin{leftbar}}
{\end{leftbar}\end{quest}}
\newtheorem{warn}[theo]{Warning}
\newenvironment{conclusion}[1][]
{\begin{warn}[#1]\begin{leftbar}}
{\end{leftbar}\end{warn}}
\newtheorem{conj}[theo]{Conjecture}
\newenvironment{conjecture}[1][]
{\begin{conj}[#1]\begin{leftbar}}
{\end{leftbar}\end{conj}}
\newtheorem{exmp}[theo]{Example}
\newenvironment{example}[1][]
{\begin{exmp}[#1]\begin{leftbar}}
{\end{leftbar}\end{exmp}}
\iffalse
\newenvironment{proof}[1][Proof]{\noindent\textbf{#1.} }{\ \rule{0.5em}{0.5em}}
\fi
\newcommand{\kk}{\mathbf{k}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\ev}{\operatorname{ev}}
\newcommand{\Comp}{\operatorname{Comp}}
\newcommand{\bk}{\mathbf{k}}
\newcommand{\Nplus}{\mathbb{N}_{+}}
\newcommand{\NN}{\mathbb{N}}
\let\sumnonlimits\sum
\let\prodnonlimits\prod
\renewcommand{\sum}{\sumnonlimits\limits}
\renewcommand{\prod}{\prodnonlimits\limits}
\setlength\textheight{22.5cm}
\setlength\textwidth{15cm}
\pagestyle{fancy}
\lhead{Refined dual stable Grothendieck polynomials}
\rhead{\today}
\begin{document}

\title{Refined dual stable Grothendieck polynomials and generalized Bender-Knuth involutions}
\author{Pavel Galashin, Darij Grinberg, and Gaku Liu}
\date{\today}
\maketitle

\section{Introduction}

Thomas Lam and Pavlo Pylyavskyy, in \cite[\S 9.1]{LamPyl}, (and earlier Mark
Shimozono and Mike Zabrocki in unpublished work of 2003) studied \textit{dual
stable Grothendieck polynomials}, a deformation (in a sense) of the Schur
functions. Let us briefly recount their definition.\footnote{All definitions
that will be made in this introduction are provisional. Every notion that will
be used in the paper is going to be defined in more detail and precision in
one of the sections below; thus, a reader not already familiar with Schur
functions and partitions should start reading from Section
\ref{sect.notations} on.}

Let $\lambda/\mu$ be a skew partition. The Schur function $s_{\lambda/\mu}$ is
a multivariate generating function for the semistandard tableaux of shape
$\lambda/\mu$. In the same vein, the dual stable Grothendieck
polynomial\footnote{The word \textquotedblleft polynomial\textquotedblright%
\ is a stretch: $g_{\lambda/\mu}$ is a bounded-degree power series in
infinitely many indeterminates (like $s_{\lambda/\mu}$).} $g_{\lambda/\mu}$ is
a generating function for the reverse plane partitions of shape $\lambda/\mu$;
these, unlike semistandard tableaux, are only required to have their entries
increase \textit{weakly} down columns (and along rows). More precisely,
$g_{\lambda/\mu}$ is a formal power series in countably many commuting
indeterminates $x_{1},x_{2},x_{3},\ldots$ (over an arbitrary commutative ring
$\mathbf{k}$) defined by%
\[
g_{\lambda/\mu}=\sum_{\substack{T\text{ is a reverse plane}\\\text{partition
of shape }\lambda/\mu}}\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  },
\]
where $\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }$ is the monomial
$x_{1}^{a_{1}}x_{2}^{a_{2}}x_{3}^{a_{3}}\cdots$ whose $i$-th exponent $a_{i}$
is the number of columns of $T$ containing the entry $i$. As proven in
\cite[\S 9.1]{LamPyl}, this power series $g_{\lambda/\mu}$ is a symmetric
function (albeit, unlike $s_{\lambda/\mu}$, an inhomogeneous one in general).
Lam and Pylyavskyy connect the $g_{\lambda/\mu}$ to the (more familiar)
\textit{stable Grothendieck polynomials} $G_{\lambda/\mu}$ (via a duality
between the symmetric functions and their completion, which explains the name
of the $g_{\lambda/\mu}$; see \cite[\S 9.4]{LamPyl}) and to the $K$-theory of
Grassmannians (\cite[\S 9.5]{LamPyl}).

We devise a common generalization of the dual stable Grothendieck polynomial
$g_{\lambda/\mu}$ and the classical skew Schur function $s_{\lambda/\mu}$.
Namely, if $t_{1},t_{2},t_{3},\ldots$ are countably many fixed elements of the
base ring $\mathbf{k}$ (e.g., polynomial indeterminates, or integers), then we
set%
\[
\widetilde{g}_{\lambda/\mu}=\sum_{\substack{T\text{ is a reverse
plane}\\\text{partition of shape }\lambda/\mu}}\mathbf{t}^{\operatorname*{ceq}%
\left(  T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  },
\]
where $\mathbf{t}^{\operatorname*{ceq}\left(  T\right)  }$ is the product
$t_{1}^{b_{1}}t_{2}^{b_{2}}t_{3}^{b_{3}}\cdots$ whose $i$-th exponent $b_{i}$
is the number of cells in the $i$-th row of $T$ whose entry equals the entry
of their neighbor cell directly below them. This $\widetilde{g}_{\lambda/\mu}$
becomes $g_{\lambda/\mu}$ when all the $t_{i}$ are set to $1$, and becomes
$s_{\lambda/\mu}$ when all the $t_{i}$ are set to $0$; but keeping the $t_{i}$
arbitrary offers infinitely many degrees of freedom which are so far
unexplored. Our main result, Theorem \ref{thm.gtilde.symm}, states that
$\widetilde{g}_{\lambda/\mu}$ is a symmetric function (in the $x_{1}%
,x_{2},x_{3},\ldots$).

We prove this result (thus obtaining a new proof of \cite[Theorem 9.1]%
{LamPyl}) first using an elaborate generalization of the classical
Bender-Knuth involutions to reverse plane partitions; these generalized
involutions are constructed using a form of the \textit{diamond lemma} (Lemma
\ref{lem.diamond}).

\begin{todo}
Pavel: advertise your section here? It sort-of gives some justification for
why the $t_{i}$ are a natural thing to consider too.
\end{todo}

The present paper is organized as follows: In Section \ref{sect.notations}, we
recall classical definitions and introduce notations pertaining to
combinatorics and symmetric functions. In Section \ref{sect.def}, we define
the dual stable Grothendieck polynomials $\widetilde{g}_{\lambda/\mu}$, state
our main result (that they are symmetric functions), and do the first steps of
its proof (by reducing it to a purely combinatorial statement about the
existence of an involution with certain properties). In Section
\ref{sect.diamond}, we state and (for the sake of completeness) prove the
version of the diamond lemma we need, and we digress to give an elementary
application of it that serves to demonstrate its use. In Section
\ref{sect.proof}, we prove our main result by constructing the required
involution using the diamond lemma. In Section \ref{sect.BKclassical}, we
recapitulate the definition of the classical Bender-Knuth involution, and
sketch the proof that our involution is a generalization of the latter.

\begin{todo}
Pavel: your last section should also be summarized here.
\end{todo}

\begin{todo}
What is missing from the above introduction? Specifically:

\begin{itemize}
\item Are there any more results from the paper that should be advertised here?

\item More reasons why care about dual stable Grothendieck polynomials? (Buch,
Knutson, Postnikov could know some.)

\item What I wrote about $K$-theory is rather shallow. More details?

More specifically, and interestingly, I am wondering if our $\widetilde{g}%
_{\lambda/\mu}$ aren't K-theoretical classes of something multigraded (toric
structure on the Grassmannian? there are two sides from which we can multiply
a matrix by a diagonal matrix, and even if we \textquotedblleft use
up\textquotedblright\ one for taking \textquotedblleft
characters\textquotedblright, the other one is still there).
\end{itemize}
\end{todo}

\subsection{Acknowledgments}

We owe our familiarity with dual stable Grothendieck polynomials to Richard
Stanley. Thanks are also due to Alexander Postnikov for providing context and motivation.

\begin{todo}
Keep this up to date.
\end{todo}

\section{\label{sect.notations}Notations and definitions}

Let us begin by defining our notations (including some standard conventions
from algebraic combinatorics).

\subsection{Partitions and tableaux}

We set $\mathbb{N}=\left\{  0,1,2,\ldots\right\}  $ and $\mathbb{N}%
_{+}=\left\{  1,2,3,\ldots\right\}  $. A \textit{weak composition} will mean a
sequence $\left(  \alpha_{1},\alpha_{2},\alpha_{3},\ldots\right)
\in\mathbb{N}^{\mathbb{N}_{+}}$ of nonnegative integers such that all but
finitely many $i\in\mathbb{N}_{+}$ satisfy $\alpha_{i}=0$. Given a weak
composition $\alpha=\left(  \alpha_{1},\alpha_{2},\alpha_{3},\ldots\right)  $,
we denote the sum $\alpha_{1}+\alpha_{2}+\alpha_{3}+\cdots$ (which is finite
and an element of $\mathbb{N}$) by $\left\vert \alpha\right\vert $ and call it
the \textit{size} of $\alpha$. Given a weak composition $\alpha$ and a
positive integer $i$, we let $\alpha_{i}$ denote the $i$-th entry of $\alpha$
(so that every weak composition $\alpha$ automatically satisfies
$\alpha=\left(  \alpha_{1},\alpha_{2},\alpha_{3},\ldots\right)  $).

A \textit{partition} means a weak composition $\left(  \alpha_{1},\alpha
_{2},\alpha_{3},\ldots\right)  $ satisfying $\alpha_{1}\geq\alpha_{2}%
\geq\alpha_{3}\geq\cdots$. We identify every partition $\left(  \alpha
_{1},\alpha_{2},\alpha_{3},\ldots\right)  $ with the (truncated) sequence
$\left(  \alpha_{1},\alpha_{2},\ldots,\alpha_{m}\right)  $ whenever $m$ is a
nonnegative integer such that $\alpha_{m+1}=\alpha_{m+2}=\alpha_{m+3}%
=\cdots=0$. In particular, the partition $\left(  0,0,0,\ldots\right)  $ is
thus identified with the empty sequence $\left(  {}\right)  $ (but also, for
example, with $\left(  0,0,0\right)  $). We denote the latter partition by
$\varnothing$, and call it the \textit{empty partition}.

We let $\operatorname*{Par}$ denote the set of all partitions.

The \textit{Young diagram}\footnote{also known as the \textit{Ferrers
diagram}} of a partition $\lambda$ is defined to be the subset $\left\{
\left(  i,j\right)  \in\mathbb{N}_{+}^{2}\ \mid\ j\leq\lambda_{i}\right\}  $
of $\mathbb{N}_{+}^{2}$. It is denoted by $Y\left(  \lambda\right)  $, and has
size $\left\vert Y\left(  \lambda\right)  \right\vert =\lambda_{1}+\lambda
_{2}+\lambda_{3}+\cdots=\left\vert \lambda\right\vert $.

We draw every subset of $\mathbb{N}_{+}^{2}$ (for example, the Young diagram
of a partition) as a set of boxes in the plane, according to the following
convention (known as the \textit{English notation}, or also as the
\textit{matrix notation}): We imagine an infinite table, whose rows are
labelled $1,2,3,\ldots$ (from left to right) and whose columns are labelled
$1,2,3,\ldots$ as well (from top to bottom). We represent every element
$\left(  i,j\right)  $ of $\mathbb{N}_{+}^{2}$ as a box in this table --
namely, as the box at the intersection of row $i$ with column $j$. In order to
draw a subset $Z$ of $\mathbb{N}_{+}^{2}$, we simply chart (the borders of)
the boxes corresponding to all the $\left(  i,j\right)  \in Z$. For instance,
the Young diagram of the partition $\left(  4,2,1\right)  $ is the subset
$\left\{  \left(  1,1\right)  ,\left(  1,2\right)  ,\left(  1,3\right)
,\left(  1,4\right)  ,\left(  2,1\right)  ,\left(  2,2\right)  ,\left(
3,1\right)  \right\}  $ of $\mathbb{N}_{+}^{2}$, and we draw it as $%
%TCIMACRO{\TeXButton{y}{\ydiagram{0+4,0+2,0+1}}}%
%BeginExpansion
\ydiagram{0+4,0+2,0+1}%
%EndExpansion
$. We refer to elements of $\mathbb{N}_{+}^{2}$ as \textit{cells} (since we
draw them as boxes in the plane).

If $\mu$ and $\lambda$ are two partitions, then we say that $\mu
\subseteq\lambda$ if and only if every $i\in\mathbb{N}_{+}$ satisfies $\mu
_{i}\leq\lambda_{i}$. Equivalently, $\mu\subseteq\lambda$ if and only if
$Y\left(  \mu\right)  \subseteq Y\left(  \lambda\right)  $. This defines a
partial order $\subseteq$ on the set $\operatorname*{Par}$ of all partitions.
A \textit{skew partition} shall denote a pair $\left(  \mu,\lambda\right)  $
of two partitions $\mu$ and $\lambda$ satisfying $\mu\subseteq\lambda$; this
pair will also be denoted by $\lambda/\mu$. Given a skew partition
$\lambda/\mu$, we define the \textit{(skew) Young diagram} $Y\left(
\lambda/\mu\right)  $ of this skew partition to be the subset $Y\left(
\lambda\right)  \setminus Y\left(  \mu\right)  $ of $\mathbb{N}_{+}^{2}$.
Again, this Young diagram is drawn as above; for instance, the Young diagram
of $\left(  4,3,1\right)  /\left(  2,1\right)  $ is $%
%TCIMACRO{\TeXButton{y}{\ydiagram{2+2,2+1,0+1}}}%
%BeginExpansion
\ydiagram{2+2,2+1,0+1}%
%EndExpansion
$.

A subset $Z$ of $\mathbb{N}_{+}^{2}$ is said to be \textit{convex} if it has
the following property: If $\left(  i,j\right)  \in Z$, $\left(  i^{\prime
},j^{\prime}\right)  \in\mathbb{N}_{+}^{2}$ and $\left(  i^{\prime\prime
},j^{\prime\prime}\right)  \in Z$ are such that $i\leq i^{\prime}\leq
i^{\prime\prime}$ and $j\leq j^{\prime}\leq j^{\prime\prime}$, then
\begin{equation}
\left(  i^{\prime},j^{\prime}\right)  \in Z. \label{eq.convex}%
\end{equation}
It is clear that the Young diagram $Y\left(  \lambda/\mu\right)  $ is convex
whenever $\lambda/\mu$ is a skew partition. It is easy to show that,
conversely, every finite convex subset of $\mathbb{N}_{+}^{2}$ has the form
$Y\left(  \lambda/\mu\right)  $ for some skew partition $\lambda/\mu$.

If $Z$ is a subset of $\mathbb{N}_{+}^{2}$ (for instance, a Young diagram),
then a \textit{filling} of $Z$ means a map $T:Z\rightarrow\mathbb{N}_{+}$.
Such a filling can be visually represented by drawing the elements of $Z$ as
boxes (following the convention above) and, for every $c\in Z$, inserting the
value $T\left(  c\right)  $ into the box corresponding to $c$. For instance, $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{centertableaux}
%\begin{ytableau}
%3 & 2 \\
%4 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{centertableaux}
\begin{ytableau}
3 & 2 \\
4 \\
2
\end{ytableau}%
%EndExpansion
$ is one possible filling of $Y\left(  \left(  2,1,1\right)  \right)  $;
formally speaking, it is the map $Y\left(  \left(  2,1,1\right)  \right)
\rightarrow\mathbb{N}_{+}$ which sends $\left(  1,1\right)  $, $\left(
1,2\right)  $, $\left(  2,1\right)  $ and $\left(  3,1\right)  $ to $3$, $2$,
$4$ and $2$, respectively. When $T$ is a filling of $Z$ and when $c$ is a cell
in $Z$, we refer to the integer $T\left(  c\right)  \in\mathbb{N}_{+}$ as the
\textit{entry} of $T$ in the cell $c$. For varying $c$, these integers are
called the \textit{entries} of $T$.

Given a finite convex subset $Z$ of $\mathbb{N}_{+}^{2}$, we define a
\textit{reverse plane partition of shape }$Z$ to be a filling $T:Z\rightarrow
\mathbb{N}_{+}^{2}$ of $Z$ satisfying the following two requirements:

\begin{itemize}
\item The entries of $T$ are \textit{weakly increasing along rows} (speaking
in terms of the picture). In more precise terms: If $\left(  i,j\right)  $ and
$\left(  i,j^{\prime}\right)  $ are two elements of $Z$ such that
$j<j^{\prime}$, then $T\left(  i,j\right)  \leq T\left(  i,j^{\prime}\right)
$.

\item The entries of $T$ are \textit{weakly increasing down columns}. In more
precise terms: If $\left(  i,j\right)  $ and $\left(  i^{\prime},j\right)  $
are two elements of $Z$ such that $i<i^{\prime}$, then $T\left(  i,j\right)
\leq T\left(  i^{\prime},j\right)  $.
\end{itemize}

Generally, a \textit{reverse plane partition} is defined to be a map which is
a reverse plane partition of shape $Z$ for some finite convex subset $Z$ of
$\mathbb{N}_{+}^{2}$. Notice that $Z$ is uniquely determined by the map (in
fact, it is the domain of the map).

We shall abbreviate the term \textquotedblleft reverse plane
partition\textquotedblright\ as \textquotedblleft\textit{rpp}%
\textquotedblright. For instance, $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 3 & 3 \\
%2 & 3 \\
%3 & 4
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 3 & 3 \\
2 & 3 \\
3 & 4
\end{ytableau}%
%EndExpansion
$ is an rpp of shape $Y\left(  \left(  3,2,2\right)  /\left(  1\right)
\right)  $.

A well-known class of rpps are the \textit{semistandard tableaux} (also known
as column-strict tableaux). To define this class, it is enough to change
\textquotedblleft weakly increasing down columns\textquotedblright\ into
\textquotedblleft strictly increasing down columns\textquotedblright\ (and,
correspondingly, change \textquotedblleft$T\left(  i,j\right)  \leq T\left(
i^{\prime},j\right)  $\textquotedblright\ into \textquotedblleft$T\left(
i,j\right)  <T\left(  i^{\prime},j\right)  $\textquotedblright) in the above
definition of an rpp. For instance, $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 3 & 3 \\
%2 & 3 \\
%3 & 4
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 3 & 3 \\
2 & 3 \\
3 & 4
\end{ytableau}%
%EndExpansion
$ is not a semistandard tableau due to having two $3$'s in its second column,
but $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 3 & 3 \\
%2 & 4 \\
%3 & 7
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 3 & 3 \\
2 & 4 \\
3 & 7
\end{ytableau}%
%EndExpansion
$ is a semistandard tableau. Semistandard tableaux have been studied for
decades; an exposition of their properties and applications can be found in
Fulton's \cite{Fulton97}.

\begin{remark}
Let $\lambda/\mu$ be a skew partition. What we call a semistandard tableau of
shape $Y\left(  \lambda/\mu\right)  $ is usually called a \textit{semistandard
tableau of shape }$\lambda/\mu$. (However, unlike the ``semistandard
tableaux'' defined by some other authors, our semistandard tableaux of shape
$Y\left(  \lambda/ \mu\right)  $ do not ``store'' the skew partition $\lambda/
\mu$ as part of their data.)
\end{remark}




\subsection{Symmetric functions}

We now come to the algebraic part of our definitions.

We let $\mathbf{k}$ be an arbitrary commutative ring with unity.\footnote{Many
authors, such as those of \cite{LamPyl}, set $\mathbf{k}=\mathbb{Z}$.} We
consider the ring $\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3},\ldots\right]
\right]  $ of formal power series in countably many indeterminates
$x_{1},x_{2},x_{3},\ldots$. Given a weak composition $\alpha$, we let
$\mathbf{x}^{\alpha}$ be the monomial $x_{1}^{\alpha_{1}}x_{2}^{\alpha_{2}%
}x_{3}^{\alpha_{3}}\cdots$.


A formal power series $f\in\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3}%
,\ldots\right]  \right]  $ is said to be \textit{bounded-degree} if there
exists an $N\in\mathbb{N}$ such that every monomial $\mathbf{x}^{\alpha}$
which occurs (with nonzero coefficient) in $f$ satisfies $\left\vert
\alpha\right\vert \leq N$. (Notice that $\left\vert \alpha\right\vert $ is the
degree of $\mathbf{x}^{\alpha}$.) The set of all bounded-degree power series
in $\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3},\ldots\right]  \right]  $ is a
$\mathbf{k}$-subalgebra of $\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3}%
,\ldots\right]  \right]  $, and will be denoted by $\mathbf{k}\left[  \left[
x_{1},x_{2},x_{3},\ldots\right]  \right]  _{\operatorname*{bdd}}$.

We let $\mathfrak{S}_{\left(  \infty\right)  }$ denote the group of all
permutations $\pi$ of the set $\mathbb{N}_{+}$ such that all but finitely many
$i\in\mathbb{N}_{+}$ satisfy $\pi\left(  i\right)  =i$. This is a subgroup of
the group $\mathfrak{S}_{\infty}$ of \textit{all} permutations of
$\mathbb{N}_{+}$. The group $\mathfrak{S}_{\left(  \infty\right)  }$ is
generated by the subset $\left\{  s_{1},s_{2},s_{3},\ldots\right\}  $, where
each $s_{i}$ is the transposition $\left(  i,i+1\right)  $%
.\ \ \ \ \footnote{To prove this result, it is enough to notice that the
finite symmetric groups $\mathfrak{S}_{n}$ for all $n\in\mathbb{N}$ can be
canonically embedded into $\mathfrak{S}_{\left(  \infty\right)  }$, and
$\mathfrak{S}_{\left(  \infty\right)  }$ becomes their direct limit.} The
group $\mathfrak{S}_{\infty}$ (and thus, also its subgroup $\mathfrak{S}%
_{\left(  \infty\right)  }$) acts on the set of all weak compositions by the
rule%
\begin{align*}
\pi\cdot\left(  \alpha_{1},\alpha_{2},\alpha_{3},\ldots\right)   &  =\left(
\alpha_{\pi^{-1}\left(  1\right)  },\alpha_{\pi^{-1}\left(  2\right)  }%
,\alpha_{\pi^{-1}\left(  3\right)  },\ldots\right) \\
&  \ \ \ \ \ \ \ \ \ \ \text{for every }\pi\in\mathfrak{S}_{\infty}\text{
and}\\
&  \ \ \ \ \ \ \ \ \ \ \text{ every weak composition }\left(  \alpha
_{1},\alpha_{2},\alpha_{3},\ldots\right)  .
\end{align*}


A formal power series $f\in\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3}%
,\ldots\right]  \right]  $ is said to be \textit{symmetric} if it has the
following property: Whenever $\alpha$ and $\beta$ are two weak compositions in
the same $\mathfrak{S}_{\left(  \infty\right)  }$-orbit, the coefficients of
$f$ before $\mathbf{x}^{\alpha}$ and before $\mathbf{x}^{\beta}$ are
equal.\footnote{Notice that this definition does not change if $\mathfrak{S}%
_{\left(  \infty\right)  }$ is replaced by $\mathfrak{S}_{\infty}$. But it is
customary (and useful to our purposes) to define it using $\mathfrak{S}%
_{\left(  \infty\right)  }$.}

The \textit{symmetric functions} over $\mathbf{k}$ are defined to be the
symmetric bounded-degree power series $f\in\mathbf{k}\left[  \left[
x_{1},x_{2},x_{3},\ldots\right]  \right]  $. They form a $\mathbf{k}%
$-subalgebra of $\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3},\ldots\right]
\right]  $. This $\mathbf{k}$-subalgebra is called the \textit{ring of
symmetric functions over }$\mathbf{k}$; it will be denoted by $\Lambda$ or
(when $\mathbf{k}$ is not clear from the context) by $\Lambda_{\mathbf{k}}$.
(The reader shall be warned that \cite{LamPyl} denotes this $\mathbf{k}%
$-algebra by $\operatorname*{Sym}$, while using the notation $\Lambda$ for the
set which we call $\operatorname*{Par}$.) Symmetric functions are a classical
field of research, and are closely related to Young diagrams and tableaux; see
\cite[Chapter 7]{Stan99}, \cite{Macdon95} and \cite[Chapter 2]{GriRei15} for expositions.

\begin{todo}
Update Grinberg-Reiner reference to whatever is most recent.
\end{todo}

Another equivalent way to define the notion of symmetric functions\ is the
following: The group $\mathfrak{S}_{\infty}$ acts $\mathbf{k}$-linearly and
continuously on the $\mathbf{k}$-module $\mathbf{k}\left[  \left[  x_{1}%
,x_{2},x_{3},\ldots\right]  \right]  $ by the rule%
\[
\pi\mathbf{x}^{\alpha}=\mathbf{x}^{\pi\cdot\alpha}%
\ \ \ \ \ \ \ \ \ \ \text{for every }\pi\in\mathfrak{S}_{\infty}\text{ and
every weak composition }\alpha\text{.}%
\]
The subgroup $\mathfrak{S}_{\left(  \infty\right)  }$ of $\mathfrak{S}%
_{\infty}$ thus also acts on $\mathbf{k}\left[  \left[  x_{1},x_{2}%
,x_{3},\ldots\right]  \right]  $ by restriction. Both $\mathfrak{S}_{\infty}$
and $\mathfrak{S}_{\left(  \infty\right)  }$ preserve the $\mathbf{k}%
$-submodule $\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3},\ldots\right]
\right]  _{\operatorname*{bdd}}$, and thus act on $\mathbf{k}\left[  \left[
x_{1},x_{2},x_{3},\ldots\right]  \right]  _{\operatorname*{bdd}}$ as well.
Now,%
\[
\Lambda=\left(  \mathbf{k}\left[  \left[  x_{1},x_{2},x_{3},\ldots\right]
\right]  _{\operatorname*{bdd}}\right)  ^{\mathfrak{S}_{\infty}}=\left(
\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3},\ldots\right]  \right]
_{\operatorname*{bdd}}\right)  ^{\mathfrak{S}_{\left(  \infty\right)  }}.
\]


\subsection{Schur functions}

Given a subset $Z$ of $\mathbb{N}_{+}^{2}$ and a filling $T$ of $Z$, we define
a weak composition $\operatorname*{cont}\left(  T\right)  $ by setting%
\begin{align*}
\left(  \operatorname*{cont}\left(  T\right)  \right)  _{i}  &  =\left\vert
T^{-1}\left(  i\right)  \right\vert =\left(  \text{the number of entries of
}T\text{ equal to }i\right) \\
&  \ \ \ \ \ \ \ \ \ \ \text{for every }i\in\mathbb{N}_{+}.
\end{align*}
We call $\operatorname*{cont}\left(  T\right)  $ the \textit{content} of $T$.
Notice that $\mathbf{x}^{\operatorname*{cont}\left(  T\right)  }=\prod_{c\in
Z}x_{T\left(  c\right)  }$.


Given a skew partition $\lambda/\mu$, we define the \textit{Schur function}
$s_{\lambda/\mu}$ to be the formal power series $\sum_{\substack{T\text{ is a
semistandard}\\\text{tableau of shape }Y\left(  \lambda/\mu\right)
}}\mathbf{x}^{\operatorname*{cont}\left(  T\right)  }$. A nontrivial property
of these Schur functions is that they are symmetric:

\begin{proposition}
\label{prop.schur.symm}We have $s_{\lambda/\mu}\in\Lambda$ for every skew
partition $\lambda/\mu$.
\end{proposition}

This result appears, e.g., in \cite[Theorem 7.10.2]{Stan99} and
\cite[Proposition 2.11]{GriRei15}; it is commonly proven bijectively using the
so-called \textit{Bender-Knuth involutions}. We shall recall the definitions
of these involutions in Section \ref{sect.BKclassical}.

One might attempt to replace \textquotedblleft semistandard
tableau\textquotedblright\ by \textquotedblleft rpp\textquotedblright\ in the
definition of a Schur function. However, the resulting power series are (in
general) no longer symmetric (for instance, $\sum_{\substack{T\text{ is an
rpp}\\\text{of shape }Y\left(  \left(  2,1\right)  \right)  }}\mathbf{x}%
^{\operatorname*{cont}\left(  T\right)  }\notin\Lambda$). Nevertheless, Lam
and Pylyavskyy \cite[\S 9]{LamPyl} have noticed that it is possible to define
symmetric functions from rpps, albeit it requires replacing the content
$\operatorname*{cont}\left(  T\right)  $ by a subtler construction. Let us now
discuss their definition.

\subsection{Dual stable Grothendieck polynomials}

If $Z$ is a convex subset of $\mathbb{N}_{+}^{2}$, if $T$ is a filling of $Z$,
and if $k\in\mathbb{N}_{+}$, then:

\begin{itemize}
\item The $k$\textit{-th column of }$T$ will mean the sequence of all entries
of $T$ in cells of the form $\left(  i,k\right)  $ with $i\in\mathbb{N}_{+}$
(in the order of increasing $i$).

\item The $k$\textit{-th row of }$T$ will mean the sequence of all entries of
$T$ in cells of the form $\left(  k,i\right)  $ with $i\in\mathbb{N}_{+}$ (in
the order of increasing $i$).
\end{itemize}

Notice that (due to $Z$ being convex) there are no \textquotedblleft
gaps\textquotedblright\ in these rows and columns: If $Z$ is a convex subset
of $\mathbb{N}_{+}^{2}$, and if $k\in\mathbb{N}_{+}$, then the positive
integers $i$ satisfying $\left(  i,k\right)  \in Z$ form a (possibly empty)
interval, and so do the positive integers $i$ satisfying $\left(  k,i\right)
\in Z$.

If $Z$ is a convex subset of $\mathbb{N}_{+}^{2}$, and if $T$ is a filling of
$Z$, then we define a weak composition $\operatorname*{ircont}\left(
T\right)  $ by setting%
\begin{align*}
&  \left(  \operatorname*{ircont}\left(  T\right)  \right)  _{i}=\left(
\text{the number of }k\in\mathbb{N}_{+}\text{ such that the }k\text{-th column
of }T\text{ contains }i\right) \\
&  \ \ \ \ \ \ \ \ \ \ \text{for every }i\in\mathbb{N}_{+}.
\end{align*}
(In more colloquial terms, $\left(  \operatorname*{ircont}\left(  T\right)
\right)  _{i}$ is the number of columns of $T$ which contain $i$.) We refer to
$\operatorname*{ircont}\left(  T\right)  $ as the \textit{irredundant content}
of $T$. For instance, if $T=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 3 & 3 \\
%2 & 3 \\
%3 & 4
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 3 & 3 \\
2 & 3 \\
3 & 4
\end{ytableau}%
%EndExpansion
$, then $\operatorname*{ircont}\left(  T\right)  =\left(  0,1,3,1,0,0,0,\ldots
\right)  $ (since $1$ is contained in $0$ columns of $T$, while $2$ is
contained in $1$ column, $3$ in $3$ columns, etc.).

Notice that
\begin{equation}
\operatorname*{ircont}\left(  T\right)  =\operatorname*{cont}\left(  T\right)
\ \ \ \ \ \ \ \ \ \ \text{if }T\text{ is a semistandard tableau.}
\label{eq.ircont=cont}%
\end{equation}


Indeed, (\ref{eq.ircont=cont}) follows by noticing that in every given column
of a semistandard tableau, every positive integer occurs at most once.


For the rest of this section, we fix a skew partition $\lambda/\mu$. Now, the
\textit{dual stable Grothendieck polynomial} $g_{\lambda/\mu}$ is defined to
be the formal power series%
\[
\sum_{\substack{T\text{ is an rpp}\\\text{of shape }Y\left(  \lambda
/\mu\right)  }}\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }.
\]
It is easy to see that $g_{\lambda/\mu}$ is a well-defined formal power series
(i.e., the infinite sum $\sum_{\substack{T\text{ is an rpp}\\\text{of shape
}Y\left(  \lambda/\mu\right)  }}\mathbf{x}^{\operatorname*{ircont}\left(
T\right)  }$ converges in the usual topology on the ring $\mathbf{k}\left[
\left[  x_{1},x_{2},x_{3},\ldots\right]  \right]  $).\ \ \ \ \footnote{Be
warned that $g_{\lambda/\mu}$ is (despite its name) not a polynomial (barring
trivial cases).} Unlike the Schur function $s_{\lambda/\mu}$, it is (in
general) not homogeneous, because whenever a column of an rpp $T$ contains an
entry several times, the corresponding monomial $\mathbf{x}%
^{\operatorname*{ircont}\left(  T\right)  }$ \textquotedblleft
counts\textquotedblright\ this entry only once. It is fairly clear that the
highest-degree homogeneous component of $g_{\lambda/\mu}$ is $s_{\lambda/\mu}$
(the component of degree $\left\vert \lambda\right\vert -\left\vert
\mu\right\vert $). Therefore, $g_{\lambda/\mu}$ can be regarded as an
inhomogeneous deformation of the Schur function $s_{\lambda/\mu}$.

Lam and Pylyavskyy, in \cite[\S 9.1]{LamPyl}, have shown the following fact:

\begin{proposition}
\label{prop.g.symm}We have $g_{\lambda/\mu}\in\Lambda$ for every skew
partition $\lambda/\mu$.
\end{proposition}

They prove this proposition using generalized plactic algebras \cite[Lemma
3.1]{FomGre} (and also give a second, combinatorial proof for the case
$\mu=\varnothing$ by explicitly expanding $g_{\lambda/\varnothing}$ as a sum
of Schur functions).


In the next section, we shall introduce a refinement of these $g_{\lambda/\mu
}$, and later we will reprove Proposition \ref{prop.g.symm} in a
self-contained and elementary way.

\section{\label{sect.def}Refined dual stable Grothendieck polynomials}

\subsection{Definition}

We fix arbitrary elements $t_{1},t_{2},t_{3},\ldots$ of $\mathbf{k}$. (For
instance, $\mathbf{k}$ can be a polynomial ring in infinitely many variables
over another ring $\mathbf{m}$, and $t_{1},t_{2},t_{3},\ldots$ can then be
these variables.) For every weak composition $\alpha$, we set $\mathbf{t}%
^{\alpha}=t_{1}^{\alpha_{1}}t_{2}^{\alpha_{2}}t_{3}^{\alpha_{3}}\cdots
\in\mathbf{k}$.

If $Z$ is a subset of $\mathbb{N}_{+}^{2}$, and if $T$ is a filling of $Z$,
then a \textit{stagnant cell} of $T$ will mean a cell $\left(  i,j\right)  $
of $Z$ such that $\left(  i+1,j\right)  $ is also a cell of $Z$ and satisfies
$T\left(  i,j\right)  =T\left(  i+1,j\right)  $. Notice that a semistandard
tableau is the same thing as an rpp which has no stagnant
cells\footnote{\textit{Proof.} Recall that the difference between a
semistandard tableau and an rpp is that the entries of a semistandard tableau
have to be strictly increasing down columns, whereas the entries of an rpp
have to be merely weakly increasing down columns. Thus, a semistandard tableau
is the same thing as an rpp whose every column has no adjacent equal entries.
In other words, a semistandard tableau is the same thing as an rpp which has
no stagnant cells (because having two adjacent equal entries in a column is
tantamount to having a stagnant cell).}.


If $Z$ is a subset of $\mathbb{N}_{+}^{2}$, and if $T$ is a filling of $Z$,
then we define a weak composition $\operatorname*{ceq}\left(  T\right)  $ by%
\begin{align}
&  \left(  \operatorname*{ceq}\left(  T\right)  \right)  _{i}=\left(
\text{the number of }j\in\mathbb{N}_{+}\text{ such that }\left(  i,j\right)
\text{ is a stagnant cell of }T\right) \label{eq.gtilde.ceq.def}\\
&  \ \ \ \ \ \ \ \ \ \ \text{for every }i\in\mathbb{N}_{+}.\nonumber
\end{align}
(Visually speaking, $\left(  \operatorname*{ceq}\left(  T\right)  \right)
_{i}$ is the number of columns of $T$ whose entry in the $i$-th row equals
their entry in the $\left(  i+1\right)  $-th row.) We call
$\operatorname*{ceq}\left(  T\right)  $ the \textit{column-equalities counter}
of $T$. Notice that%
\begin{equation}
\left\vert \operatorname*{ceq}\left(  T\right)  \right\vert =\left(  \text{the
number of all stagnant cells of }T\right)  \label{eq.gtilde.ceq.abs}%
\end{equation}
for every rpp $T$. For instance, if $T=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 3 & 3 \\
%2 & 3 \\
%3 & 4
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 3 & 3 \\
2 & 3 \\
3 & 4
\end{ytableau}%
%EndExpansion
$, then $\operatorname*{ceq}\left(  T\right)  =\left(  1,0,0,0,\ldots\right)
$ (since the $1$-st and $2$-nd rows of $T$ have equal entries in one column,
while for every $i>1$, the $i$-th and $\left(  i+1\right)  $-th rows of $T$ do
not have equal entries in any column).


Let now $\lambda/\mu$ be a skew partition. We set%
\[
\widetilde{g}_{\lambda/\mu}=\sum_{\substack{T\text{ is an rpp}\\\text{of shape
}Y\left(  \lambda/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }.
\]
This $\widetilde{g}_{\lambda/\mu}$ is a well-defined formal power series in
$\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3},\ldots\right]  \right]
$\ \ \ \ \footnote{\textit{Proof.} We need to show that the infinite sum
$\sum_{\substack{T\text{ is an rpp}\\\text{of shape }Y\left(  \lambda
/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(  T\right)  }%
\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }$ converges with respect
to the standard topology on $\mathbf{k}\left[  \left[  x_{1},x_{2}%
,x_{3},\ldots\right]  \right]  $. In other words, we need to show that every
monomial $\mathbf{x}^{\alpha}$ occurs only finitely often in this sum. But
this is fairly clear: Given a monomial $\mathbf{x}^{\alpha}$, there exist only
finitely many $i\in\mathbb{N}_{+}$ satisfying $\alpha_{i}>0$. These finitely
many $i$ are the only entries that can occur in an rpp $T$ of shape $Y\left(
\lambda/\mu\right)  $ which satisfies $\operatorname*{ircont}\left(  T\right)
=\alpha$. Hence, there are only finitely many such rpps. This means that there
are only finitely many terms in the sum $\sum_{\substack{T\text{ is an
rpp}\\\text{of shape }Y\left(  \lambda/\mu\right)  }}\mathbf{t}%
^{\operatorname*{ceq}\left(  T\right)  }\mathbf{x}^{\operatorname*{ircont}%
\left(  T\right)  }$ in which the monomial $\mathbf{x}^{\alpha}$ occurs,
qed.}, and moreover belongs to $\mathbf{k}\left[  \left[  x_{1},x_{2}%
,x_{3},\ldots\right]  \right]  _{\operatorname*{bdd}}$ (since $\left\vert
\operatorname*{ircont}\left(  T\right)  \right\vert \leq\left\vert Y\left(
\lambda/\mu\right)  \right\vert =\left\vert \lambda\right\vert -\left\vert
\mu\right\vert $ for every rpp $T$ of shape $Y\left(  \lambda/\mu\right)  $).


Let us give some examples of $\widetilde{g}_{\lambda/\mu}$.

\begin{example}
\label{exa.gtilde.1}\textbf{(a)} Let $n\in\mathbb{N}$, let $\lambda=\left(
n\right)  $ and let $\mu=\varnothing$. Then, the rpps $T$ of shape $Y\left(
\lambda/\mu\right)  $ have the form $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%a_1 & a_2 & \cdots& a_n
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
a_1 & a_2 & \cdots& a_n
\end{ytableau}%
%EndExpansion
$ with $a_{1}\leq a_{2}\leq\cdots\leq a_{n}$. Each such rpp $T$ satisfies
$\operatorname*{ceq}\left(  T\right)  =\varnothing$ and $\mathbf{x}%
^{\operatorname*{ircont}\left(  T\right)  }=x_{a_{1}}x_{a_{2}}\cdots x_{a_{n}%
}$. Thus, the definition of $\widetilde{g}_{\lambda/\mu}$ yields
\begin{align*}
\widetilde{g}_{\lambda/\mu}  &  =\sum_{\substack{T\text{ is an rpp}\\\text{of
shape }Y\left(  \lambda/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }=\sum
_{a_{1}\leq a_{2}\leq\cdots\leq a_{n}}\underbrace{\mathbf{t}^{\varnothing}%
}_{=1}x_{a_{1}}x_{a_{2}}\cdots x_{a_{n}}\\
&  =\sum_{a_{1}\leq a_{2}\leq\cdots\leq a_{n}}x_{a_{1}}x_{a_{2}}\cdots
x_{a_{n}}.
\end{align*}
This is the so-called $n$-th complete homogeneous symmetric function $h_{n}$.

\textbf{(b)} Let now $n\in\mathbb{N}$, let $\lambda=\underbrace{\left(
1,1,\ldots,1\right)  }_{n\text{ times}}$ and let $\mu=\varnothing$. Then, the
rpps $T$ of shape $Y\left(  \lambda/\mu\right)  $ have the form $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%a_1 \\
%a_2 \\
%\vdots\\
%a_n
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
a_1 \\
a_2 \\
\vdots\\
a_n
\end{ytableau}%
%EndExpansion
$ with $a_{1}\leq a_{2}\leq\cdots\leq a_{n}$. Each such rpp $T$ satisfies
$\mathbf{t}^{\operatorname*{ceq}\left(  T\right)  }=\prod_{\substack{i\in
\left\{  1,2,\ldots,n\right\}  ;\\a_{i}=a_{i+1}}}t_{i}$ and $\mathbf{x}%
^{\operatorname*{ircont}\left(  T\right)  }=\prod_{\substack{i\in\left\{
1,2,\ldots,n\right\}  ;\\a_{i}<a_{i+1}}}x_{i}$, where we set $a_{n+1}=\infty$
in order to simplify our notations. Thus, the definition of $\widetilde{g}%
_{\lambda/\mu}$ yields
\begin{align*}
\widetilde{g}_{\lambda/\mu}  &  =\sum_{\substack{T\text{ is an rpp}\\\text{of
shape }Y\left(  \lambda/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }=\sum
_{a_{1}\leq a_{2}\leq\cdots\leq a_{n}}\left(  \prod_{\substack{i\in\left\{
1,2,\ldots,n\right\}  ;\\a_{i}=a_{i+1}}}t_{i}\right)  \left(  \prod
_{\substack{i\in\left\{  1,2,\ldots,n\right\}  ;\\a_{i}<a_{i+1}}}x_{i}\right)
\\
&  =\sum_{k=0}^{n}e_{k}\left(  t_{1},t_{2},\ldots,t_{n-1}\right)
e_{n-k}\left(  x_{1},x_{2},x_{3},\ldots\right)  ,
\end{align*}
where $e_{i}\left(  \xi_{1},\xi_{2},\xi_{3},\ldots\right)  $ denotes the
$i$-th elementary symmetric function in the indeterminates $\xi_{1},\xi
_{2},\xi_{3},\ldots$. It is possible to rewrite this as%
\[
\widetilde{g}_{\lambda/\mu}=e_{n}\left(  t_{1},t_{2},\ldots,t_{n-1}%
,x_{1},x_{2},x_{3},\ldots\right)  .
\]


\textbf{(c)} Let now $n=3$, let $\lambda=\left(  2,1\right)  $ and let
$\mu=\varnothing$. Then, the rpps $T$ of shape $Y\left(  \lambda/\mu\right)  $
have the form $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%a & b \\
%c
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
a & b \\
c
\end{ytableau}%
%EndExpansion
$ with $a\leq b$ and $a\leq c$. Each such rpp $T$ satisfies $\mathbf{t}%
^{\operatorname*{ceq}\left(  T\right)  }=\left\{
\begin{array}
[c]{c}%
1,\text{ if }a<c;\\
t_{1},\text{ if }a=c
\end{array}
\right.  $ and $\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }=\left\{
%
\begin{array}
[c]{c}%
x_{a}x_{b}x_{c},\ \text{if }a<c;\\
x_{a}x_{b},\ \text{if }a=c
\end{array}
\right.  $. Thus,%
\begin{align*}
\widetilde{g}_{\lambda/\mu}  &  =\sum_{\substack{T\text{ is an rpp}\\\text{of
shape }Y\left(  \lambda/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }=\sum_{a\leq
b;\ a\leq c}\left\{
\begin{array}
[c]{c}%
1,\text{ if }a<c;\\
t_{1},\text{ if }a=c
\end{array}
\right.  \left\{
\begin{array}
[c]{c}%
x_{a}x_{b}x_{c},\ \text{if }a<c;\\
x_{a}x_{b},\ \text{if }a=c
\end{array}
\right. \\
&  =\sum_{a\leq b;\ a<c}x_{a}x_{b}x_{c}+t_{1}\sum_{a\leq b}x_{a}x_{b}.
\end{align*}

\end{example}

The power series $\widetilde{g}_{\lambda/\mu}$ generalize the power series
$g_{\lambda/\mu}$ and $s_{\lambda/\mu}$ studied before:

\begin{proposition}
\label{prop.gtilde.gener}Let $\lambda/\mu$ be a skew partition.

\textbf{(a)} If $\left(  t_{1},t_{2},t_{3},\ldots\right)  =\left(
1,1,1,\ldots\right)  $, then $\widetilde{g}_{\lambda/\mu}=g_{\lambda/\mu}$.

\textbf{(b)} If $\left(  t_{1},t_{2},t_{3},\ldots\right)  =\left(
0,0,0,\ldots\right)  $, then $\widetilde{g}_{\lambda/\mu}=s_{\lambda/\mu}$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.gtilde.gener}.]\textbf{(a)} Let $\left(
t_{1},t_{2},t_{3},\ldots\right)  =\left(  1,1,1,\ldots\right)  $. Then,
$\mathbf{t}^{\alpha}=1$ for every weak composition $\alpha$. Thus,
$\mathbf{t}^{\operatorname*{ceq}\left(  T\right)  }=1$ for every rpp $T$. Now,
the definition of $\widetilde{g}_{\lambda/\mu}$ yields $\widetilde{g}%
_{\lambda/\mu}=\sum_{\substack{T\text{ is an rpp}\\\text{of shape }Y\left(
\lambda/\mu\right)  }}\underbrace{\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }}_{=1}\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }%
=\sum_{\substack{T\text{ is an rpp}\\\text{of shape }Y\left(  \lambda
/\mu\right)  }}\mathbf{x}^{\operatorname*{ircont}\left(  T\right)
}=g_{\lambda/\mu}$. This proves Proposition \ref{prop.gtilde.gener}
\textbf{(a)}.

\textbf{(b)} Let $\left(  t_{1},t_{2},t_{3},\ldots\right)  =\left(
0,0,0,\ldots\right)  $. Then, if $T$ is an rpp which has at least one stagnant
cell, then $\mathbf{t}^{\operatorname*{ceq}\left(  T\right)  }=0$ (because
$\operatorname*{ceq}\left(  T\right)  $ has at least one nonzero entry in this
case). Therefore, the sum $\sum_{\substack{T\text{ is an rpp}\\\text{of shape
}Y\left(  \lambda/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }$ does not
change if we discard all addends for which $T$ has at least one stagnant cell.
Thus,%
\begin{align*}
\sum_{\substack{T\text{ is an rpp}\\\text{of shape }Y\left(  \lambda
/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(  T\right)  }%
\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }  &  =\sum
_{\substack{T\text{ is an rpp}\\\text{of shape }Y\left(  \lambda/\mu\right)
;\\T\text{ has no stagnant cells}}}\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }\\
&  =\sum_{\substack{T\text{ is a semistandard}\\\text{tableau of shape
}Y\left(  \lambda/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }%
\end{align*}
(since a semistandard tableau of shape $Y\left(  \lambda/\mu\right)  $ is the
same thing as an rpp of shape $Y\left(  \lambda/\mu\right)  $ which has no
stagnant cells). Now, the definition of $\widetilde{g}_{\lambda/\mu}$ yields%
\begin{align*}
\widetilde{g}_{\lambda/\mu}  &  =\sum_{\substack{T\text{ is an rpp}\\\text{of
shape }Y\left(  \lambda/\mu\right)  }}\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }%
=\sum_{\substack{T\text{ is a semistandard}\\\text{tableau of shape }Y\left(
\lambda/\mu\right)  }}\underbrace{\mathbf{t}^{\operatorname*{ceq}\left(
T\right)  }}_{\substack{=1\\\text{(since }\operatorname*{ceq}\left(  T\right)
=\varnothing\text{)}}}\underbrace{\mathbf{x}^{\operatorname*{ircont}\left(
T\right)  }}_{\substack{=\mathbf{x}^{\operatorname*{cont}\left(  T\right)
}\\\text{(by (\ref{eq.ircont=cont}))}}}\\
&  =\sum_{\substack{T\text{ is a semistandard}\\\text{tableau of shape
}Y\left(  \lambda/\mu\right)  }}\mathbf{x}^{\operatorname*{cont}\left(
T\right)  }=s_{\lambda/\mu}.
\end{align*}


\end{proof}

\subsection{The symmetry statement}

Our main result is now the following:

\begin{theorem}
\label{thm.gtilde.symm}Let $\lambda/\mu$ be a skew partition. Then,
$\widetilde{g}_{\lambda/\mu}\in\Lambda$.
\end{theorem}

It is clear that Proposition \ref{prop.schur.symm} and Proposition
\ref{prop.g.symm} are particular cases of Theorem \ref{thm.gtilde.symm} (due
to Proposition \ref{prop.gtilde.gener}).

We shall prove Theorem \ref{thm.gtilde.symm} bijectively. The core of our
proof will be the following fact:

\begin{theorem}
\label{thm.BK}Let $\lambda/\mu$ be a skew partition. Let $i\in\mathbb{N}_{+}$.
Let $\operatorname*{RPP}\left(  \lambda/\mu\right)  $ denote the set of all
rpps of shape $Y\left(  \lambda/\mu\right)  $. Then, there exists an
involution $\mathbf{B}_{i}:\operatorname*{RPP}\left(  \lambda/\mu\right)
\rightarrow\operatorname*{RPP}\left(  \lambda/\mu\right)  $ which has the
following property: For every $T\in\operatorname*{RPP}\left(  \lambda
/\mu\right)  $, we have%
\begin{equation}
\operatorname*{ceq}\left(  \mathbf{B}_{i}\left(  T\right)  \right)
=\operatorname*{ceq}\left(  T\right)  \label{eq.thm.BK.ceq}%
\end{equation}
and%
\begin{equation}
\operatorname*{ircont}\left(  \mathbf{B}_{i}\left(  T\right)  \right)
=s_{i}\cdot\operatorname*{ircont}\left(  T\right)  . \label{eq.thm.BK.ircont}%
\end{equation}
\footnotemark\ (Here,
$s_{i}\cdot\operatorname*{ircont}\left(  T\right)  $ means
the result of the transposition $s_{i}=\left(  i,i+1\right)  \in
\mathfrak{S}_{\left(  \infty\right)  }$ acting on the weak composition
$\operatorname*{ircont}\left(  T\right)  $.)
\end{theorem}

\footnotetext{We notice that the equality (\ref{eq.thm.BK.ircont}) says the
following:
\par
\begin{itemize}
\item The number of columns of $\mathbf{B}_{i}\left(  T\right)  $ containing
the entry $i$ equals the number of columns of $T$ containing the entry $i+1$.
\par
\item The number of columns of $\mathbf{B}_{i}\left(  T\right)  $ containing
the entry $i+1$ equals the number of columns of $T$ containing the entry $i$.
\par
\item For every $h\in\mathbb{N}_{+}\setminus\left\{  i,i+1\right\}  $, the
number of columns of $\mathbf{B}_{i}\left(  T\right)  $ containing the entry
$h$ equals the number of columns of $T$ containing the entry $h$.
\end{itemize}
}This involution $\mathbf{B}_{i}$ is a generalization of the $i$-th
Bender-Knuth involution defined for semistandard tableaux (see, e.g.,
\cite[proof of Proposition 2.11]{GriRei15}), but its definition is more
complicated than that of the latter.\footnote{We will compare our involution
$\mathbf{B}_{i}$ with the $i$-th Bender-Knuth involution in Section
\ref{sect.BKclassical}.} Defining it and proving its properties will take a
significant part of this paper.

Let us first see how Theorem \ref{thm.BK} implies Theorem
\ref{thm.gtilde.symm}:

\begin{proof}
[Proof of Theorem \ref{thm.gtilde.symm} using Theorem \ref{thm.BK}.]We know
that $\widetilde{g}_{\lambda/\mu}\in\mathbf{k}\left[  \left[  x_{1}%
,x_{2},x_{3},\ldots\right]  \right]  _{\operatorname*{bdd}}$. Hence, in order
to prove that $\widetilde{g}_{\lambda/\mu}\in\Lambda$, it is enough to prove
that $\widetilde{g}_{\lambda/\mu}$ is invariant under the action of
$\mathfrak{S}_{\left(  \infty\right)  }$ (since $\Lambda=\left(
\mathbf{k}\left[  \left[  x_{1},x_{2},x_{3},\ldots\right]  \right]
_{\operatorname*{bdd}}\right)  ^{\mathfrak{S}_{\left(  \infty\right)  }}$). To
show this, it is enough to prove that $\widetilde{g}_{\lambda/\mu}$ is
invariant under the action of $s_{i}\in\mathfrak{S}_{\left(  \infty\right)  }$
for every $i\in\mathbb{N}_{+}$ (because the group $\mathfrak{S}_{\left(
\infty\right)  }$ is generated by the subset $\left\{  s_{1},s_{2}%
,s_{3},\ldots\right\}  $). In other words, it is enough to prove that
$s_{i}\cdot\widetilde{g}_{\lambda/\mu}=\widetilde{g}_{\lambda/\mu}$ for every
$i\in\mathbb{N}_{+}$. So let us prove this.

Fix $i\in\mathbb{N}_{+}$. Theorem \ref{thm.BK} gives us an involution
$\mathbf{B}_{i}:\operatorname*{RPP}\left(  \lambda/\mu\right)  \rightarrow
\operatorname*{RPP}\left(  \lambda/\mu\right)  $ satisfying the property
described in Theorem \ref{thm.BK}. Now, the definition of $\widetilde{g}%
_{\lambda/\mu}$ yields $\widetilde{g}_{\lambda/\mu}=\sum_{T\in
\operatorname*{RPP}\left(  \lambda/\mu\right)  }\mathbf{t}%
^{\operatorname*{ceq}\left(  T\right)  }\mathbf{x}^{\operatorname*{ircont}%
\left(  T\right)  }$, so that%
\[
s_{i}\cdot\widetilde{g}_{\lambda/\mu}=\sum_{T\in\operatorname*{RPP}\left(
\lambda/\mu\right)  }\mathbf{t}^{\operatorname*{ceq}\left(  T\right)
}\underbrace{\left(  s_{i}\cdot\mathbf{x}^{\operatorname*{ircont}\left(
T\right)  }\right)  }_{=\mathbf{x}^{s_{i}\cdot\operatorname*{ircont}\left(
T\right)  }}=\sum_{T\in\operatorname*{RPP}\left(  \lambda/\mu\right)
}\mathbf{t}^{\operatorname*{ceq}\left(  T\right)  }\mathbf{x}^{s_{i}%
\cdot\operatorname*{ircont}\left(  T\right)  }.
\]
Compared with%
\begin{align*}
\widetilde{g}_{\lambda/\mu}  &  =\sum_{T\in\operatorname*{RPP}\left(
\lambda/\mu\right)  }\mathbf{t}^{\operatorname*{ceq}\left(  T\right)
}\mathbf{x}^{\operatorname*{ircont}\left(  T\right)  }=\sum_{T\in
\operatorname*{RPP}\left(  \lambda/\mu\right)  }\underbrace{\mathbf{t}%
^{\operatorname*{ceq}\left(  \mathbf{B}_{i}\left(  T\right)  \right)  }%
}_{\substack{=\mathbf{t}^{\operatorname*{ceq}\left(  T\right)  }\\\text{(by
(\ref{eq.thm.BK.ceq}))}}}\underbrace{\mathbf{x}^{\operatorname*{ircont}\left(
\mathbf{B}_{i}\left(  T\right)  \right)  }}_{\substack{=\mathbf{x}^{s_{i}%
\cdot\operatorname*{ircont}\left(  T\right)  }\\\text{(by
(\ref{eq.thm.BK.ircont}))}}}\\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{here, we have substituted }\mathbf{B}_{i}\left(  T\right)  \text{ for
}T\text{ in the sum}\\
\text{(since }\mathbf{B}_{i}:\operatorname*{RPP}\left(  \lambda/\mu\right)
\rightarrow\operatorname*{RPP}\left(  \lambda/\mu\right)  \text{ is a
bijection)}%
\end{array}
\right) \\
&  =\sum_{T\in\operatorname*{RPP}\left(  \lambda/\mu\right)  }\mathbf{t}%
^{\operatorname*{ceq}\left(  T\right)  }\mathbf{x}^{s_{i}\cdot
\operatorname*{ircont}\left(  T\right)  },
\end{align*}
this yields $s_{i}\cdot\widetilde{g}_{\lambda/\mu}=\widetilde{g}_{\lambda/\mu
}$, and this completes our proof.

\end{proof}

\subsection{Reduction to 12-rpps}

We shall make one further simplification before we step to the actual proof of
Theorem \ref{thm.BK}.

We define a \textit{12-rpp} to be an rpp whose entries all belong to the set
$\left\{  1,2\right\}  $. For instance, $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 1 & 2 \\
%\none& \none& 1 & 2 & 2 \\
%\none& 1 & 2 & 2 \\
%1 & 1 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 1 & 2 \\
\none& \none& 1 & 2 & 2 \\
\none& 1 & 2 & 2 \\
1 & 1 & 2
\end{ytableau}%
%EndExpansion
$ is a 12-rpp of shape $\left(  5,5,4,3\right)  /\left(  2,2,1\right)  $.

Clearly, every column of a 12-rpp is a sequence of $1$'s followed by a
sequence of $2$'s (where each of these sequences can be empty). The same holds
for every row of a 12-rpp.

We now claim:

\begin{lemma}
\label{lem.BK}Let $Z$ be a finite convex subset of $\mathbb{N}_{+}^{2}$. Let
$\mathbf{R}$ denote the set of all 12-rpps of shape $Z$. Then, there exists an
involution $\mathbf{B}:\mathbf{R}\rightarrow\mathbf{R}$ (defined canonically
in terms of $Z$) which has the following property: For every $S\in\mathbf{R}$,
the equalities%
\begin{equation}
\operatorname*{ceq}\left(  \mathbf{B}\left(  S\right)  \right)
=\operatorname*{ceq}\left(  S\right)  \label{eq.lem.BK.ceq}%
\end{equation}
and%
\begin{equation}
\operatorname*{ircont}\left(  \mathbf{B}\left(  S\right)  \right)  =s_{1}%
\cdot\operatorname*{ircont}\left(  S\right)  \label{eq.lem.BK.ircont}%
\end{equation}
hold.
\end{lemma}

Before we prove this lemma, we will show how Theorem \ref{thm.BK} can be
derived from this lemma. But first of all, let us rewrite the lemma as follows:

\begin{lemma}
\label{lem.BKi}Let $Z$ be a finite convex subset of $\mathbb{N}_{+}^{2}$. Let
$i\in\mathbb{N}_{+}$. Let $\mathbf{R}_{Z}$ denote the set of all rpps of shape
$Z$ whose entries all belong to the set $\left\{  i,i+1\right\}  $. Then,
there exists an involution $\mathbf{B}_{Z}:\mathbf{R}_{Z}\rightarrow
\mathbf{R}_{Z}$ (defined canonically in terms of $Z$) which has the following
property: For every $P\in\mathbf{R}_{Z}$, the equalities%
\begin{equation}
\operatorname*{ceq}\left(  \mathbf{B}_{Z}\left(  P\right)  \right)
=\operatorname*{ceq}\left(  P\right)  \label{eq.lem.BKi.ceq}%
\end{equation}
and%
\begin{equation}
\operatorname*{ircont}\left(  \mathbf{B}_{Z}\left(  P\right)  \right)
=s_{i}\cdot\operatorname*{ircont}\left(  P\right)  \label{eq.lem.BKi.ircont}%
\end{equation}
hold.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.BKi} using Lemma \ref{lem.BK}.]The only difference
between Lemma \ref{lem.BK} and Lemma \ref{lem.BKi} is that the entries $1$ and
$2$ in Lemma \ref{lem.BK} have been relabelled as $i$ and $i+1$ in Lemma
\ref{lem.BKi}. Thus, the two lemmas are equivalent, so that the latter follows
from the former.

(More formally: Define $\mathbf{R}$ as in Lemma \ref{lem.BK}. Then, we can
define a bijection $\Phi:\mathbf{R}\rightarrow\mathbf{R}_{Z}$ as follows: For
every $T\in\mathbf{R}$, let $\Phi\left(  T\right)  $ be the filling of $Z$
which is obtained from $T$ by replacing all $1$'s and $2$'s by $i$'s and
$\left(  i+1\right)  $'s, respectively. Now, an involution $\mathbf{B}_{Z}$
satisfying the claim of Lemma \ref{lem.BKi} can be constructed from an
involution $\mathbf{B}$ satisfying the claim of Lemma \ref{lem.BK} by the
formula $\mathbf{B}_{Z}=\Phi\circ\mathbf{B}\circ\Phi^{-1}$.)
\end{proof}


\begin{proof}
[Proof of Theorem \ref{thm.BK} using Lemma \ref{lem.BKi}.]Let us define a map
$\mathbf{B}_{i}:\operatorname*{RPP}\left(  \lambda/\mu\right)  \rightarrow
\operatorname*{RPP}\left(  \lambda/\mu\right)  $.

Indeed, let $T\in\operatorname*{RPP}\left(  \lambda/\mu\right)  $. Then,
$T^{-1}\left(  \left\{  i,i+1\right\}  \right)  $ is a finite convex subset of
$Y\left(  \lambda/\mu\right)  $. We denote this subset by $Z$. Let
$\mathbf{R}_{Z}$ denote the set of all rpps of shape $Z$ whose entries all
belong to the set $\left\{  i,i+1\right\}  $. Lemma \ref{lem.BKi} yields that
there exists an involution $\mathbf{B}_{Z}:\mathbf{R}_{Z}\rightarrow
\mathbf{R}_{Z}$ (defined canonically in terms of $Z$) which has the following
property: For every $P\in\mathbf{R}_{Z}$, the equalities (\ref{eq.lem.BKi.ceq}%
) and (\ref{eq.lem.BKi.ircont}) hold. Consider this involution $\mathbf{B}%
_{Z}$. Clearly, $T\mid_{Z}\in\mathbf{R}_{Z}$. Hence, the involution
$\mathbf{B}_{Z}:\mathbf{R}_{Z}\rightarrow\mathbf{R}_{Z}$ gives rise to a
$\mathbf{B}_{Z}\left(  T\mid_{Z}\right)  \in\mathbf{R}_{Z}$. Now, we define a
new filling $T^{\prime}$ of $Y\left(  \lambda/\mu\right)  $ as follows:%
\[
T^{\prime}\left(  c\right)  =\left\{
\begin{array}
[c]{c}%
\left(  \mathbf{B}_{Z}\left(  T\mid_{Z}\right)  \right)  \left(  c\right)
,\ \ \ \ \ \ \ \ \ \ \text{if }c\in Z;\\
T\left(  c\right)  ,\ \ \ \ \ \ \ \ \ \ \text{if }c\notin Z
\end{array}
\right.  \ \ \ \ \ \ \ \ \ \ \text{for every cell }c\text{ of }Y\left(
\lambda/\mu\right)  .
\]
In other words, $T^{\prime}$ is obtained from $T$ by:

\begin{itemize}
\item replacing all entries of the restriction $T\mid_{Z}$ (that is, all
entries in cells $c\in Z$) by the respective entries of $\mathbf{B}_{Z}\left(
T\mid_{Z}\right)  $, and

\item leaving all other entries as they are.
\end{itemize}

Notice that $T^{\prime}\mid_{Z}=\mathbf{B}_{Z}\left(  T\mid_{Z}\right)  $ and
$T^{\prime}\mid_{Y\left(  \lambda/\mu\right)  \setminus Z}=T\mid_{Y\left(
\lambda/\mu\right)  \setminus Z}$. These two equalities determine $T^{\prime}%
$. It is easy to see that $T^{\prime}$ is an rpp of shape $Y\left(
\lambda/\mu\right)  $. That is, $T^{\prime}\in\operatorname*{RPP}\left(
\lambda/\mu\right)  $. We now define $\mathbf{B}_{i}\left(  T\right)
=T^{\prime}$. Thus, a map $\mathbf{B}_{i}:\operatorname*{RPP}\left(
\lambda/\mu\right)  \rightarrow\operatorname*{RPP}\left(  \lambda/\mu\right)
$ is defined.

The reader can easily verify that this map $\mathbf{B}_{i}$ is an involution,
and that every $T\in\operatorname*{RPP}\left(  \lambda/\mu\right)  $ satisfies
(\ref{eq.thm.BK.ceq}) and (\ref{eq.thm.BK.ircont}). (Essentially, these
properties follow from the analogous properties of the map $\mathbf{B}_{Z}$,
once one realizes that every $T\in\operatorname*{RPP}\left(  \lambda
/\mu\right)  $ satisfies%
\[
\left(  \mathbf{B}_{i}\left(  T\right)  \right)  ^{-1}\left(  \left\{
i,i+1\right\}  \right)  =T^{-1}\left(  \left\{  i,i+1\right\}  \right)  ,
\]
\[
\operatorname*{ceq}\left(  T\right)  =\operatorname*{ceq}\left(  T\mid
_{Z}\right)  +\operatorname*{ceq}\left(  T\mid_{Y\left(  \lambda/\mu\right)
\setminus Z}\right)
\]
and%
\[
\operatorname*{ircont}\left(  T\right)  =\operatorname*{ircont}\left(
T\mid_{Z}\right)  +\underbrace{\operatorname*{ircont}\left(  T\mid_{Y\left(
\lambda/\mu\right)  \setminus Z}\right)  }_{\substack{\text{This composition
is invariant under }s_{i}\\\text{(because its }i\text{-th and }\left(
i+1\right)  \text{-th entries are zero).}}}.
\]
) \Needspace{14\baselineskip}

\begin{example}
Let us give an example of how $\mathbf{B}_{i}$ acts on an rpp. Assume for this
example that $\lambda=\left(  9,8,8,7\right)  $ and $\mu=\left(
4,3,2,1\right)  $, and let $T$ be the filling%
\[%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& \none& 1 & 3 & 3 & 4 & 5 \\
%\none& \none& \none& 1 & 1 & 3 & 4 & 6 \\
%\none& \none& 1 & 2 & 3 & 3 & 5 & 6 \\
%\none& 1 & 1 & 2 & 3 & 4 & 8
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& \none& 1 & 3 & 3 & 4 & 5 \\
\none& \none& \none& 1 & 1 & 3 & 4 & 6 \\
\none& \none& 1 & 2 & 3 & 3 & 5 & 6 \\
\none& 1 & 1 & 2 & 3 & 4 & 8
\end{ytableau}%
%EndExpansion
\]
(there is an invisible empty $1$-st column here). Set $i=3$. Then, the
$\left(  i,i+1\right)  $-domain $Z$ of $T$ is the set%
\[
\left\{  \left(  1,6\right)  ,\left(  1,7\right)  ,\left(  1,8\right)
,\left(  2,6\right)  ,\left(  2,7\right)  ,\left(  3,5\right)  ,\left(
3,6\right)  ,\left(  4,5\right)  ,\left(  4,6\right)  \right\}  .
\]
The rpp $T\mid_{Z}$ is%
\[%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& \none& \none& 3 & 3 & 4 \\
%\none& \none& \none& \none& \none& 3 & 4 \\
%\none& \none& \none& \none& 3 & 3\\
%\none& \none& \none& \none& 3 & 4
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& \none& \none& 3 & 3 & 4 \\
\none& \none& \none& \none& \none& 3 & 4 \\
\none& \none& \none& \none& 3 & 3\\
\none& \none& \none& \none& 3 & 4
\end{ytableau}%
%EndExpansion
\]
(with the first four columns being empty and invisible). We have not defined
$\mathbf{B}_{Z}$ yet, but let us assume that $\mathbf{B}_{Z}$ maps this rpp
$T\mid_{Z}$ to%
\[
\mathbf{B}_{Z}\left(  T\mid_{Z}\right)  =%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& \none& \none& 3 & 3 & 4 \\
%\none& \none& \none& \none& \none& 3 & 4 \\
%\none& \none& \none& \none& 3 & 3 \\
%\none& \none& \none& \none& 3 & 4
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& \none& \none& 3 & 3 & 4 \\
\none& \none& \none& \none& \none& 3 & 4 \\
\none& \none& \none& \none& 3 & 3 \\
\none& \none& \none& \none& 3 & 4
\end{ytableau}%
%EndExpansion
.
\]
(This is, in fact, what the map $\mathbf{B}_{Z}$ defined below does to
$T\mid_{Z}$.) Then, $\mathbf{B}_{i}\left(  T\right)  $ is obtained from $T$ by
replacing the entries of $T\mid_{Z}$ by the respective entries of
$\mathbf{B}_{Z}\left(  T\mid_{Z}\right)  $, while leaving all other entries as
they are. Thus,%
\[
\mathbf{B}_{i}\left(  T\right)  =%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& \none& 1 & 3 & 3 & 4 & 5 \\
%\none& \none& \none& 1 & 1 & 3 & 4 & 6 \\
%\none& \none& 1 & 2 & 3 & 3 & 5 & 6 \\
%\none& 1 & 1 & 2 & 3 & 4 & 8
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& \none& 1 & 3 & 3 & 4 & 5 \\
\none& \none& \none& 1 & 1 & 3 & 4 & 6 \\
\none& \none& 1 & 2 & 3 & 3 & 5 & 6 \\
\none& 1 & 1 & 2 & 3 & 4 & 8
\end{ytableau}%
%EndExpansion
.
\]

\end{example}
\end{proof}


\section{\label{sect.diamond}A diamond lemma}

\subsection{The lemma}

By now we have derived Theorem \ref{thm.BK} from Lemma \ref{lem.BKi}, and
Lemma \ref{lem.BKi} from Lemma \ref{lem.BK}. In order to complete the puzzle,
we need to prove Lemma \ref{lem.BK}. To do so, let us first state a simple lemma.

\begin{lemma}
\label{lem.diamond}Let $\mathbf{S}$ be a finite set. Let $\ell:\mathbf{S}%
\rightarrow\mathbb{N}$ be a map. Let $\Rrightarrow$ be a binary relation on
the set $\mathbf{S}$. (We shall write this relation in infix form; i.e., we
will write \textquotedblleft$a\Rrightarrow b$\textquotedblright\ to mean
\textquotedblleft$\left(  a,b\right)  $ belongs to the relation $\Rrightarrow
$\textquotedblright.)

Define a new binary relation $\overset{\ast}{\Rrightarrow}$ on $\mathbf{S}$
(also written in infix form) as follows: For two elements $a\in\mathbf{S}$ and
$b\in\mathbf{S}$, we set $a\overset{\ast}{\Rrightarrow}b$ if and only if there
exists a sequence $\left(  a_{0},a_{1},\ldots,a_{n}\right)  $ of elements of
$\mathbf{S}$ such that $a_{0}=a$ and $a_{n}=b$ and such that every
$i\in\left\{  0,1,\ldots,n-1\right\}  $ satisfies $a_{i}\Rrightarrow a_{i+1}$.
(In other words, we define $\overset{\ast}{\Rrightarrow}$ as the
reflexive-and-transitive closure of the relation $\Rrightarrow$.)

Assume that the following two hypotheses are true:

\begin{itemize}
\item The \textit{local confluence hypothesis}: If $a$, $b$ and $c$ are three
elements of $\mathbf{S}$ satisfying $a\Rrightarrow b$ and $a\Rrightarrow c$,
then there exists a $d\in\mathbf{S}$ such that $b\overset{\ast}{\Rrightarrow
}d$ and $c\overset{\ast}{\Rrightarrow}d$.

\item The \textit{length-decrease hypothesis}: If $a\in\mathbf{S}$ and
$b\in\mathbf{S}$ are two elements satisfying $a\Rrightarrow b$, then
$\ell\left(  a\right)  >\ell\left(  b\right)  $.
\end{itemize}

We say that an element $a\in\mathbf{S}$ is \textit{final} if there exists no
$b\in\mathbf{S}$ satisfying $a\Rrightarrow b$.

Then, for every $a\in\mathbf{S}$, there exists a unique final element
$b\in\mathbf{S}$ such that $a\overset{\ast}{\Rrightarrow}b$.
\end{lemma}

Lemma \ref{lem.diamond} is an easy particular case of what is called
\textit{Newman's lemma} (see, e.g., \cite{BezCoq}, or \cite[Lemma 2.7.2 + Fact
2.1.7]{BaaNip98}).\footnote{In the general version, the finiteness of
$\mathbf{S}$ and the length-decrease hypothesis are replaced by a requirement
that there exist no infinite sequences $\left(  a_{0},a_{1},a_{2}%
,\ldots\right)  \in\mathbf{S}^{\infty}$ such that every $i\in\mathbb{N}$
satisfies $a_{i}\Rrightarrow a_{i+1}$. The proof of this generalization is
harder than that of Lemma \ref{lem.diamond}, and not constructive. While there
is a constructive reformulation of this generalization (presented in
\cite[Lemma 3.3]{BezCoq}), we do not have a use for it in this paper.} (Some
authors refer to Newman's lemma as the \textit{diamond lemma}, but the latter
name is shared with at least one different fact.)

For the sake of completeness, we shall give the simple proof of Lemma
\ref{lem.diamond}.

\begin{proof}
[Proof of Lemma \ref{lem.diamond}.]The relation $\overset{\ast}{\Rrightarrow}$
is the reflexive-and-transitive closure of the relation $\Rrightarrow$. This
yields the following properties (all of which are easy to check):

\begin{itemize}
\item The relation $\overset{\ast}{\Rrightarrow}$ is reflexive and transitive
and extends the relation $\Rrightarrow$.

\item If $a\in\mathbf{S}$ and $b\in\mathbf{S}$ are elements satisfying
$a\overset{\ast}{\Rrightarrow}b$ and $a\neq b$, then%
\begin{equation}
\text{there exists a }c\in\mathbf{S}\text{ such that }a\Rrightarrow c\text{
and }c\overset{\ast}{\Rrightarrow}b. \label{pf.lem.diamond.short.lem1}%
\end{equation}


\item We have%
\begin{equation}
\ell\left(  a\right)  \geq\ell\left(  b\right)  \ \ \ \ \ \ \ \ \ \ \text{for
any }a\in\mathbf{S}\text{ and }b\in\mathbf{S}\text{ satisfying }%
a\overset{\ast}{\Rrightarrow}b \label{pf.lem.diamond.short.lem2}%
\end{equation}
(because of the length-decrease hypothesis).
\end{itemize}

Now, we need to show that, for every $a\in\mathbf{S}$,
\begin{equation}
\text{there exists a unique final element }b\in\mathbf{S}\text{ such that
}a\overset{\ast}{\Rrightarrow}b\text{.} \label{pf.lem.diamond.short.goal}%
\end{equation}


\textit{Proof of (\ref{pf.lem.diamond.short.goal}):} We shall prove
(\ref{pf.lem.diamond.short.goal}) by strong induction over $\ell\left(
a\right)  $.

\textit{Induction step:} Let $N\in\mathbb{N}$. Assume (as the induction
hypothesis) that (\ref{pf.lem.diamond.short.goal}) is proven for every
$a\in\mathbf{S}$ satisfying $\ell\left(  a\right)  <N$. We need to prove that
(\ref{pf.lem.diamond.short.goal}) holds for every $a\in\mathbf{S}$ satisfying
$\ell\left(  a\right)  =N$.

Let $a\in\mathbf{S}$ be such that $\ell\left(  a\right)  =N$. We need to show
that (\ref{pf.lem.diamond.short.goal}) holds for this $a$.

If there exists no $c\in\mathbf{S}$ satisfying $a\Rrightarrow c$, then
(\ref{pf.lem.diamond.short.goal}) holds\footnote{\textit{Proof.} Assume that
there exists no $c\in\mathbf{S}$ satisfying $a\Rrightarrow c$. Then, $a$
itself is final. Hence, there exists a final element $b\in\mathbf{S}$ such
that $a\overset{\ast}{\Rrightarrow}b$ (namely, $b=a$). This $b$ is unique,
because (\ref{pf.lem.diamond.short.lem1}) shows that every $b\in\mathbf{S}$
satisfying $a\overset{\ast}{\Rrightarrow}b$ and $a\neq b$ would have to
satisfy $a\Rrightarrow c$. This proves (\ref{pf.lem.diamond.short.goal}).}.
Hence, for the rest of this proof, we WLOG assume that there exists some
$c\in\mathbf{S}$ satisfying $a\Rrightarrow c$. Let us denote this $c$ by
$c_{1}$. Thus, $c_{1}\in\mathbf{S}$ and\textbf{ }$a\Rrightarrow c_{1}$.
Applying the length-decrease hypothesis to $b=c_{1}$, we thus obtain
$\ell\left(  a\right)  >\ell\left(  c_{1}\right)  $, so that $\ell\left(
c_{1}\right)  <\ell\left(  a\right)  =N$. Thus, we can apply
(\ref{pf.lem.diamond.short.goal}) to $c_{1}$ instead of $a$ (according to the
induction hypothesis). As a result, we conclude that there exists a unique
final element $b\in\mathbf{S}$ such that $c_{1}\overset{\ast}{\Rrightarrow}b$.
Let us denote this $b$ by $b_{1}$. Thus, $b_{1}$ is a final element of
$\mathbf{S}$ such that $c_{1}\overset{\ast}{\Rrightarrow}b_{1}$.

Since $a\Rrightarrow c_{1}$, we have $a\overset{\ast}{\Rrightarrow}c_{1}$
(since the relation $\overset{\ast}{\Rrightarrow}$ extends the relation
$\Rrightarrow$). Combining this with $c_{1}\overset{\ast}{\Rrightarrow}b_{1}$,
we obtain $a\overset{\ast}{\Rrightarrow}b_{1}$ (since the relation
$\overset{\ast}{\Rrightarrow}$ is transitive). Thus, there exists a final
element $b\in\mathbf{S}$ such that $a\overset{\ast}{\Rrightarrow}b$ (namely,
$b=b_{1}$). We shall now prove that such a $b$ is unique.

Indeed, let $b_{2}$ be any final element $b\in\mathbf{S}$ such that
$a\overset{\ast}{\Rrightarrow}b$. Thus, $b_{2}$ is a final element of
$\mathbf{S}$ such that $a\overset{\ast}{\Rrightarrow}b_{2}$. We will prove
that $b_{2}=b_{1}$.

It is easy to see that $a\neq b_{2}$ (because $a\Rrightarrow c_{1}$ shows that
$a$ is not final, but $b_{2}$ is final). Hence,
(\ref{pf.lem.diamond.short.lem1}) (applied to $b=b_{2}$) yields that there
exists a $c\in\mathbf{S}$ such that $a\Rrightarrow c$ and $c\overset{\ast
}{\Rrightarrow}b_{2}$. Let us denote this $c$ by $c_{2}$. Then, $c_{2}$ is an
element of $\mathbf{S}$ such that $a\Rrightarrow c_{2}$ and $c_{2}%
\overset{\ast}{\Rrightarrow}b_{2}$.

The local confluence hypothesis (applied to $c_{1}$ and $c_{2}$ instead of $b$
and $c$) shows that there exists a $d\in\mathbf{S}$ such that $c_{1}%
\overset{\ast}{\Rrightarrow}d$ and $c_{2}\overset{\ast}{\Rrightarrow}d$.
Consider such a $d$. Applying (\ref{pf.lem.diamond.short.lem2}) to $c_{1}$ and
$d$ instead of $a$ and $b$, we obtain $\ell\left(  c_{1}\right)  \geq
\ell\left(  d\right)  $, so that $\ell\left(  d\right)  \leq\ell\left(
c_{1}\right)  <N$. Hence, we can apply (\ref{pf.lem.diamond.short.goal}) to
$d$ instead of $a$ (according to the induction hypothesis). As a result, we
conclude that there exists a unique final element $b\in\mathbf{S}$ such that
$d\overset{\ast}{\Rrightarrow}b$. Let us denote this $b$ by $e$. Thus, $e$ is
a final element of $\mathbf{S}$ such that $d\overset{\ast}{\Rrightarrow}e$.

We have $c_{1}\overset{\ast}{\Rrightarrow}d$ and $d\overset{\ast
}{\Rrightarrow}e$. Hence, $c_{1}\overset{\ast}{\Rrightarrow}e$ (since the
relation $\overset{\ast}{\Rrightarrow}$ is transitive). Thus, $e$ is a final
element of $\mathbf{S}$ such that $c_{1}\overset{\ast}{\Rrightarrow}e$. In
other words, $e$ is a final element $b\in\mathbf{S}$ such that $c_{1}%
\overset{\ast}{\Rrightarrow}b$. Since we already know that $b_{1}$ is the
unique such element $b$ (in fact, this how we defined $b_{1}$), this shows
that $e=b_{1}$.

We have $c_{2}\overset{\ast}{\Rrightarrow}d$ and $d\overset{\ast
}{\Rrightarrow}e$. Hence, $c_{2}\overset{\ast}{\Rrightarrow}e$ (since the
relation $\overset{\ast}{\Rrightarrow}$ is transitive). In other words,
$c_{2}\overset{\ast}{\Rrightarrow}b_{1}$ (since $e=b_{1}$). Hence, $b_{1}$ is
a final element of $\mathbf{S}$ such that $c_{2}\overset{\ast}{\Rrightarrow
}b_{1}$. In other words, $b_{1}$ is a final element $b\in\mathbf{S}$ such that
$c_{2}\overset{\ast}{\Rrightarrow}b$. Also, $b_{2}$ is a final element
$b\in\mathbf{S}$ such that $c_{2}\overset{\ast}{\Rrightarrow}b$ (since $b_{2}$
is final and since $c_{2}\overset{\ast}{\Rrightarrow}b_{2}$).

But applying the length-decrease hypothesis to $b=c_{2}$, we obtain
$\ell\left(  a\right)  >\ell\left(  c_{2}\right)  $ (since $a\Rrightarrow
c_{2}$), so that $\ell\left(  c_{2}\right)  <\ell\left(  a\right)  =N$. Thus,
we can apply (\ref{pf.lem.diamond.short.goal}) to $c_{2}$ instead of $a$
(according to the induction hypothesis). As a result, we conclude that there
exists a unique final element $b\in\mathbf{S}$ such that $c_{2}\overset{\ast
}{\Rrightarrow}b$. The \textquotedblleft uniqueness\textquotedblright\ part of
this result gives us $b_{2}=b_{1}$ (since both $b_{2}$ and $b_{1}$ are final
elements $b\in\mathbf{S}$ such that $c_{2}\overset{\ast}{\Rrightarrow}b$).

Now let us forget that we fixed $b_{2}$. We thus have shown that if $b_{2}$ is
any final element $b\in\mathbf{S}$ such that $a\overset{\ast}{\Rrightarrow}b$,
then $b_{2}=b_{1}$. Hence, there exists at most one final element
$b\in\mathbf{S}$ such that $a\overset{\ast}{\Rrightarrow}b$. As a consequence,
there exists a unique final element $b\in\mathbf{S}$ such that $a\overset{\ast
}{\Rrightarrow}b$ (because we already know that there exists such a $b$). In
other words, (\ref{pf.lem.diamond.short.goal}) holds. This completes the
induction step. The induction proof of (\ref{pf.lem.diamond.short.goal}) is
thus complete. In other words, Lemma \ref{lem.diamond} is proven.
\end{proof}


\subsection{\label{subsect.bubble}Example: Sorting $n$-tuples by local
transpositions}

Let us give a simple example of an application of Lemma \ref{lem.diamond}.
This example (which will take up the whole Subsection~\ref{subsect.bubble})
will not be used in the rest of the paper, but it serves as a kind of
prototype that our proof of Lemma \ref{lem.BK} imitates, and so might help
clarifying the latter proof.

All of the definitions and conventions that will be made in this
Subsection~\ref{subsect.bubble} are supposed to stand only for this
Subsection. (In particular, the meanings of the letter $\mathbf{S}$ and the
symbol $\Rrightarrow$ will later be used for completely different things.)

For the rest of Subsection~\ref{subsect.bubble}, we fix $n\in\mathbb{N}$, and
we fix a poset $P$.

For any $n$-tuple $z\in P^{n}$ and every $i\in\left\{  1,2,\ldots,n\right\}
$, we use the notation $z_{i}$ to denote the $i$-th entry of $z$. (Thus,
$z=\left(  z_{1},z_{2},\ldots,z_{n}\right)  $ for every $z\in P^{n}$.)

Before we go into further details, let us informally explain what we will
prove in the following. Imagine that we start with some $n$-tuple $z=\left(
z_{1},z_{2},\ldots,z_{n}\right)  $ of elements of $P$, and we want to
\textquotedblleft sort it in nondecreasing order\textquotedblright. We do
this\ by repeatedly picking an index $k\in\left\{  1,2,\ldots,n-1\right\}  $
satisfying $z_{k}>z_{k+1}$, and switching the entries $z_{k}$ and $z_{k+1}$ in
the tuple, and continuing in the same way until we can no longer find such a
$k$.\ \ \ \ \footnote{Here is an example: If $P$ is the four-element poset
$\left\{  a,b,c,d\right\}  $ with relations $a<b<d$ and $a<c<d$, if $n=6$, and
if $z=\left(  d,b,d,c,a,b\right)  $, then our sorting process can look as
follows:%
\begin{align*}
\left(  \underline{d,b},d,c,a,b\right)   &  \rightarrow\left(
b,d,\underline{d,c},a,b\right)  \rightarrow\left(  b,\underline{d,c}%
,d,a,b\right)  \rightarrow\left(  b,c,d,\underline{d,a},b\right)
\rightarrow\left(  b,c,\underline{d,a},d,b\right) \\
&  \rightarrow\left(  b,\underline{c,a},d,d,b\right)  \rightarrow\left(
\underline{b,a},c,d,d,b\right)  \rightarrow\left(  a,b,c,d,\underline{d,b}%
\right)  \rightarrow\left(  a,b,c,\underline{d,b},d\right) \\
&  \rightarrow\left(  a,b,c,b,d,d\right)
\end{align*}
(where an underline under two adjacent entries of a tuple means that these
entries are going to be switched in the nearest step). The final result
$\left(  a,b,c,b,d,d\right)  $ is \textquotedblleft sorted\textquotedblright%
\ in the sense that we can no longer find a $k\in\left\{  1,2,\ldots
,n-1\right\}  $ such that $z_{k}>z_{k+1}$.
\par
We notice that we had some freedom in performing our sorting process: e.g., we
could have started out by switching the $d$ with the $c$ in the $\left(
d,b,d,c,a,b\right)  $ rather than by switching the $d$ with the $b$.
\par
This is similar to the bubble sort algorithm, but there are two differences:
Firstly, $P$ is now a poset, not a totally ordered set (so we cannot hope to
get our $n$-tuple $z$ to satisfy $z_{1}\leq z_{2}\leq\cdots\leq z_{n}$ in the
end). Secondly, we are allowed to pick an index $k\in\left\{  1,2,\ldots
,n-1\right\}  $ satisfying $z_{k}>z_{k+1}$ arbitrarily (so our process is
nondeterministic), rather than having to scan the $n$-tuple from left to right
(in multiple passes) as in the classical bubble sort algorithm.} It is easy to
see that this process will eventually terminate, leaving behind an $n$-tuple
$z$ such that no $k\in\left\{  1,2,\ldots,n-1\right\}  $ satisfies
$z_{k}>z_{k+1}$ (although, in general, it will not satisfy $z_{1}\leq
z_{2}\leq\cdots\leq z_{n}$, as $P$ is only partially ordered). But a priori,
it is not clear whether this resulting $n$-tuple could depend on the choices
we made in the \textquotedblleft sorting\textquotedblright%
\ process\footnote{Namely, at every step of our process, we had to choose an
index $k\in\left\{  1,2,\ldots,n-1\right\}  $ satisfying $z_{k}>z_{k+1}$.
Whenever this index $k$ was not unique, we had freedom in choosing one of them
to start with. These choices have an effect on the \textquotedblleft
sorting\textquotedblright\ process, and so it would not be surprising if the
final result would depend on them too.}. It turns out that it does not, but
this is not completely trivial. We shall now formalize this fact. We prefer
not to talk about processes, nor to regard $z$ as mutable; instead, we will
introduce a binary relation on the set of all permutations of a given
$n$-tuple, which will model the idea of a \textquotedblleft
step\textquotedblright\ of our \textquotedblleft sorting\textquotedblright\ process.

For every $k\in\left\{  1,2,\ldots,n-1\right\}  $, let $s_{k}$ be the
transposition $\left(  k,k+1\right)  \in\mathfrak{S}_{n}$. The group
$\mathfrak{S}_{n}$ acts on $P^{n}$ by permuting the coordinates:%
\[
\sigma\cdot z=\left(  z_{\sigma^{-1}\left(  1\right)  },z_{\sigma^{-1}\left(
2\right)  },\ldots,z_{\sigma^{-1}\left(  n\right)  }\right)
\ \ \ \ \ \ \ \ \ \ \text{for all }\sigma\in\mathfrak{S}_{n}\text{ and }z\in
P^{n}.
\]
In particular, for each $k\in\left\{  1,2,\ldots,n-1\right\}  $ and $z\in
P^{n}$, the $n$-tuple $s_{k}\cdot z$ is obtained from $z$ by switching the
$k$-th and the $\left(  k+1\right)  $-th entries.

\begin{definition}
Fix $w\in P^{n}$. Let $\mathbf{S}$ be the set of all permutations of $w$.
Clearly, $\mathbf{S}$ is a finite set (having at most $n!$ elements).
Moreover, $\mathbf{S}$ is an $\mathfrak{S}_{n}$-subset of the $\mathfrak{S}%
_{n}$-set $P^{n}$.

Let us define a binary relation $\Rrightarrow$ on this set $\mathbf{S}$ as
follows: Let $a\in\mathbf{S}$ and $b\in\mathbf{S}$. If $k\in\left\{
1,2,\ldots,n-1\right\}  $, then we write $a\underset{k}{\Rrightarrow}b$ if and
only if $a_{k}>a_{k+1}$ and $b=s_{k}\cdot a$. We write $a\Rrightarrow b$ if
and only if there exists an $k\in\left\{  1,2,\ldots,n-1\right\}  $ such that
$a\underset{k}{\Rrightarrow}b$. (In other words, we write $a\Rrightarrow b$ if
and only if the $n$-tuple $b$ can be obtained from $a$ by switching two
adjacent entries which are out of order in $a$. Here, we say that two entries
of $a$ are \textit{out of order} if the left one is greater than the right
one.) Thus, the relation $\Rrightarrow$ is defined.
\end{definition}

For example, if $n=5$, $P=\mathbb{Z}$ and $w=\left(  3,1,6,3,5\right)  $, then
$\left(  1,6,3,5,3\right)  \underset{2}{\Rrightarrow}\left(  1,3,6,5,3\right)
$ (and thus $\left(  1,6,3,5,3\right)  \Rrightarrow\left(  1,3,6,5,3\right)
$) but not $\left(  1,6,3,5,3\right)  \underset{3}{\Rrightarrow}\left(
1,6,5,3,3\right)  $ (since we required $a_{k}>a_{k+1}$ when defining
$a\underset{k}{\Rrightarrow}b$).

We define a binary relation $\overset{\ast}{\Rrightarrow}$ on $\mathbf{S}$ as
in Lemma \ref{lem.diamond}. This relation $\overset{\ast}{\Rrightarrow}$ is
the reflexive-and-transitive closure of the relation $\Rrightarrow$. Thus, the
relation $\overset{\ast}{\Rrightarrow}$ is reflexive and transitive and
extends the relation $\Rrightarrow$.

We also define the notion of a \textquotedblleft final\textquotedblright%
\ element of $\mathbf{S}$ as in Lemma \ref{lem.diamond}. Now, it is easy to
see that an element $u\in\mathbf{S}$ is final if and only if no $k\in\left\{
1,2,\ldots,n-1\right\}  $ satisfies $u_{k}>u_{k+1}$.


Now, we claim:

\begin{proposition}
\label{prop.diamond.example.poset}For every $a\in\mathbf{S}$, there exists a
unique final element $b\in\mathbf{S}$ such that $a\overset{\ast}{\Rrightarrow
}b$.
\end{proposition}

In words, Proposition \ref{prop.diamond.example.poset} says that if we start
with some $n$-tuple $a\in\mathbf{S}$ and repeatedly switch adjacent entries of
$a$ which are out of order, then the procedure eventually terminates (i.e.,
eventually we will arrive at an $n$-tuple which has no two adjacent entries
that are out of order) and the resulting $n$-tuple does not depend on the
choices we made in the process (i.e., even if there were several choices of
adjacent entries to switch, they all lead to the same final
result).\footnote{Strictly speaking, Proposition
\ref{prop.diamond.example.poset} does not really say that the procedure
eventually terminates; but this will follow from the length-decrease
hypothesis in its proof below.} The only reason why we are working in
$\mathbf{S}$ instead of the whole set $P^{n}$ is that $\mathbf{S}$ is always
finite, which will make it easier for us to apply Lemma \ref{lem.diamond}.

\begin{remark}
It is important that we are switching adjacent entries of $a$. If we start
with some $n$-tuple $a\in\mathbf{S}$ and repeatedly switch entries of $a$
which are out of order but \textbf{not necessarily} adjacent, then the result
of this procedure (once it has terminated) might well depend on our choices.
(For instance, if $P$ is the poset $\left\{  1,2,2^{\prime}\right\}  $ with
relations $1<2$ and $1<2^{\prime}$, and if $n=3$ and $a=\left(  2,2^{\prime
},1\right)  $, then switching the first and the third entries leads to
$\left(  1,2^{\prime},2\right)  $, whereas switching the second and the third
entries and then switching the first and the second entries yields $\left(
1,2,2^{\prime}\right)  $; and these two results are both final and
nevertheless distinct.)
\end{remark}

Proposition \ref{prop.diamond.example.poset} is rather obvious in the case
when $P$ is totally ordered (indeed, in this case, the unique final element
$b\in\mathbf{S}$ such that $a\overset{\ast}{\Rrightarrow}b$ will simply be the
$n$-tuple obtained by rearranging $a$ in nondecreasing order). But let us
prove Proposition \ref{prop.diamond.example.poset} in the general case using
Lemma \ref{lem.diamond}.

\begin{proof}
[Proof of Proposition \ref{prop.diamond.example.poset}.]If $z\in P^{n}$, then
an \textit{inversion} of $z$ means a pair $\left(  i,j\right)  \in\left\{
1,2,\ldots,n\right\}  ^{2}$ with $i<j$ and $z_{i}>z_{j}$. For instance, if
$n=5$ and $P=\mathbb{Z}$ (as posets, where $\mathbb{Z}$ is equipped with the
usual order), then the inversions of $\left(  3,1,6,3,5\right)  $ are $\left(
1,2\right)  $, $\left(  3,4\right)  $ and $\left(  3,5\right)  $.

Define a map $\ell:P^{n}\rightarrow\mathbb{N}$ as follows: For every $z\in
P^{n}$, let $\ell\left(  z\right)  $ be the number of inversions of $z$.
Clearly, $\ell\left(  z\right)  \in\mathbb{N}$ and $\ell\left(  z\right)
\leq\dbinom{n}{2}$.

We need to show that for every $a\in\mathbf{S}$, there exists a unique final
element $b\in\mathbf{S}$ such that $a\overset{\ast}{\Rrightarrow}b$. According
to Lemma \ref{lem.diamond}, it is enough to check that the local confluence
hypothesis and the length-decrease hypothesis are satisfied\footnote{Both of
these hypotheses were stated in Lemma \ref{lem.diamond}.}.

\textit{Proof that the length-decrease hypothesis is satisfied:} Let
$a\in\mathbf{S}$ and $b\in\mathbf{S}$ be such that $a\Rrightarrow b$. Then,
there exists a $k\in\left\{  1,2,\ldots,n-1\right\}  $ such that
$a\underset{k}{\Rrightarrow}b$ (since $a\Rrightarrow b$). Consider this $k$.
We have $a\underset{k}{\Rrightarrow}b$; in other words, $a_{k}>a_{k+1}$ and
$b=s_{k}\cdot a$. In other words, the $n$-tuple $b$ is obtained from $a$ by
switching the $k$-th and the $\left(  k+1\right)  $-th entry, which were out
of order in $a$. Thus, the pair $\left(  k,k+1\right)  $ is an inversion of
$a$, but not an inversion of $b$. Furthermore, $b_{s_{k}\left(  u\right)
}=a_{u}$ for every $u\in\left\{  1,2,\ldots,n\right\}  $ (since $b=s_{k}\cdot
a$), and furthermore, for any $\left(  i,j\right)  \in\left\{  1,2,\ldots
,n\right\}  ^{2}$ satisfying $i<j$, we have $s_{k}\left(  i\right)
<s_{k}\left(  j\right)  $ if $\left(  i,j\right)  \neq\left(  k,k+1\right)  $
(this is easy to prove by checking all possible cases). From the last two
observations, we can easily conclude that the inversions of $b$ are precisely
the pairs of the form $\left(  s_{k}\left(  i\right)  ,s_{k}\left(  j\right)
\right)  $ with $\left(  i,j\right)  $ being an inversion of $a$ satisfying
$\left(  i,j\right)  \neq\left(  k,k+1\right)  $. Thus, the number of
inversions of $b$ is one less than the number of inversions of $a$ (because
$\left(  k,k+1\right)  $ is an inversion of $a$, and thus its exclusion lowers
the count by $1$). In other words, $\ell\left(  b\right)  =\ell\left(
a\right)  -1$ (because $\ell\left(  z\right)  $ means the number of inversions
of $z$ whenever $z\in P^{n}$). Thus, $\ell\left(  a\right)  >\ell\left(
b\right)  $. Hence, the length-decrease hypothesis is proven.


\textit{Proof that the local confluence hypothesis is satisfied:} Let $a$, $b$
and $c$ be three elements of $\mathbf{S}$ satisfying $a\Rrightarrow b$ and
$a\Rrightarrow c$. We need to show that there exists a $d\in\mathbf{S}$ such
that $b\overset{\ast}{\Rrightarrow}d$ and $c\overset{\ast}{\Rrightarrow}d$.

We have $a\Rrightarrow b$. In other words, the $n$-tuple $b$ can be obtained
from $a$ by switching two adjacent entries which are out of order in $a$. In
other words, we can write $a$ and $b$ in the forms%
\begin{equation}
a=\left(  \ldots,p,q,\ldots\right)  \ \ \ \ \ \ \ \ \ \ \text{and}%
\ \ \ \ \ \ \ \ \ \ b=\left(  \ldots,q,p,\ldots\right)
\label{pf.prop.diamond.example.poset.short.a-b}%
\end{equation}
for some $p\in P$ and $q\in P$ satisfying $p>q$, where the \textquotedblleft%
$\ldots$\textquotedblright\ stand for strings\footnote{These strings are
allowed to be empty.} of entries of $a$ that appear unchanged in $b$.
Similarly, we can write $a$ and $c$ in the forms%
\begin{equation}
a=\left(  \ldots,r,t,\ldots\right)  \ \ \ \ \ \ \ \ \ \ \text{and}%
\ \ \ \ \ \ \ \ \ \ c=\left(  \ldots,t,r,\ldots\right)
\label{pf.prop.diamond.example.poset.short.a-c}%
\end{equation}
for some $r\in P$ and $t\in P$ satisfying $r>t$, where the \textquotedblleft%
$\ldots$\textquotedblright\ stand for strings of entries of $a$ that appear
unchanged in $c$. Consider the $p$ and $q$ from
(\ref{pf.prop.diamond.example.poset.short.a-b}), and the $r$ and $t$ from
(\ref{pf.prop.diamond.example.poset.short.a-c}). Also, let $u$ and $u+1$ be
the positions of $p$ and $q$ in $a$ in
(\ref{pf.prop.diamond.example.poset.short.a-b}). Furthermore, let $v$ and
$v+1$ be the positions of $r$ and $t$ in $a$ in
(\ref{pf.prop.diamond.example.poset.short.a-c}).

We WLOG assume that $u\leq v$, because otherwise we can simply switch $b$ with
$c$ (thus forcing $u$ to switch with $v$). Moreover, we can WLOG assume that
$u\neq v$ (because if $u=v$, then finding a $d\in\mathbf{S}$ such that
$b\overset{\ast}{\Rrightarrow}d$ and $c\overset{\ast}{\Rrightarrow}d$ is
trivial\footnote{\textit{Proof.} Assume that $u=v$. Thus, the $p$ and $q$ in
(\ref{pf.prop.diamond.example.poset.short.a-b}) appear in the same positions
as the $r$ and $t$ in (\ref{pf.prop.diamond.example.poset.short.a-c}). Hence,
both $b$ and $c$ are obtained from $a$ in one and the same way (namely, by
switching the entries in these positions). Hence, $b=c$. Thus, we can find a
$d\in\mathbf{S}$ such that $b\overset{\ast}{\Rrightarrow}d$ and
$c\overset{\ast}{\Rrightarrow}d$ just by setting $d=b=c$, qed.}). Thus, $u<v$
(since $u\leq v$).

Let us now try to combine the representations
(\ref{pf.prop.diamond.example.poset.short.a-b}) for $a$ and $b$ with the
representations (\ref{pf.prop.diamond.example.poset.short.a-c}) for $a$ and
$c$ into a set of representations for $a$, $b$ and $c$ in which both the
changes from $a$ to $b$ and the changes from $a$ to $c$ are visible at the
same time. We must be in one of the following two cases:

\textit{Case 1:} We have $u<v-1$.

\textit{Case 2:} We have $u=v-1$.

Let us first consider Case 1. In this case, we can merge the representations
(\ref{pf.prop.diamond.example.poset.short.a-b}) and
(\ref{pf.prop.diamond.example.poset.short.a-c}) as follows:%
\[
a=\left(  \ldots,p,q,\ldots,r,t,\ldots\right)  ,\ \ \ \ \ \ \ \ \ \ b=\left(
\ldots,q,p,\ldots,r,t,\ldots\right)  ,\ \ \ \ \ \ \ \ \ \ c=\left(
\ldots,p,q,\ldots,t,r,\ldots\right)  ,
\]
where the \textquotedblleft$\ldots$\textquotedblright\ stand for strings of
entries of $a$ that appear unchanged in both $b$ and $c$. Thus, we can find a
$d\in\mathbf{S}$ such that $b\overset{\ast}{\Rrightarrow}d$ and
$c\overset{\ast}{\Rrightarrow}d$: namely, set%
\[
d=\left(  \ldots,q,p,\ldots,t,r,\ldots\right)
\]
(where the \textquotedblleft$\ldots$\textquotedblright\ have the same meaning
as before). Thus, the local confluence hypothesis is proven in Case 1.

Let us now consider Case 2. In this case, $u=v-1$. Hence, $u+1=v$. Now, $q$ is
the $\left(  u+1\right)  $-th entry of $a$, that is, the $v$-th entry of $a$
(since $u+1=v$); but $r$ is also the $v$-th entry of $a$. Hence, $q=r$, so
that $p>q=r>t$. Now, we can merge the representations
(\ref{pf.prop.diamond.example.poset.short.a-b}) and
(\ref{pf.prop.diamond.example.poset.short.a-c}) as follows:%
\[
a=\left(  \ldots,p,q,t,\ldots\right)  ,\ \ \ \ \ \ \ \ \ \ b=\left(
\ldots,q,p,t,\ldots\right)  ,\ \ \ \ \ \ \ \ \ \ c=\left(  \ldots
,p,t,q,\ldots\right)  ,
\]
where the \textquotedblleft$\ldots$\textquotedblright\ stand for strings of
entries of $a$ that appear unchanged in both $b$ and $c$. Let us now set%
\[
e=\left(  \ldots,q,t,p,\ldots\right)  ,\ \ \ \ \ \ \ \ \ \ f=\left(
\ldots,t,p,q,\ldots\right)  ,\ \ \ \ \ \ \ \ \ \ d=\left(  \ldots
,t,q,p,\ldots\right)
\]
(where the \textquotedblleft$\ldots$\textquotedblright\ have the same meaning
as before). Then, $b\Rrightarrow e$ and $e\Rrightarrow d$; thus,
$b\overset{\ast}{\Rrightarrow}d$ (since $\overset{\ast}{\Rrightarrow}$ is the
reflexive-and-transitive closure of $\Rrightarrow$). Also, $c\Rrightarrow f$
and $f\Rrightarrow d$; thus, $c\overset{\ast}{\Rrightarrow}d$ (since
$\overset{\ast}{\Rrightarrow}$ is the reflexive-and-transitive closure of
$\Rrightarrow$). Hence, we have found a $d\in\mathbf{S}$ such that
$b\overset{\ast}{\Rrightarrow}d$ and $c\overset{\ast}{\Rrightarrow}d$. Thus,
the local confluence hypothesis is proven in Case 2 as well.

The local confluence hypothesis thus holds (because it is proven in both Cases
1 and 2).


We now know that both the local confluence hypothesis and the length-decrease
hypothesis are satisfied. This completes the proof of Proposition
\ref{prop.diamond.example.poset}.
\end{proof}

\section{\label{sect.proof}Proof of Lemma \ref{lem.BK}}

We now come to the actual proof of Lemma \ref{lem.BK}. For the whole Section
\ref{sect.proof}, we shall be working in the situation of Lemma \ref{lem.BK}.

\subsection{\label{subsect.fourtypes}12-tables and the four types of their
columns}

Let $Z$ be a finite convex subset of $\mathbb{N}_{+}^{2}$. We shall keep $Z$
fix for the rest of Section \ref{sect.proof}. Let $\mathbf{R}$ denote the set
of all 12-rpps of shape $Z$.

A \textit{12-table} will mean a map $T:Z\rightarrow\left\{  1,2\right\}  $
such that the entries of $T$ are weakly increasing down columns. (We do not
require them to be weakly increasing along rows.) Every column of a 12-table
is a sequence of the form $\left(  \underbrace{1,1,\ldots,1}_{u\text{ times
}1},\underbrace{2,2,\ldots,2}_{v\text{ times }2}\right)  $ with $u\in
\mathbb{N}$ and $v\in\mathbb{N}$. We say that such a sequence is

\begin{itemize}
\item \textit{1-pure} if it is nonempty and consists purely of $1$'s (that is,
$u>0$ and $v=0$);

\item \textit{2-pure} if it is nonempty and consists purely of $2$'s (that is,
$u=0$ and $v>0$);

\item \textit{mixed} if it contains both $1$'s and $2$'s (that is, $u>0$ and
$v>0$).
\end{itemize}

Consequently, every column of a 12-table is either empty or 1-pure or 2-pure
or mixed (and these four cases do not overlap).

Also, if $s$ is a sequence of the form $\left(  \underbrace{1,1,\ldots
,1}_{u\text{ times }1},\underbrace{2,2,\ldots,2}_{v\text{ times }2}\right)  $
with $u\in\mathbb{N}$ and $v\in\mathbb{N}$, then we define the
\textit{signature} of $s$ to be the nonnegative integer $\left\{
\begin{array}
[c]{c}%
0,\text{ if }s\text{ is 2-pure or empty;}\\
1,\text{ if }s\text{ is mixed;}\\
2,\text{ if }s\text{ is 1-pure}%
\end{array}
\right.  $. We denote this signature by $\operatorname*{sig}\left(  s\right)
$. For any 12-table $T$, we define a nonnegative integer $\ell\left(
T\right)  $ by%
\[
\ell\left(  T\right)  =\sum_{h\in\mathbb{N}_{+}}h\cdot\operatorname*{sig}%
\left(  \text{the }h\text{-th column of }T\right)  .
\]
\footnote{This is well-defined, because all but finitely many $h\in
\mathbb{N}_{+}$ satisfy $\operatorname*{sig}\left(  \text{the }h\text{-th
column of }T\right)  =0$ (since for all but finitely many $h\in\mathbb{N}_{+}%
$, the $h$-th column of $T$ is empty).} For instance, if $T=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 1 & 2 \\
%\none& 1 & 1 & 2 \\
%2 & 1 & 1 & 2 \\
%2 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 1 & 2 \\
\none& 1 & 1 & 2 \\
2 & 1 & 1 & 2 \\
2 & 2
\end{ytableau}%
%EndExpansion
$, then $\ell\left(  T\right)  =1\cdot0+2\cdot1+3\cdot2+4\cdot0+5\cdot
2+6\cdot0+7\cdot0+8\cdot0+\cdots=18$.

\subsection{Conflicts of 12-tables}

If $T$ is a 12-table, then we define a \textit{conflict} of $T$ to be a pair
$\left(  i,j\right)  $ of positive integers satisfying $i<j$ such that there
exists an $r\in\mathbb{N}_{+}$ satisfying $\left(  r,i\right)  \in Z$,
$\left(  r,j\right)  \in Z$, $T\left(  r,i\right)  =2$ and $T\left(
r,j\right)  =1$. (Speaking visually, a conflict of $T$ is a pair $\left(
i,j\right)  $ of positive integers such that the filling $T$ has an entry $2$
in column $i$ lying due west of an entry $1$ in column $j$.) For instance, the
conflicts of the 12-table $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 1 & 2 \\
%\none& 1 & 1 & 2 \\
%2 & 1 & 1 & 2 \\
%2 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 1 & 2 \\
\none& 1 & 1 & 2 \\
2 & 1 & 1 & 2 \\
2 & 2
\end{ytableau}%
%EndExpansion
$ are $\left(  1,2\right)  $, $\left(  1,3\right)  $ and $\left(  4,5\right)
$.

(The notion of a conflict of $T$ is in some sense analogous to that of an
inversion of $z$ in Subsection \ref{subsect.bubble}.)

Clearly, a 12-rpp of shape $Z$ is the same as a 12-table which has no
conflicts.\footnote{Indeed, the conflicts of a 12-table stem from the failures
of its entries to be weakly increasing along rows.}


We notice a simple fact which we will not use until much later:

\begin{proposition}
\label{prop.conflict.transitive}Let $T$ be a 12-table. Let $a$, $b$ and $c$ be
positive integers such that $\left(  a,b\right)  $ and $\left(  b,c\right)  $
are conflicts of $T$. Then, $\left(  a,c\right)  $ also is a conflict of $T$.
\end{proposition}

\begin{example}
If $T=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 \\
%2 & 1 & 1 \\
%2 & 2 & 1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 \\
2 & 1 & 1 \\
2 & 2 & 1
\end{ytableau}%
%EndExpansion
$, then $\left(  1,2\right)  $ and $\left(  2,3\right)  $ are conflicts of
$T$, and so is $\left(  1,3\right)  $. One can notice that every row which
\textquotedblleft witnesses\textquotedblright\ the conflict $\left(
1,2\right)  $ will also \textquotedblleft witness\textquotedblright\ the
conflict $\left(  1,3\right)  $ (where we say that the $r$-th row
\textit{witnesses} a conflict $\left(  i,j\right)  $ if and only if $\left(
r,i\right)  \in Z$, $\left(  r,j\right)  \in Z$, $T\left(  r,i\right)  =2$ and
$T\left(  r,j\right)  =1$).

\end{example}

\begin{proof}
[\nopunct]Since we shall not use Proposition \ref{prop.conflict.transitive},
we leave its proof (which is an instructive exercise on the definition of
conflicts and on the use of the convexity of $Z$) to the reader.
\end{proof}

\begin{remark}
\label{rmk.conflict.transitive.anti}Proposition \ref{prop.conflict.transitive}
has an analogue for \textquotedblleft non-conflicts\textquotedblright: Let $T$
be a 12-table. Let $a$, $b$ and $c$ be positive integers such that $\left(
a,c\right)  $ is a conflict of $T$ and such that $a<b<c$. Then, at least one
of the pairs $\left(  a,b\right)  $ and $\left(  b,c\right)  $ is a conflict
of $T$. We shall not use this fact, however.
\end{remark}

\begin{todo}
Proposition \ref{prop.conflict.transitive} shows that every 12-table $T$ gives
rise to a \textit{conflict poset}: the set $\mathbb{N}_{+}$ can be endowed
with a partial order whose smaller relation $\prec$ is given by%
\[
\left(  i\prec j\right)  \ \Longleftrightarrow\ \left(  \left(  i,j\right)
\text{ is a conflict of }T\right)  .
\]
Does this have any interesting properties? What exactly happens to this poset
when we resolve a conflict? What kinds of posets can be obtained this way?

Viviane Pons says that Proposition \ref{prop.conflict.transitive} and Remark
\ref{rmk.conflict.transitive.anti} yield that there exists a permutation
$\sigma\in\mathfrak{S}_{\left(  \infty\right)  }$ such that $\left(
i,j\right)  $ is a conflict of $T$ if and only if $\left(  i<j\text{ and
}\sigma\left(  i\right)  >\sigma\left(  j\right)  \right)  $. This, I think,
is not hard to prove by induction. Conversely, inversion posets of
permutations in $\mathfrak{S}_{\left(  \infty\right)  }$ can be represented as
conflict posets of 12-tables (though not necessarily benign 12-tables).

I am wondering: What permutations in $\mathfrak{S}_{\left(  \infty\right)  }$
have the property that their inversion poset can be written as a conflict
poset of a benign 12-table?
\end{todo}

\subsection{Benign 12-tables and separators}
\label{subsection:benign}
We say that a 12-table $T$ is \textit{benign} if there exists no conflict
$\left(  i,j\right)  $ of $T$ such that the $i$-th column of $T$ and the
$j$-th column of $T$ both are mixed. (Remember that columns are sequences.)
For instance, the 12-table $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 1 & 1 & 2 & 1 \\
%1 & 1 & 1 \\
%1 & 2 & 1 \\
%1 & 2 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 1 & 1 & 2 & 1 \\
1 & 1 & 1 \\
1 & 2 & 1 \\
1 & 2 \\
2
\end{ytableau}%
%EndExpansion
$ is benign (despite having $\left(  2,3\right)  $ and $\left(  4,5\right)  $
as conflicts), while the 12-table $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 1 & 1 & 2 & 1 \\
%1 & 1 & 1 \\
%1 & 2 & 1 \\
%1 & 2 & 2\\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 1 & 1 & 2 & 1 \\
1 & 1 & 1 \\
1 & 2 & 1 \\
1 & 2 & 2\\
2
\end{ytableau}%
%EndExpansion
$ is not (its conflict $\left(  2,3\right)  $ has the property that the $2$-nd
column and the $3$-rd column both are mixed). Notice that 12-rpps are benign
12-tables, but the converse is not true.

Let us give an alternative description of benign 12-tables. Namely, if $T$ is
a 12-table, and if $k\in\mathbb{N}_{+}$ is such that the $k$-th column of $T$
is mixed, then we define $\operatorname*{sep}\nolimits_{k}T$ to be the
smallest $r\in\mathbb{N}_{+}$ such that $\left(  r,k\right)  \in Z$ and
$T\left(  r,k\right)  =2$.\ \ \ \ \footnote{Such an $r$ exists since the
$k$-th column of $T$ contains at least one $2$ (in fact, it is mixed).}
(Speaking visually, the integer $\operatorname*{sep}\nolimits_{k}T$ tells us
at what row the $1$'s end\footnote{Our use of the words \textquotedblleft
end\textquotedblright\ and \textquotedblleft begin\textquotedblright\ always
assumes that we are reading the columns of our 12-tables from top to bottom.}
and the $2$'s begin in the $k$-th column of $T$. Or, more sloppily said, it
separates the $1$'s from the $2$'s in the $k$-th column of $T$; this is why we
call it $\operatorname*{sep}\nolimits_{k}T$.) Thus, every 12-table $T$, every
$r\in\mathbb{N}_{+}$ and every $k\in\mathbb{N}_{+}$ such that the $k$-th
column of $T$ is mixed and such that $\left(  r,k\right)  \in Z$ satisfy%
\begin{equation}
T\left(  r,k\right)  =\left\{
\begin{array}
[c]{c}%
1,\ \ \ \ \ \ \ \ \ \ \text{if }r<\operatorname*{sep}\nolimits_{k}T;\\
2,\ \ \ \ \ \ \ \ \ \ \text{if }r\geq\operatorname*{sep}\nolimits_{k}T
\end{array}
\right.  \label{pf.lem.BK.Tsep}%
\end{equation}
(because the $k$-th column of $T$ is weakly increasing).


If $T$ is a 12-table, then we let $\operatorname*{seplist}T$ denote the list
of all values $\operatorname*{sep}\nolimits_{k}T$ (in the order of increasing
$k$), where $k$ ranges over all positive integers for which the $k$-th column
of $T$ is mixed. For instance, if $T=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 1 & 1 \\
%\none& 2 & 1 & 1 & 2 \\
%1 & 2 & 1 \\
%2 & 2 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 1 & 1 \\
\none& 2 & 1 & 1 & 2 \\
1 & 2 & 1 \\
2 & 2 & 2
\end{ytableau}%
%EndExpansion
$, then $\operatorname*{sep}\nolimits_{1}T=4$ (since $T\left(  1,4\right)  =2$
and $T\left(  1,3\right)  =1$), and $\operatorname*{sep}\nolimits_{3}T=4$, and
$\operatorname*{sep}\nolimits_{5}T=2$ (and there are no other $k\in
\mathbb{N}_{+}$ for which $\operatorname*{sep}\nolimits_{k}T$ is defined), so
that $\operatorname*{seplist}T=\left(  4,4,2\right)  $.

What do the numbers $\operatorname*{sep}\nolimits_{k}T$ have to do with being benign?

It is easy to see that if $T$ is a 12-table, and $i$ and $j$ are two positive
integers such that the $i$-th column of $T$ and the $j$-th column of $T$ both
are mixed, then $\left(  i,j\right)  $ is a conflict of $T$ if and only if we
have $i<j$ and $\operatorname*{sep}\nolimits_{i}T<\operatorname*{sep}%
\nolimits_{j}T$.


Hence, the definition of a \textquotedblleft benign\textquotedblright%
\ 12-table rewrites as follows: A 12-table $T$ is benign if and only if there
exists no pair $\left(  i,j\right)  $ of positive integers such that the
$i$-th column of $T$ and the $j$-th column of $T$ both are mixed and such that
$i<j$ and $\operatorname*{sep}\nolimits_{i}T<\operatorname*{sep}%
\nolimits_{j}T$. In other words, a 12-table $T$ is benign if and only if the
list $\operatorname*{seplist}T$ is weakly decreasing. We will refer to this
fact as the \textquotedblleft separational definition of
benignity\textquotedblright.


Let $\mathbf{S}$ denote the set of all benign 12-tables.\footnote{We recall
that $Z$ is fixed, and all 12-tables have to have $Z$ as their domain.} Then,
$\mathbf{S}$ is a finite set, and we have $\mathbf{R}\subseteq\mathbf{S}$
(since every 12-rpp of shape $Z$ is a benign 12-table).


\subsection{The $\operatorname*{flip}$ map on benign 12-tables}

We can define a map $\operatorname*{flip}:\mathbf{S}\rightarrow\mathbf{S}$ as
follows: Let $T\in\mathbf{S}$; that is, let $T$ be a benign 12-table. For
every $k\in\mathbb{N}_{+}$ for which the $k$-th column of $T$ is nonempty, we
transform the $k$-th column of $T$ as follows:

\begin{itemize}
\item \textbf{If} this column is 1-pure, we replace all its entries by $2$'s
(so that it becomes 2-pure).

\textbf{Otherwise}, if this column is 2-pure, we replace all its entries by
$1$'s (so that it becomes 1-pure).

\textbf{Otherwise} (i.e., if this column is mixed), we do not change it.
\end{itemize}

Once these transformations are made for all $k$, the resulting filling of $Z$
is a 12-table which is still benign (because its mixed columns are precisely
the mixed columns of the original $T$). We define $\operatorname*{flip}\left(
T\right)  $ to be this resulting benign 12-table. Thus, the map
$\operatorname*{flip}:\mathbf{S}\rightarrow\mathbf{S}$ is defined.

For example, if $T=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 1 & 1 & 2 & 1 \\
%1 & 1 & 1 \\
%1 & 2 & 1 \\
%1 & 2 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 1 & 1 & 2 & 1 \\
1 & 1 & 1 \\
1 & 2 & 1 \\
1 & 2 \\
2
\end{ytableau}%
%EndExpansion
$, then $\operatorname*{flip}\left(  T\right)  =%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 1 & 2 & 1 & 2 \\
%1 & 1 & 2 \\
%1 & 2 & 2 \\
%1 & 2 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 1 & 2 & 1 & 2 \\
1 & 1 & 2 \\
1 & 2 & 2 \\
1 & 2 \\
2
\end{ytableau}%
%EndExpansion
$.

The following proposition gathers some easy properties of
$\operatorname*{flip}$:

\begin{proposition}
\label{prop.flip}\textbf{(a)} We have $\operatorname*{flip}\circ
\operatorname*{flip}=\operatorname*{id}$ (that is, the map
$\operatorname*{flip}$ is an involution).

\textbf{(b)} Let $T$ be a benign 12-table. When $T$ is transformed into
$\operatorname*{flip}\left(  T\right)  $, the 1-pure columns of $T$ become
2-pure columns of $\operatorname*{flip}\left(  T\right)  $, and the 2-pure
columns of $T$ become 1-pure columns of $\operatorname*{flip}\left(  T\right)
$, while the mixed columns and the empty columns do not change.

\textbf{(c)} For every benign 12-table $T$, we have%
\begin{equation}
\operatorname*{ceq}\left(  \operatorname*{flip}\left(  T\right)  \right)
=\operatorname*{ceq}\left(  T\right)  \label{pf.lem.BK.flip.ceq}%
\end{equation}
and%
\begin{equation}
\operatorname*{ircont}\left(  \operatorname*{flip}\left(  T\right)  \right)
=s_{1}\cdot\operatorname*{ircont}\left(  T\right)  .
\label{pf.lem.BK.flip.ircont}%
\end{equation}

\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.flip}.]All of Proposition \ref{prop.flip} is
straightforward to prove. (The equality (\ref{pf.lem.BK.flip.ircont}) follows
from observing that the $k \in\mathbb{N}_{+}$ for which the $k$-th column of
$\operatorname*{flip}\left(  T\right)  $ contains $1$ are precisely the $k
\in\mathbb{N}_{+}$ for which the $k$-th column of $T$ contains $2$, and vice versa.)
\end{proof}


We notice that, when the map $\operatorname*{flip}$ acts on a benign 12-table
$T$, it transforms every column of $T$ independently. Thus, we have the following:

\begin{remark}
\label{rmk.flip.independent}If $P$ and $Q$ are two benign 12-tables, and if
$i\in\mathbb{N}_{+}$ is such that%
\[
\left(  \text{the }i\text{-th column of }P\right)  =\left(  \text{the
}i\text{-th column of }Q\right)  ,
\]
then%
\[
\left(  \text{the }i\text{-th column of }\operatorname*{flip}\left(  P\right)
\right)  =\left(  \text{the }i\text{-th column of }\operatorname*{flip}\left(
Q\right)  \right)  .
\]

\end{remark}

\subsection{Plan of the proof}

Let us now briefly sketch the ideas behind the rest of the proof before we go
into them in detail. The map $\operatorname*{flip}:\mathbf{S}\rightarrow
\mathbf{S}$ does not generally send 12-rpps to 12-rpps (i.e., it does not
restrict to a map $\mathbf{R}\rightarrow\mathbf{R}$). However, we shall amend
this by defining a way to transform any benign 12-table into a 12-rpp by what
we call \textquotedblleft resolving conflicts\textquotedblright. The process
of \textquotedblleft resolving conflicts\textquotedblright\ will be a stepwise
process, and will be formalized in terms of a binary relation $\Rrightarrow$
on the set $\mathbf{S}$ which we will soon introduce. The intuition behind
saying \textquotedblleft$P\Rrightarrow Q$\textquotedblright\ is that the
benign 12-table $P$ has a \textquotedblleft resolvable\textquotedblright%
\ conflict, resolving which yields the benign 12-table $Q$. By
\textquotedblleft resolvable conflict\textquotedblright, we mean a conflict
$\left(  i,j\right)  $ with $j=i+1$. (The relation $\Rrightarrow$ is similar
to the relation $\Rrightarrow$ from Subsection \ref{subsect.bubble}.
\textquotedblleft Resolving\textquotedblright\ a resolvable conflict in a
benign 12-table $P$ is an analogue of switching two adjacent entries of an
$n$-tuple $z$ which are out of order.) Starting with a benign 12-table $P$, we
can repeatedly resolve \textquotedblleft resolvable\textquotedblright%
\ conflicts until this is no longer possible\footnote{This will eventually
happen; i.e., we will eventually rearch a state where resolving conflicts will
no longer be possible because there will be no resolvable conflicts left. In
fact, we will show that if \textquotedblleft resolving\textquotedblright\ a
conflict in $P$ yields a new 12-table $Q$, then $\ell\left(  P\right)
>\ell\left(  Q\right)  $ using the notations of Subsection
\ref{subsect.fourtypes}; thus, we cannot go on resolving conflicts
indefinitely (because the value of $\ell\left(  T\right)  $ cannot go on
decreasing indefinitely). The function $\ell$ thus plays the same role as the
function $\ell$ in Subsection \ref{subsect.bubble}.}. We have some freedom in
performing this process, because at any step there can be a choice of several
resolvable conflicts to resolve; but we will see (using Lemma
\ref{lem.diamond}) that the final result does not depend on the process.
Hence, the final result can be regarded as a function of $P$. We will denote
it by $\operatorname*{norm}P$, and we will see that it is a 12-rpp. We will
then define a map $\mathbf{B}:\mathbf{R}\rightarrow\mathbf{R}$ by
$\mathbf{B}\left(  T\right)  =\operatorname*{norm}\left(  \operatorname*{flip}%
T\right)  $, and show that it is an involution satisfying the properties that
we want it to satisfy.

\subsection{\label{subsect.resolving}Resolving conflicts}

Now we come to the details.

Let $k\in\mathbb{N}_{+}$. Let $P\in\mathbf{S}$. Thus, $P$ is a benign
12-table. Assume (for the whole Subsection \ref{subsect.resolving}) that
$\left(  k,k+1\right)  $ is a conflict of $P$. In this case, we say that
$\left(  k,k+1\right)  $ is a \textit{resolvable conflict} of $P$ (and, in a
moment, we will explain what it means to \textquotedblleft
resolve\textquotedblright\ it). Since $\left(  k,k+1\right)  $ is a conflict
of $P$, it is clear that the $k$-th column of $P$ must contain at least one
$2$. Hence, the $k$-th column of $P$ is either mixed or 2-pure. Similarly, the
$\left(  k+1\right)  $-th column of $P$ is either mixed or 1-pure. But the
$k$-th and the $\left(  k+1\right)  $-th columns of $P$ cannot both be mixed
at the same time\footnote{This is because there exists no conflict $\left(
i,j\right)  $ of $P$ such that the $i$-th column of $P$ and the $j$-th column
of $P$ both are mixed (since $P$ is benign), but $\left(  k,k+1\right)  $
would be such a conflict if the $k$-th and the $\left(  k+1\right)  $-th
columns of $P$ both were mixed.}. Hence, if the $k$-th column of $P$ is mixed,
then the $\left(  k+1\right)  $-th column of $P$ cannot be mixed, and thus
this $\left(  k+1\right)  $-th column must be 1-pure\footnote{since the
$\left(  k+1\right)  $-th column of $P$ is either mixed or 1-pure}. Thus we
introduce the following notations:

\begin{itemize}
\item We say that the 12-table $P$ has $k$\textit{-type M1} if the $k$-th
column of $P$ is mixed and the $\left(  k+1\right)  $-th column of $P$ is 1-pure.

\item We say that the 12-table $P$ has $k$\textit{-type 2M} if the $k$-th
column of $P$ is 2-pure and the $\left(  k+1\right)  $-th column of $P$ is mixed.

\item We say that the 12-table $P$ has $k$\textit{-type 21} if the $k$-th
column of $P$ is 2-pure and the $\left(  k+1\right)  $-th column of $P$ is 1-pure.
\end{itemize}

Then, the 12-table $P$ always either has $k$-type M1, or has $k$-type 2M, or
has $k$-type 21\ \ \ \ \footnote{\textit{Proof.} As we know, the $k$-th column
of $P$ is either mixed or 2-pure. If it is 2-pure, then $P$ must either have
$k$-type 2M or have $k$-type 21 (since the $\left(  k+1\right)  $-th column of
$P$ is either mixed or 1-pure). If it is mixed, then the $\left(  k+1\right)
$-th column of $P$ must be 1-pure (as we have seen above), and thus $P$ must
have type M1. In either case, the 12-table $P$ either has $k$-type M1, or has
$k$-type 2M, or has $k$-type 21. Qed.}.

(Of course, the names \textquotedblleft M1\textquotedblright,
\textquotedblleft2M\textquotedblright, \textquotedblleft21\textquotedblright%
\ have been chosen to match the types of the columns: e.g., \textquotedblleft%
2M\textquotedblright\ stands for \textquotedblleft\textbf{2}-pure and
\textbf{M}ixed\textquotedblright.)

Now, we define a new 12-table $\operatorname*{res}\nolimits_{k}P$ as follows:

\begin{itemize}
\item If $P$ has $k$-type M1, then we let $\operatorname*{res}_{k}P$ be the
12-table defined as follows\footnote{Here is an example for this definition:
If $P=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 1 \\
%\none& \none& 1 & 2 \\
%\none& 1 & 1 & 2 \\
%\none& 1 & 1 \\
%\none& 2 & 1 \\
%1 & 2 & 1 \\
%2 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 1 \\
\none& \none& 1 & 2 \\
\none& 1 & 1 & 2 \\
\none& 1 & 1 \\
\none& 2 & 1 \\
1 & 2 & 1 \\
2 & 2
\end{ytableau}%
%EndExpansion
$ and $k=2$, then $\left(  k,k+1\right)  $ is a conflict of $P$, and we have
$\operatorname*{sep}\nolimits_{k}P=5$ (since $P\left(  4,k\right)  =P\left(
4,2\right)  =1$ and $P\left(  5,k\right)  =P\left(  5,2\right)  =2$) and
$\operatorname*{res}\nolimits_{k}P=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 1 \\
%\none& \none& 1 & 2 \\
%\none& 1 & 1 & 2 \\
%\none& 1 & 1 \\
%\none& 1 & 2 \\
%1 & 1 & 2 \\
%2 & 1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 1 \\
\none& \none& 1 & 2 \\
\none& 1 & 1 & 2 \\
\none& 1 & 1 \\
\none& 1 & 2 \\
1 & 1 & 2 \\
2 & 1
\end{ytableau}%
%EndExpansion
$. The $2$'s in the $\left(  k+1\right)  $-th column of $\operatorname*{res}%
\nolimits_{k}P$ start in row $5$ because the $2$'s in the $k$-th column of $P$
start in row $5$; this illustrates the equality $\operatorname*{sep}%
\nolimits_{k+1}\left(  \operatorname*{res}\nolimits_{k}P\right)
=\operatorname*{sep}\nolimits_{k}P$.
\par
See Example \ref{exa.resolve.short} below for another example.}: The $k$-th
column of $\operatorname*{res}_{k}P$ is 1-pure (i.e., it is filled with
$1$'s); the $\left(  k+1\right)  $-th column of $\operatorname*{res}%
\nolimits_{k}P$ is mixed and satisfies $\operatorname*{sep}\nolimits_{k+1}%
\left(  \operatorname*{res}\nolimits_{k}P\right)  =\operatorname*{sep}%
\nolimits_{k}P$; all other columns of $\operatorname*{res}\nolimits_{k}P$ are
copied over from $P$ unchanged.\footnote{The reader should check that this
definition is well-defined: It is clear that the requirements that we are
imposing on $\operatorname*{res}_{k}P$ determine the 12-table
$\operatorname*{res}_{k}P$ uniquely, but it is not immediately obvious why
there exists a 12-table $\operatorname*{res}\nolimits_{k}P$ which meets these
requirements. What could (in theory) go wrong is the requirement that the
$\left(  k+1\right)  $-th column of $\operatorname*{res}\nolimits_{k}P$ be
mixed and satisfy $\operatorname*{sep}\nolimits_{k+1}\left(
\operatorname*{res}\nolimits_{k}P\right)  =\operatorname*{sep}\nolimits_{k}P$.
We can try to achieve this by setting
\begin{align*}
\left(  \operatorname*{res}\nolimits_{k}P\right)  \left(  r,k+1\right)   &
=\left\{
\begin{array}
[c]{c}%
1,\ \ \ \ \ \ \ \ \ \ \text{if }r<\operatorname*{sep}\nolimits_{k}P;\\
2,\ \ \ \ \ \ \ \ \ \ \text{if }r\geq\operatorname*{sep}\nolimits_{k}P
\end{array}
\right. \\
&  \ \ \ \ \ \ \ \ \ \ \text{for all }r\in\mathbb{N}_{+}\text{ for which
}\left(  r,k+1\right)  \in Z.
\end{align*}
This (together with the requirements on the other columns) defines a 12-table
$\operatorname*{res}\nolimits_{k}P$, but we still need to check that the thus
resulting $\left(  k+1\right)  $-th column of $\operatorname*{res}%
\nolimits_{k}P$ is actually mixed. To check this, the reader should verify
that both cells $\left(  \operatorname*{sep}\nolimits_{k}P,k+1\right)  $ and
$\left(  \operatorname*{sep}\nolimits_{k}P+1,k+1\right)  $ belong to $Z$ (here
it is necessary to invoke the convexity of $Z$ and the existence of the
conflict $\left(  k,k+1\right)  $ in $P$), and that these cells have entries
$1$ and $2$ in $\operatorname*{res}\nolimits_{k}P$, respectively.}

\item If $P$ has $k$-type 2M, then we let $\operatorname*{res}_{k}P$ be the
12-table defined as follows: The $k$-th column of $\operatorname*{res}_{k}P$
is mixed and satisfies $\operatorname*{sep}\nolimits_{k}\left(
\operatorname*{res}\nolimits_{k}P\right)  =\operatorname*{sep}\nolimits_{k+1}%
P$; the $\left(  k+1\right)  $-th column of $\operatorname*{res}%
\nolimits_{k}P$ is 2-pure (i.e., it is filled with $2$'s); all other columns
of $\operatorname*{res}\nolimits_{k}P$ are copied over from $P$
unchanged.\footnote{Again, it is easy to see that this is well-defined.}

\item If $P$ has $k$-type 21, then we let $\operatorname*{res}_{k}P$ be the
12-table defined as follows: The $k$-th column of $\operatorname*{res}_{k}P$
is 1-pure; the $\left(  k+1\right)  $-th column of $\operatorname*{res}%
\nolimits_{k}P$ is 2-pure; all other columns of $\operatorname*{res}%
\nolimits_{k}P$ are copied over from $P$ unchanged.
\end{itemize}

In either case, $\operatorname*{res}\nolimits_{k}P$ is a well-defined
12-table. It is furthermore clear that $\operatorname*{seplist}\left(
\operatorname*{res}\nolimits_{k}P\right)  =\operatorname*{seplist}P$. Thus,
using the \textquotedblleft separational definition of
benignity\textquotedblright, we see that $\operatorname*{res}\nolimits_{k}P$
is benign (since $P$ is benign); that is, $\operatorname*{res}\nolimits_{k}%
P\in\mathbf{S}$. We say that $\operatorname*{res}\nolimits_{k}P$ is the
12-table obtained by \textit{resolving} the conflict $\left(  k,k+1\right)  $
in $P$. Let us give some examples:

\Needspace{14\baselineskip}

\begin{example}
\label{exa.resolve.short}Let $P=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 1 \\
%\none& 1 & 1 & 2 \\
%2 & 1 & 1 \\
%2 & 2 & 1 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 1 \\
\none& 1 & 1 & 2 \\
2 & 1 & 1 \\
2 & 2 & 1 \\
2
\end{ytableau}%
%EndExpansion
$. Then, $P$ is a benign 12-table (with only one mixed column), and its
conflicts are $\left(  1,2\right)  $, $\left(  1,3\right)  $, $\left(
2,3\right)  $ and $\left(  4,5\right)  $. Out of these conflicts, $\left(
1,2\right)  $, $\left(  2,3\right)  $ and $\left(  4,5\right)  $ are
resolvable (as they have the form $\left(  k,k+1\right)  $ for various $k$).
We have $\operatorname*{sep}\nolimits_{2}P=4$.

If we set $k=1$, then $P$ has $k$-type 2M, and resolving the conflict $\left(
k,k+1\right)  =\left(  1,2\right)  $ gives us the 12-table
$\operatorname*{res}\nolimits_{1}P=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 1 \\
%\none& 2 & 1 & 2 \\
%1 & 2 & 1 \\
%2 & 2 & 1 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 1 \\
\none& 2 & 1 & 2 \\
1 & 2 & 1 \\
2 & 2 & 1 \\
2
\end{ytableau}%
%EndExpansion
$.

If we instead set $k=2$, then $P$ has $k$-type M1, and resolving the conflict
$\left(  k,k+1\right)  =\left(  2,3\right)  $ gives us the 12-table
$\operatorname*{res}\nolimits_{2}P=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 1 \\
%\none& 1 & 1 & 2 \\
%2 & 1 & 1 \\
%2 & 1 & 2 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 1 \\
\none& 1 & 1 & 2 \\
2 & 1 & 1 \\
2 & 1 & 2 \\
2
\end{ytableau}%
%EndExpansion
$.

If we instead set $k=4$, then $P$ has $k$-type 21, and resolving the conflict
$\left(  k,k+1\right)  =\left(  4,5\right)  $ gives us the 12-table
$\operatorname*{res}\nolimits_{4}P=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 1 & 2 \\
%\none& 1 & 1 & 1 \\
%2 & 1 & 1 \\
%2 & 2 & 1 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 1 & 2 \\
\none& 1 & 1 & 1 \\
2 & 1 & 1 \\
2 & 2 & 1 \\
2
\end{ytableau}%
%EndExpansion
$.

We notice that each of the three 12-tables $\operatorname*{res}\nolimits_{1}%
P$, $\operatorname*{res}\nolimits_{2}P$ and $\operatorname*{res}%
\nolimits_{4}P$ still has conflicts\footnotemark, and again some of these
conflicts are resolvable. In order to get a 12-rpp from $P$, we will have to
keep resolving these conflicts until none remain.
\end{example}

\footnotetext{Actually, each of these three 12-tables has fewer conflicts than
$P$ (in particular, the conflict that was resolved is now gone). But this does
not generalize. For instance, if $P=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 1 & 1 \\
%2 & 1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 1 & 1 \\
2 & 1
\end{ytableau}%
%EndExpansion
$ and $k=1$, then resolving the conflict $\left(  k,k+1\right)  =\left(
1,2\right)  $ (which is the only conflict of $P$) leads to the 12-table
$\operatorname*{res}\nolimits_{1}P=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& 2 & 1 \\
%1 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& 2 & 1 \\
1 & 2
\end{ytableau}%
%EndExpansion
$, which has as many conflicts as $P$ did.}


We now observe some further properties of $\operatorname*{res}\nolimits_{k}P$:

\begin{proposition}
\label{prop.conflict-resolution-props}Let $P\in\mathbf{S}$ and $k\in
\mathbb{N}_{+}$ be such that $\left(  k,k+1\right)  $ is a conflict of $P$.

\textbf{(a)} The 12-table $\operatorname*{res}\nolimits_{k}P$ differs from $P$
only in columns $k$ and $k+1$. In other words,%
\begin{equation}
\left(  \text{the }h\text{-th column of }\operatorname*{res}\nolimits_{k}%
P\right)  =\left(  \text{the }h\text{-th column of }P\right)
\label{pf.lem.BK.res.loc}%
\end{equation}
for every $h\in\mathbb{N}_{+}\setminus\left\{  k,k+1\right\}  $.

\textbf{(b)} The $k$-th and the $\left(  k+1\right)  $-th columns of
$\operatorname*{res}\nolimits_{k}P$ depend only on the $k$-th and the $\left(
k+1\right)  $-th columns of $P$. In other words, if $Q$ is a further benign
12-table satisfying%
\begin{align*}
\left(  \text{the }h\text{-th column of }Q\right)   &  =\left(  \text{the
}h\text{-th column of }P\right) \\
&  \ \ \ \ \ \ \ \ \ \ \text{for each }h\in\left\{  k,k+1\right\}  ,
\end{align*}
then $\left(  k,k+1\right)  $ is a conflict of $Q$ and we have%
\begin{align}
\left(  \text{the }h\text{-th column of }\operatorname*{res}\nolimits_{k}%
Q\right)   &  =\left(  \text{the }h\text{-th column of }\operatorname*{res}%
\nolimits_{k}P\right) \label{pf.lem.BK.res.loc2}\\
&  \ \ \ \ \ \ \ \ \ \ \text{for each }h\in\left\{  k,k+1\right\}  .\nonumber
\end{align}


\textbf{(c)} We have%
\begin{equation}
\operatorname*{ceq}\left(  \operatorname*{res}\nolimits_{k}P\right)
=\operatorname*{ceq}\left(  P\right)  . \label{pf.lem.BK.res.ceq}%
\end{equation}


\textbf{(d)} We have%
\begin{align}
&  \left(  \text{the number of }h\in\mathbb{N}_{+}\text{ such that the
}h\text{-th column of }\operatorname*{res}\nolimits_{k}P\text{ is
mixed}\right) \nonumber\\
&  =\left(  \text{the number of }h\in\mathbb{N}_{+}\text{ such that the
}h\text{-th column of }P\text{ is mixed}\right)  , \label{pf.lem.BK.res.mixed}%
\end{align}%
\begin{align}
&  \left(  \text{the number of }h\in\mathbb{N}_{+}\text{ such that the
}h\text{-th column of }\operatorname*{res}\nolimits_{k}P\text{ is
1-pure}\right) \nonumber\\
&  =\left(  \text{the number of }h\in\mathbb{N}_{+}\text{ such that the
}h\text{-th column of }P\text{ is 1-pure}\right)  ,
\label{pf.lem.BK.res.1pure}%
\end{align}%
\begin{align}
&  \left(  \text{the number of }h\in\mathbb{N}_{+}\text{ such that the
}h\text{-th column of }\operatorname*{res}\nolimits_{k}P\text{ is
2-pure}\right) \nonumber\\
&  =\left(  \text{the number of }h\in\mathbb{N}_{+}\text{ such that the
}h\text{-th column of }P\text{ is 2-pure}\right)  ,
\label{pf.lem.BK.res.2pure}%
\end{align}
and%
\begin{equation}
\operatorname*{ircont}\left(  \operatorname*{res}\nolimits_{k}P\right)
=\operatorname*{ircont}\left(  P\right)  . \label{pf.lem.BK.res.irconts}%
\end{equation}


\textbf{(e)} For every $r\in\mathbb{N}_{+}$ and $i\in\mathbb{N}_{+}$
satisfying $\left(  r,i\right)  \in Z$ and $\left(  r,s_{k}\left(  i\right)
\right)  \in Z$, we have%
\begin{equation}
P\left(  r,i\right)  =\left(  \operatorname*{res}\nolimits_{k}P\right)
\left(  r,s_{k}\left(  i\right)  \right)  . \label{pf.lem.BK.res.Pli}%
\end{equation}


\textbf{(f)} If $\left(  i,j\right)  $ is a conflict of $P$ such that $\left(
i,j\right)  \neq\left(  k,k+1\right)  $, then
\begin{equation}
\left(  s_{k}\left(  i\right)  ,s_{k}\left(  j\right)  \right)  \text{ is a
conflict of }\operatorname*{res}\nolimits_{k}P.
\label{pf.lem.BK.res.conflict1}%
\end{equation}


\textbf{(g)} The benign 12-tables $\operatorname*{flip}\left(  P\right)  $ and
$\operatorname*{flip}\left(  \operatorname*{res}\nolimits_{k}P\right)  $ have
the property that%
\begin{equation}
\left(
\begin{array}
[c]{c}%
\left(  k,k+1\right)  \text{ is a conflict of }\operatorname*{flip}\left(
\operatorname*{res}\nolimits_{k}P\right)  \text{,}\\
\text{and we have }\operatorname*{flip}\left(  P\right)  =\operatorname*{res}%
\nolimits_{k}\left(  \operatorname*{flip}\left(  \operatorname*{res}%
\nolimits_{k}P\right)  \right)
\end{array}
\right)  . \label{pf.lem.BK.res.flip}%
\end{equation}


\textbf{(h)} Recall that we defined a nonnegative integer $\ell\left(
T\right)  $ for every 12-table $T$ in Subsection \ref{subsect.fourtypes}. We
have
\begin{equation}
\ell\left(  P\right)  >\ell\left(  \operatorname*{res}\nolimits_{k}P\right)  .
\label{pf.lem.BK.res.lendec}%
\end{equation}

\end{proposition}

Notice that the converse of Proposition \ref{prop.conflict-resolution-props}
\textbf{(f)} does not generally hold.

\begin{proof}
[Proof of Proposition \ref{prop.conflict-resolution-props}.]Most of
Proposition \ref{prop.conflict-resolution-props} succumbs to straightforward
arguments using the definitions of $\operatorname*{res}_{k}$ and
$\operatorname*{flip}$ coupled with a thorough case analysis, with an
occasional use of the convexity of $Z$ and of the formula
(\ref{pf.lem.BK.Tsep}). Merely the parts \textbf{(c)} and \textbf{(f)} require
a bit more thinking. We shall only give the proof for part \textbf{(c)}, since
part \textbf{(f)} will not be used in the following.

\textbf{(c)} A cell $\left(  i,j\right)  $ in $Z$ will be called \textit{good}
if the cell $\left(  i+1,j\right)  $ also belongs to $Z$. Notice that every
stagnant cell of $P$ or of $\operatorname*{res}\nolimits_{k}P$ must be good.

In order to prove (\ref{pf.lem.BK.res.ceq}), we need to show that, for every
$r\in\mathbb{N}_{+}$, the number of stagnant cells of $P$ in row $r$ equals
the number of stagnant cells of $\operatorname*{res}\nolimits_{k}P$ in row
$r$. Instead of comparing the numbers of stagnant cells, we can just as well
compare the numbers of good cells that are not stagnant (because all stagnant
cells are good, and because the total number of good cells clearly depends
only on $Z$ and not on the 12-table). So we need to show that, for every
$r\in\mathbb{N}_{+}$, the number of good cells in row $r$ that are not
stagnant cells of $P$ equals the number of good cells in row $r$ that are not
stagnant cells of $\operatorname*{res}\nolimits_{k}P$.

Fix $r\in\mathbb{N}_{+}$. The number of good cells in row $r$ that are not
stagnant cells of $P$ is precisely the number of appearances of $r+1$ in the
list $\operatorname*{seplist}P$ (because the good cells that are not stagnant
cells of $P$ are precisely the cells of the form $\left(  \operatorname*{sep}%
\nolimits_{k}P,k\right)  $, where $k$ is a positive integer such that the
$k$-th column of $P$ is mixed). Similarly, the number of good cells in row $r$
that are not stagnant cells of $\operatorname*{res}\nolimits_{k}P$ is
precisely the number of appearances of $r+1$ in the list
$\operatorname*{seplist}\left(  \operatorname*{res}\nolimits_{k}P\right)  $.
These two numbers are equal, because $\operatorname*{seplist}\left(
\operatorname*{res}\nolimits_{k}P\right)  =\operatorname*{seplist}P$. As
explained above, this completes the proof of (\ref{pf.lem.BK.res.ceq}).
\end{proof}



\subsection{The conflict-resolution relation $\Rrightarrow$}

\begin{definition}
Let us now define a binary relation $\Rrightarrow$ on the set $\mathbf{S}$ as
follows: Let $P\in\mathbf{S}$ and $Q\in\mathbf{S}$. If $k\in\mathbb{N}_{+}$,
then we write $P\underset{k}{\Rrightarrow}Q$ if and only if $\left(
k,k+1\right)  $ is a conflict of $P$ and we have $Q=\operatorname*{res}%
\nolimits_{k}P$. (In other words, if $k\in\mathbb{N}_{+}$, then we write
$P\underset{k}{\Rrightarrow}Q$ if and only if $\left(  k,k+1\right)  $ is a
conflict of $P$ and the 12-table $Q$ is obtained from $P$ by resolving this
conflict.) We write $P\Rrightarrow Q$ if and only if there exists a
$k\in\mathbb{N}_{+}$ such that $P\underset{k}{\Rrightarrow}Q$. (In other
words, we write $P\Rrightarrow Q$ if and only if the 12-table $Q$ is obtained
from $P$ by resolving a conflict of the form $\left(  k,k+1\right)  $ with
$k\in\mathbb{N}_{+}$.) Thus, the relation $\Rrightarrow$ is defined.
\end{definition}

Some of what was shown above translates into properties of this relation
$\Rrightarrow$:


\begin{lemma}
\label{lem.conflict-resolution-props}Let $P\in\mathbf{S}$ and $Q\in\mathbf{S}$
be such that $P\Rrightarrow Q$. Then:

\textbf{(a)} We have $\operatorname*{ceq}\left(  Q\right)
=\operatorname*{ceq}\left(  P\right)  $.

\textbf{(b)} We have $\operatorname*{ircont}\left(  Q\right)
=\operatorname*{ircont}\left(  P\right)  $.

\textbf{(c)} The benign 12-tables $\operatorname*{flip}\left(  P\right)  $ and
$\operatorname*{flip}\left(  Q\right)  $ have the property that
$\operatorname*{flip}\left(  Q\right)  \Rrightarrow\operatorname*{flip}\left(
P\right)  $.

\textbf{(d)} We have $\ell\left(  P\right)  >\ell\left(  Q\right)  $.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.conflict-resolution-props}.]We have $P\Rrightarrow
Q$. In other words, there exists a $k\in\mathbb{N}_{+}$ such that
$P\underset{k}{\Rrightarrow}Q$. Consider this $k$. We have
$P\underset{k}{\Rrightarrow}Q$. In other words, $\left(  k,k+1\right)  $ is a
conflict of $P$ and we have $Q=\operatorname*{res}\nolimits_{k}P$.

\textbf{(a)} We have $\operatorname*{ceq}\left(  \underbrace{Q}%
_{=\operatorname*{res}\nolimits_{k}P}\right)  =\operatorname*{ceq}\left(
\operatorname*{res}\nolimits_{k}P\right)  =\operatorname*{ceq}\left(
P\right)  $ (by (\ref{pf.lem.BK.res.ceq})). This proves Lemma
\ref{lem.conflict-resolution-props} \textbf{(a)}.

\textbf{(b)} This follows similarly from (\ref{pf.lem.BK.res.irconts}).

\textbf{(c)} From (\ref{pf.lem.BK.res.flip}), we know that $\left(
k,k+1\right)  $ is a conflict of $\operatorname*{flip}\left(
\operatorname*{res}\nolimits_{k}P\right)  $, and we have $\operatorname*{flip}%
\left(  P\right)  =\operatorname*{res}\nolimits_{k}\left(
\operatorname*{flip}\left(  \operatorname*{res}\nolimits_{k}P\right)  \right)
$. In other words, $\operatorname*{flip}\left(  \operatorname*{res}%
\nolimits_{k}P\right)  \underset{k}{\Rrightarrow}\operatorname*{flip}\left(
P\right)  $. Thus, $\operatorname*{flip}\left(  \operatorname*{res}%
\nolimits_{k}P\right)  \Rrightarrow\operatorname*{flip}\left(  P\right)  $. In
other words, $\operatorname*{flip}\left(  Q\right)  \Rrightarrow
\operatorname*{flip}\left(  P\right)  $ (since $Q=\operatorname*{res}%
\nolimits_{k}P$). This proves Lemma \ref{lem.conflict-resolution-props}
\textbf{(c)}.

\textbf{(d)} From (\ref{pf.lem.BK.res.lendec}), we have $\ell\left(  P\right)
>\ell\left(  \underbrace{\operatorname*{res}\nolimits_{k}P}_{=Q}\right)
=\ell\left(  Q\right)  $. This proves Lemma
\ref{lem.conflict-resolution-props} \textbf{(d)}.
\end{proof}


We furthermore define a relation $\overset{\ast}{\Rrightarrow}$ as in Lemma
\ref{lem.diamond}. In other words, $\overset{\ast}{\Rrightarrow}$ is the
reflexive-and-transitive closure of the relation $\Rrightarrow$. In
particular, the relation $\overset{\ast}{\Rrightarrow}$ is reflexive and
transitive, and extends the relation $\Rrightarrow$.

If $P\in\mathbf{S}$ and $Q\in\mathbf{S}$, then the relation \textquotedblleft%
$P\overset{\ast}{\Rrightarrow}Q$\textquotedblright\ can be interpreted as
\textquotedblleft$Q$ can be obtained from $P$ by repeatedly resolving
conflicts\textquotedblright\ (because $P\Rrightarrow Q$ holds if and only if
$Q$ is obtained from $P$ by resolving a resolvable conflict).

It is easy to derive from Lemma \ref{lem.conflict-resolution-props} the
following fact:

\begin{lemma}
\label{lem.conflict-resolution-*props}Let $P\in\mathbf{S}$ and $Q\in
\mathbf{S}$ be such that $P\overset{\ast}{\Rrightarrow}Q$. Then:

\textbf{(a)} We have $\operatorname*{ceq}\left(  Q\right)
=\operatorname*{ceq}\left(  P\right)  $.

\textbf{(b)} We have $\operatorname*{ircont}\left(  Q\right)
=\operatorname*{ircont}\left(  P\right)  $.

\textbf{(c)} The benign 12-tables $\operatorname*{flip}\left(  P\right)  $ and
$\operatorname*{flip}\left(  Q\right)  $ have the property that
$\operatorname*{flip}\left(  Q\right)  \overset{\ast}{\Rrightarrow
}\operatorname*{flip}\left(  P\right)  $.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.conflict-resolution-*props}.]Recalling that
$\overset{\ast}{\Rrightarrow}$ is the reflexive-and-transitive closure of the
relation $\Rrightarrow$, we see that Lemma
\ref{lem.conflict-resolution-*props} follows by induction using Lemma
\ref{lem.conflict-resolution-props}.
\end{proof}


In Subsection \ref{subsect.fourtypes}, we defined a nonnegative integer
$\ell\left(  T\right)  $ for every 12-table $T$. In particular, $\ell\left(
T\right)  $ is defined for every $T\in\mathbf{S}$. We thus have a map
$\ell:\mathbf{S}\rightarrow\mathbb{N}$ which sends every $T\in\mathbf{S}$ to
$\ell\left(  T\right)  $.

Our goal is now to apply Lemma \ref{lem.diamond} to our set $\mathbf{S}$, our
map $\ell$ and our relation $\Rrightarrow$. In order to do so, we need to
check the following fact:

\begin{proposition}
\label{prop.conflict-resolution-hyps}The local confluence hypothesis and the
length-decrease hypothesis are satisfied for our set $\mathbf{S}$, our map
$\ell$ and our relation $\Rrightarrow$. (See Lemma \ref{lem.diamond} for the
statements of these two hypotheses.)
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.conflict-resolution-hyps}.]The length-decrease
hypothesis is clearly satisfied (indeed, it is just Lemma
\ref{lem.conflict-resolution-props} \textbf{(d)}, with $P$ and $Q$ renamed as
$a$ and $b$). It thus remains only to prove that the local confluence
hypothesis is satisfied. In other words, it remains to prove that if $a$, $b$
and $c$ are three elements of $\mathbf{S}$ satisfying $a\Rrightarrow b$ and
$a\Rrightarrow c$, then there exists a $d\in\mathbf{S}$ such that
$b\overset{\ast}{\Rrightarrow}d$ and $c\overset{\ast}{\Rrightarrow}d$. Let us
rename the bound variables $a$, $b$, $c$ and $d$ as $A$, $B$, $C$ and $D$ in
this sentence. Thus, it remains to prove that if $A$, $B$ and $C$ are three
elements of $\mathbf{S}$ satisfying $A\Rrightarrow B$ and $A\Rrightarrow C$,
then there exists a $D\in\mathbf{S}$ such that $B\overset{\ast}{\Rrightarrow
}D$ and $C\overset{\ast}{\Rrightarrow}D$.

So let $A$, $B$ and $C$ be three elements of $\mathbf{S}$ satisfying
$A\Rrightarrow B$ and $A\Rrightarrow C$. We need to prove that there exists a
$D\in\mathbf{S}$ such that $B\overset{\ast}{\Rrightarrow}D$ and
$C\overset{\ast}{\Rrightarrow}D$. If $B=C$, then we can simply choose $D=B=C$
and be done with it; thus, we WLOG assume that $B\neq C$.

We have $A\Rrightarrow B$. In other words, there exists a $k\in\mathbb{N}_{+}$
such that $A\underset{k}{\Rrightarrow}B$. Let us denote this $k$ by $u$. Thus,
$A\underset{u}{\Rrightarrow}B$. In other words, $\left(  u,u+1\right)  $ is a
conflict of $A$ and we have $B=\operatorname*{res}\nolimits_{u}A$ (due to the
definition of \textquotedblleft$A\underset{u}{\Rrightarrow}B$%
\textquotedblright). Similarly, we can find a $v\in\mathbb{N}_{+}$ such that
$\left(  v,v+1\right)  $ is a conflict of $A$ and we have
$C=\operatorname*{res}\nolimits_{v}A$. Consider this $v$ as well.

We have $\operatorname*{res}\nolimits_{u}A=B\neq C=\operatorname*{res}%
\nolimits_{v}A$ and thus $u\neq v$. Hence, either $u<v$ or $u>v$. We WLOG
assume that $u<v$ (since otherwise, we can simply switch $u$ with $v$). Hence,
we are in one of the following two Cases:

\textit{Case 1:} We have $u=v-1$.

\textit{Case 2:} We have $u<v-1$.

Let us deal with Case 2 first (since it is the simpler of the two). In this
case, $u<v-1$, so that $\left\{  u,u+1\right\}  \cap\left\{  v,v+1\right\}
=\varnothing$.

Now, the operation of resolving the conflict $\left(  u,u+1\right)  $ in $A$
(that is, the passage from $A$ to $\operatorname*{res}\nolimits_{u}A$) only
affects the columns $u$ and $u+1$, and thus it preserves the conflict $\left(
v,v+1\right)  $ (since $\left\{  u,u+1\right\}  \cap\left\{  v,v+1\right\}
=\varnothing$). Hence, $\operatorname*{res}\nolimits_{v}\left(
\operatorname*{res}\nolimits_{u}A\right)  $ is well-defined. Similarly,
$\operatorname*{res}\nolimits_{u}\left(  \operatorname*{res}\nolimits_{v}%
A\right)  $ is well-defined.

Recall again that $\left\{  u,u+1\right\}  \cap\left\{  v,v+1\right\}
=\varnothing$. Thus, the operation of resolving the conflict $\left(
u,u+1\right)  $ and the operation of resolving the conflict $\left(
v,v+1\right)  $ \textquotedblleft do not interact\textquotedblright\ (in the
sense that the former only changes the columns $u$ and $u+1$, and changes them
in a way that does not depend on any of the other columns; and similarly for
the latter). Therefore, the two operations can be applied one after the other
in any order; the results will be the same. In other words,
$\operatorname*{res}\nolimits_{u}\left(  \operatorname*{res}\nolimits_{v}%
A\right)  =\operatorname*{res}\nolimits_{v}\left(  \operatorname*{res}%
\nolimits_{u}A\right)  $. Now, set $D=\operatorname*{res}\nolimits_{u}\left(
\operatorname*{res}\nolimits_{v}A\right)  =\operatorname*{res}\nolimits_{v}%
\left(  \operatorname*{res}\nolimits_{u}A\right)  $. Then,
$D=\operatorname*{res}\nolimits_{u}\underbrace{\left(  \operatorname*{res}%
\nolimits_{v}A\right)  }_{=C}=\operatorname*{res}\nolimits_{u}C$ and thus
$C\underset{u}{\Rrightarrow}D$, so that $C\Rrightarrow D$, therefore
$C\overset{\ast}{\Rrightarrow}D$. Similarly, $B\overset{\ast}{\Rrightarrow}D$.
Hence, we have found a $D\in\mathbf{S}$ such that $B\overset{\ast
}{\Rrightarrow}D$ and $C\overset{\ast}{\Rrightarrow}D$. This completes the
proof of the local confluence hypothesis in Case 2.

Now, let us consider Case 1. In this case, $u=v-1$. Hence, $\left(
v-1,v\right)  $ is a conflict of $A$ (since $\left(  u,u+1\right)  $ is a
conflict of $A$), and we have $B=\operatorname*{res}\nolimits_{u}%
A=\operatorname*{res}\nolimits_{v-1}A$ (since $u=v-1$).

The $v$-th column of $A$ must contain a $1$ (since $\left(  v-1,v\right)  $ is
a conflict of $A$) and a $2$ (since $\left(  v,v+1\right)  $ is a conflict of
$A$). Hence, the $v$-th column of $A$ is mixed. The $\left(  v-1\right)  $-th
column of $A$ is 2-pure\footnote{\textit{Proof.} Assume the contrary. Then,
the $\left(  v-1\right)  $-th column of $A$ contains a $2$ (because $\left(
v-1,v\right)  $ is a conflict of $A$) but is not 2-pure. Hence, this column is
mixed. But $A$ is benign. In other words, there exists no conflict $\left(
i,j\right)  $ of $A$ such that the $i$-th column of $A$ and the $j$-th column
of $A$ both are mixed. This flies in the face of the fact that $\left(
v-1,v\right)  $ is exactly such a conflict (since both the $\left(
v-1\right)  $-th and the $v$-th columns of $A$ are mixed). This contradiction
proves that our assumption was wrong, qed.}, and the $\left(  v+1\right)  $-th
column of $A$ is 1-pure\footnote{This follows similarly.}. We can thus
semiotically represent the 12-table $A$ as follows:%
\begin{equation}
A=%
%TCIMACRO{\TeXButton{tabular}{\begin{tabular}{ccc}
%\cline{3-3} & & \multicolumn{1}{|c|}{} \\
%\cline{2-2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{1} & \multicolumn
%{1}{|c|}{1} \\
%\multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{2-2} \multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} & \multicolumn
%{1}{|c|}{} \\
%\multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} \\
%\cline{3-3} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{2-2} \multicolumn{1}{|c|}{} \\
%\cline{1-1}
%\end{tabular}}}%
%BeginExpansion
\begin{tabular}{ccc}
\cline{3-3} & & \multicolumn{1}{|c|}{} \\
\cline{2-2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{1} & \multicolumn
{1}{|c|}{1} \\
\multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{2-2} \multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} & \multicolumn
{1}{|c|}{} \\
\multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} \\
\cline{3-3} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{2-2} \multicolumn{1}{|c|}{} \\
\cline{1-1}
\end{tabular}%
%EndExpansion
. \label{pf.prop.conflict-resolution.hyps.short.A}%
\end{equation}
In this representation, we only draw the $\left(  v-1\right)  $-th, the $v$-th
and the $\left(  v+1\right)  $-th columns (since the remaining columns are
neither used nor changed by $\operatorname*{res}\nolimits_{v-1}$ and
$\operatorname*{res}\nolimits_{v}$, and thus are irrelevant to our argument);
we use a rectangle with a \textquotedblleft$1$\textquotedblright\ inside to
signify a string of $1$'s in a column\footnote{The length of the rectangle is
immaterial; it does not say anything about the number of $1$'s.}, and we use a
rectangle with a \textquotedblleft$2$\textquotedblright\ inside to signify a
string of $2$'s in a column.

Let $s=\operatorname*{sep}\nolimits_{v}A$. Then, $\left(  s,v\right)  $ and
$\left(  s+1,v\right)  $ belong to $Z$ and satisfy $A\left(  s,v\right)  =1$
and $A\left(  s+1,v\right)  =2$ (by the definition of $\operatorname*{sep}%
\nolimits_{v}A$). Also, $\left(  s,v-1\right)  $ must belong to $Z$%
\ \ \ \ \footnote{\textit{Proof.} We know that $\left(  v-1,v\right)  $ is a
conflict of $A$. Hence, there exists an $r\in\mathbb{N}_{+}$ such that
$\left(  r,v-1\right)  \in Z$, $\left(  r,v\right)  \in Z$, $A\left(
r,v-1\right)  =2$ and $A\left(  r,v\right)  =1$. Consider this $r$. If we had
$s+1\leq r$, then we would have $A\left(  s+1,v\right)  \leq A\left(
r,v\right)  $ (since the entries of $A$ are weakly decreasing down columns),
which would contradict $A\left(  r,v\right)  =1<2=A\left(  s+1,v\right)  $.
Therefore, we cannot have $s+1\leq r$. Hence, $r<s+1$, so that $r\leq s$.
Hence, (\ref{eq.convex}) (applied to $r$, $s$, $s$, $v-1$, $v-1$ and $v$
instead of $i$, $i^{\prime}$, $i^{\prime\prime}$, $j$, $j^{\prime}$ and
$j^{\prime\prime}$) yields $\left(  s,v-1\right)  \in Z$, qed.}. Hence,
$\left(  s+1,v-1\right)  $ must belong to $Z$ as well\footnote{by
(\ref{eq.convex}) (applied to $s$, $s+1$, $s+1$, $v-1$, $v-1$ and $v$ instead
of $i$, $i^{\prime}$, $i^{\prime\prime}$, $j$, $j^{\prime}$ and $j^{\prime
\prime}$)}. Similarly, $\left(  s+1,v+1\right)  $ and $\left(  s,v+1\right)  $
belong to $Z$. Altogether, we thus know that all six squares $\left(
s,v\right)  $, $\left(  s+1,v\right)  $, $\left(  s,v-1\right)  $, $\left(
s+1,v-1\right)  $, $\left(  s+1,v+1\right)  $ and $\left(  s,v+1\right)  $
belong to $Z$. We shall denote these six squares as the \textquotedblleft core
squares\textquotedblright. The restriction of $A$ to the core squares is $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%2 & 1 & 1 \\
%2 & 2 & 1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
2 & 1 & 1 \\
2 & 2 & 1
\end{ytableau}%
%EndExpansion
$\ \ \ \ \footnote{Indeed, the two core squares in the $v$-th column have
entries $A\left(  s,v\right)  =1$ and $A\left(  s+1,v\right)  =2$; the two
core squares in the $\left(  v-1\right)  $-th column have entries $2$ (since
the $\left(  v-1\right)  $-th column of $A$ is 2-pure); and the two core
squares in the $\left(  v+1\right)  $-th column have entries $1$ (since the
$\left(  v+1\right)  $-th column of $A$ is 1-pure).}.

Now, $A$ has $\left(  v-1\right)  $-type 2M, and resolving the conflict
$\left(  v-1,v\right)  $ of $A$ yields $\operatorname*{res}\nolimits_{v-1}%
A=B$. Hence, $B$ is represented semiotically as follows:%
\[
B=%
%TCIMACRO{\TeXButton{tabular}{\begin{tabular}{ccc}
%\cline{3-3} & & \multicolumn{1}{|c|}{} \\
%\cline{2-2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn
%{1}{|c|}{1} \\
%\multicolumn{1}{|c|}{1} & \multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} \\
%\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn
%{1}{|c|}{} \\
%\multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{3-3} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{2-2} \multicolumn{1}{|c|}{} \\
%\cline{1-1}
%\end{tabular}}}%
%BeginExpansion
\begin{tabular}{ccc}
\cline{3-3} & & \multicolumn{1}{|c|}{} \\
\cline{2-2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn
{1}{|c|}{1} \\
\multicolumn{1}{|c|}{1} & \multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} \\
\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn
{1}{|c|}{} \\
\multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{3-3} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{2-2} \multicolumn{1}{|c|}{} \\
\cline{1-1}
\end{tabular}%
%EndExpansion
,
\]
and the restriction of $B$ to the core squares is $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%1 & 2 & 1 \\
%2 & 2 & 1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
1 & 2 & 1 \\
2 & 2 & 1
\end{ytableau}%
%EndExpansion
$. This shows that $\left(  v,v+1\right)  $ is a conflict of $B$, and that $B$
has $v$-type 21. Hence, resolving this conflict in $B$ yields a 12-table
$\operatorname*{res}\nolimits_{v}B$ which is represented semiotically as
follows:%
\[
\operatorname*{res}\nolimits_{v}B=%
%TCIMACRO{\TeXButton{tabular}{\begin{tabular}{ccc}
%\cline{3-3} & & \multicolumn{1}{|c|}{} \\
%\cline{2-2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn
%{1}{|c|}{2} \\
%\multicolumn{1}{|c|}{1} & \multicolumn{1}{|c|}{1} & \multicolumn{1}{|c|}{} \\
%\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn
%{1}{|c|}{} \\
%\multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{3-3} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{2-2} \multicolumn{1}{|c|}{} \\
%\cline{1-1}
%\end{tabular}}}%
%BeginExpansion
\begin{tabular}{ccc}
\cline{3-3} & & \multicolumn{1}{|c|}{} \\
\cline{2-2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn
{1}{|c|}{2} \\
\multicolumn{1}{|c|}{1} & \multicolumn{1}{|c|}{1} & \multicolumn{1}{|c|}{} \\
\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn
{1}{|c|}{} \\
\multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{3-3} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{2-2} \multicolumn{1}{|c|}{} \\
\cline{1-1}
\end{tabular}%
%EndExpansion
,
\]
and the restriction of $\operatorname*{res}\nolimits_{v}B$ to the core squares
is $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%1 & 1 & 2 \\
%2 & 1 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
1 & 1 & 2 \\
2 & 1 & 2
\end{ytableau}%
%EndExpansion
$. This, in turn, shows that $\left(  v-1,v\right)  $ is a conflict of
$\operatorname*{res}\nolimits_{v}B$, and that $\operatorname*{res}%
\nolimits_{v}B$ has $\left(  v-1\right)  $-type M1. Thus, resolving this
conflict in $\operatorname*{res}\nolimits_{v}B$ yields a 12-table
$\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  $ which is represented semiotically as follows:%
\begin{equation}
\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  =%
%TCIMACRO{\TeXButton{tabular}{\begin{tabular}{ccc}
%\cline{3-3} & & \multicolumn{1}{|c|}{} \\
%\cline{2-2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{1} & \multicolumn
%{1}{|c|}{2} \\
%\multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{2-2} \multicolumn{1}{|c|}{1} & \multicolumn{1}{|c|}{} & \multicolumn
%{1}{|c|}{} \\
%\multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} \\
%\cline{3-3} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
%\cline{2-2} \multicolumn{1}{|c|}{} \\
%\cline{1-1}
%\end{tabular}}}%
%BeginExpansion
\begin{tabular}{ccc}
\cline{3-3} & & \multicolumn{1}{|c|}{} \\
\cline{2-2} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{1-1} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{1} & \multicolumn
{1}{|c|}{2} \\
\multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{2-2} \multicolumn{1}{|c|}{1} & \multicolumn{1}{|c|}{} & \multicolumn
{1}{|c|}{} \\
\multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{2} & \multicolumn{1}{|c|}{} \\
\cline{3-3} \multicolumn{1}{|c|}{} & \multicolumn{1}{|c|}{} \\
\cline{2-2} \multicolumn{1}{|c|}{} \\
\cline{1-1}
\end{tabular}%
%EndExpansion
, \label{pf.prop.conflict-resolution.hyps.short.D}%
\end{equation}
and the restriction of $\operatorname*{res}\nolimits_{v-1}\left(
\operatorname*{res}\nolimits_{v}B\right)  $ to the core squares is $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%1 & 1 & 2 \\
%1 & 2 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
1 & 1 & 2 \\
1 & 2 & 2
\end{ytableau}%
%EndExpansion
$.

On the other hand, $A$ has $v$-type M1. Resolving the conflict $\left(
v,v+1\right)  $ of $A$ yields $\operatorname*{res}\nolimits_{v}A=C$. Thus, we
can represent $C$ semiotically and find its restriction to the core squares.
This shows us that $C$ has $\left(  v-1,v\right)  $ as a conflict and has
$\left(  v-1\right)  $-type 21. Resolving this conflict yields a 12-table
$\operatorname*{res}\nolimits_{v-1}C$ which we can again represent
semiotically and find its restriction to the core squares. Doing this, we
observe that $\operatorname*{res}\nolimits_{v-1}C$ has $\left(  v,v+1\right)
$ as a conflict and has $v$-type 2M. Resolving this conflict yields a 12-table
$\operatorname*{res}\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}%
C\right)  $ whose semiotic representation and restriction to the core squares
can again be found. We leave the details of this argument to the reader, but
we state its result: The 12-table $\operatorname*{res}\nolimits_{v}\left(
\operatorname*{res}\nolimits_{v-1}C\right)  $ is well-defined and has the same
semiotic representation and the same restriction to the core squares as the
12-table $\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}%
\nolimits_{v}B\right)  $. Consequently, the 12-tables $\operatorname*{res}%
\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}C\right)  $ and
$\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  $ are equal\footnote{\textit{Proof.} To see this, we need to show
that for every $h\in\mathbb{N}_{+}$, the $h$-th column of $\operatorname*{res}%
\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}C\right)  $ equals the
$h$-th column of $\operatorname*{res}\nolimits_{v-1}\left(
\operatorname*{res}\nolimits_{v}B\right)  $.
\par
For $h\notin\left\{  v-1,v,v+1\right\}  $, this is obvious (because for
$h\notin\left\{  v-1,v,v+1\right\}  $, the $h$-th column of a 12-table never
changes under $\operatorname*{res}\nolimits_{v}$ or $\operatorname*{res}%
\nolimits_{v-1}$).
\par
For $h=v-1$, this is again obvious (because the semiotic representation of
$\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  $ given in (\ref{pf.prop.conflict-resolution.hyps.short.D}) shows
that the $\left(  v-1\right)  $-th column of $\operatorname*{res}%
\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}B\right)  $ is 1-pure,
and the same can be said of the $\left(  v-1\right)  $-th column of
$\operatorname*{res}\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}%
C\right)  $).
\par
For $h=v+1$, this is also obvious (because the semiotic representation of
$\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  $ given in (\ref{pf.prop.conflict-resolution.hyps.short.D}) shows
that the $\left(  v+1\right)  $-th column of $\operatorname*{res}%
\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}B\right)  $ is 2-pure,
and the same can be said of the $\left(  v+1\right)  $-th column of
$\operatorname*{res}\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}%
C\right)  $).
\par
It thus only remains to deal with the case of $h=v$. In other words, we need
to prove that the $v$-th column of $\operatorname*{res}\nolimits_{v}\left(
\operatorname*{res}\nolimits_{v-1}C\right)  $ equals the $v$-th column of
$\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  $.
\par
We know from (\ref{pf.prop.conflict-resolution.hyps.short.D}) that the $v$-th
column of $\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}%
\nolimits_{v}B\right)  $ is mixed. Moreover, the restriction of
$\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  $ to the core squares is $%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%1 & 1 & 2 \\
%1 & 2 & 2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
1 & 1 & 2 \\
1 & 2 & 2
\end{ytableau}%
%EndExpansion
$; therefore, the last $1$ and the first $2$ in the $v$-th column of
$\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  $ are in the cells $\left(  s,v\right)  $ and $\left(  s+1,v\right)
$, respectively. But the same can be said about the $v$-th column of
$\operatorname*{res}\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}%
C\right)  $. Hence, the $v$-th column of $\operatorname*{res}\nolimits_{v}%
\left(  \operatorname*{res}\nolimits_{v-1}C\right)  $ and the $v$-th column of
$\operatorname*{res}\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}%
B\right)  $ both are mixed, and the cell containing the last $1$ is the same
for both of these columns. This yields that these columns must be equal. As we
know, this finishes our proof.}.

Hence, we can set $D=\operatorname*{res}\nolimits_{v}\left(
\operatorname*{res}\nolimits_{v-1}C\right)  =\operatorname*{res}%
\nolimits_{v-1}\left(  \operatorname*{res}\nolimits_{v}B\right)  $. Consider
this $D$. We have $C\Rrightarrow\operatorname*{res}\nolimits_{v-1}C$ (since
$C\underset{v-1}{\Rrightarrow}\operatorname*{res}\nolimits_{v-1}C$) and
$\operatorname*{res}\nolimits_{v-1}C\Rrightarrow\operatorname*{res}%
\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}C\right)  $ (since
$\operatorname*{res}\nolimits_{v-1}C\underset{v}{\Rrightarrow}%
\operatorname*{res}\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}%
C\right)  $). Combining these two relations, we obtain $C\overset{\ast
}{\Rrightarrow}\operatorname*{res}\nolimits_{v}\left(  \operatorname*{res}%
\nolimits_{v-1}C\right)  $ (since $\overset{\ast}{\Rrightarrow}$ is the
reflexive-and-transitive closure of the relation $\Rrightarrow$). In other
words, $C\overset{\ast}{\Rrightarrow}D$ (since $D=\operatorname*{res}%
\nolimits_{v}\left(  \operatorname*{res}\nolimits_{v-1}C\right)  $).
Similarly, $B\overset{\ast}{\Rrightarrow}D$. Thus, we have found a
$D\in\mathbf{S}$ such that $B\overset{\ast}{\Rrightarrow}D$ and
$C\overset{\ast}{\Rrightarrow}D$. This completes the proof of the local
confluence hypothesis in Case 1.

Now, the local confluence hypothesis is proven (since we have shown it in both
Cases 1 and 2), and with it, Proposition \ref{prop.conflict-resolution-hyps}.
\end{proof}


Now, let us define the notion of a \textquotedblleft final\textquotedblright%
\ element of $\mathbf{S}$ as in Lemma \ref{lem.diamond}. Then, the following
is almost obvious:

\begin{proposition}
\label{prop.finality}Let $P\in\mathbf{S}$. Then, the element $P$ of
$\mathbf{S}$ is final if and only if $P$ is a 12-rpp.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.finality}.]Let us first assume that $P$ is
final. We shall show that $P$ is a 12-rpp.

Indeed, assume the contrary. Then, $P$ is not a 12-rpp. But $P$ is an element
of $\mathbf{S}$, thus a benign 12-table. The entries of $P$ are weakly
increasing down columns (since $P$ is a 12-table). Thus, the entries of $P$
are not weakly increasing along rows (because otherwise, $P$ would be a
12-rpp). In other words, there exists an $r\in\mathbb{N}_{+}$ such that the
$r$-th row of $P$ is not weakly increasing. Consider this $r$. The $r$-th row
of $P$ is not weakly increasing; hence, there exist two adjacent entries of
this row such that the left one is larger than the right one. In other words,
there exists a $k\in\mathbb{N}_{+}$ such that $\left(  r,k\right)  \in Z$,
$\left(  r,k+1\right)  \in Z$ and $P\left(  r,k\right)  >P\left(
r,k+1\right)  $. Consider this $k$. Both $P\left(  r,k\right)  $ and $P\left(
r,k+1\right)  $ belong to $\left\{  1,2\right\}  $. Hence, from $P\left(
r,k\right)  >P\left(  r,k+1\right)  $, we obtain $P\left(  r,k\right)  =2$ and
$P\left(  r,k+1\right)  =1$. Therefore, $\left(  k,k+1\right)  $ is a conflict
of $P$ (due to the definition of a \textquotedblleft
conflict\textquotedblright). Consequently, $\operatorname*{res}\nolimits_{k}P$
is well-defined, and we have $P\underset{k}{\Rrightarrow}\operatorname*{res}%
\nolimits_{k}P$ (due to the definition of \textquotedblleft%
$P\underset{k}{\Rrightarrow}\operatorname*{res}\nolimits_{k}P$%
\textquotedblright), so that $P\Rrightarrow\operatorname*{res}\nolimits_{k}P$
(due to the definition of the relation $\Rrightarrow$).

But recall that $P$ is final. In other words, there exists no $b\in\mathbf{S}$
satisfying $P\Rrightarrow b$ (according to the definition of \textquotedblleft
final\textquotedblright). This contradicts the fact that $\operatorname*{res}%
\nolimits_{k}P$ is such a $b$ (since $P\Rrightarrow\operatorname*{res}%
\nolimits_{k}P$ and $\operatorname*{res}\nolimits_{k}P\in\mathbf{S}$). This
contradiction proves that our assumption was wrong. So we have shown that $P$
is a 12-rpp.

Now, let us forget that we assumed that $P$ is final. Thus, we have proven
that if $P$ is final, then $P$ is a 12-rpp. It remains to prove the converse.
In other words, it remains to prove that if $P$ is a 12-rpp, then $P$ is final.

So let us assume that $P$ is a 12-rpp. Let $b\in\mathbf{S}$ be such that
$P\Rrightarrow b$. Then, there exists a $k\in\mathbb{N}_{+}$ such that
$P\underset{k}{\Rrightarrow}b$ (by the definition of the relation
$\Rrightarrow$). Consider this $k$. We have $P\underset{k}{\Rrightarrow}b$. In
other words, $\left(  k,k+1\right)  $ is a conflict of $P$ and we have
$b=\operatorname*{res}\nolimits_{k}P$. But $P$ is a 12-rpp of shape $Z$, and
thus has no conflicts (since a 12-rpp of shape $Z$ is the same as a 12-table
which has no conflicts). So $\left(  k,k+1\right)  $ is a conflict of $P$, but
$P$ has no conflicts. This is a contradiction.

Now, let us forget that we fixed $b$. We thus have found a contradiction for
every $b\in\mathbf{S}$ satisfying $P\Rrightarrow b$. Hence, there exists no
$b\in\mathbf{S}$ satisfying $P\Rrightarrow b$. In other words, $P$ is final
(according to the definition of \textquotedblleft final\textquotedblright).
This completes our proof of Proposition \ref{prop.finality}.
\end{proof}


\subsection{The normalization map}

\begin{definition}
We now define a map $\operatorname*{norm}:\mathbf{S}\rightarrow\mathbf{R}$ as follows:

Let $T\in\mathbf{S}$. Proposition \ref{prop.conflict-resolution-hyps} shows
that the local confluence hypothesis and the length-decrease hypothesis are
satisfied for our set $\mathbf{S}$, our map $\ell$ and our relation
$\Rrightarrow$. Thus, Lemma \ref{lem.diamond} shows that for every
$a\in\mathbf{S}$, there exists a unique final element $b\in\mathbf{S}$ such
that $a\overset{\ast}{\Rrightarrow}b$. Applying this to $a=T$, we conclude
that there exists a unique final element $b\in\mathbf{S}$ such that
$T\overset{\ast}{\Rrightarrow}b$. Denote this $b$ by $P$. Then, $P$ is a final
element of $\mathbf{S}$ and satisfies $T\overset{\ast}{\Rrightarrow}P$. But
Proposition \ref{prop.finality} shows that $P$ is final if and only if $P$ is
a 12-rpp. Hence, $P$ is a 12-rpp (since $P$ is final). In other words,
$P\in\mathbf{R}$ (since $\mathbf{R}$ is the set of all 12-rpps). We define
$\operatorname*{norm}\left(  T\right)  $ to be $P$.

Thus, for every $T\in\mathbf{S}$, we have defined $\operatorname*{norm}\left(
T\right)  $ to be the unique final element $b\in\mathbf{S}$ such that
$T\overset{\ast}{\Rrightarrow}b$. As a consequence, for every $T\in\mathbf{S}%
$, we have
\begin{equation}
T\overset{\ast}{\Rrightarrow}\operatorname*{norm}\left(  T\right)  .
\label{pf.lem.BK.norm.=>}%
\end{equation}


Thus, the map $\operatorname*{norm}:\mathbf{S}\rightarrow\mathbf{R}$ is defined.
\end{definition}

\begin{example}
Let us give an example of a computation of $\operatorname*{norm}\left(
T\right)  $. For this example, let us take%
\[
T=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 1 \\
%\none& 1 & 1 & 2 \\
%2 & 1 & 1 \\
%2 & 2 & 1 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 1 \\
\none& 1 & 1 & 2 \\
2 & 1 & 1 \\
2 & 2 & 1 \\
2
\end{ytableau}%
%EndExpansion
.
\]
Then, $\operatorname*{norm}\left(  T\right)  $ is the unique final element
$b\in\mathbf{S}$ such that $T\overset{\ast}{\Rrightarrow}b$. Thus, we can
obtain $\operatorname*{norm}\left(  T\right)  $ from $T$ by repeatedly
resolving conflicts until no more conflicts are left (because
\textquotedblleft$T\overset{\ast}{\Rrightarrow}b$\textquotedblright\ means
\textquotedblleft$b$ can be obtained from $T$ by repeatedly resolving
conflicts\textquotedblright). The word \textquotedblleft
unique\textquotedblright\ here implies that, in whatever order we resolve
conflicts, the result will always be the same. And the procedure will
eventually come to an end because the nonnegative integer $\ell\left(
T\right)  $ decreases every time we resolve a conflict in $T$ (by Lemma
\ref{lem.conflict-resolution-props} \textbf{(d)}).

Let us first resolve the conflict $\left(  2,3\right)  $ in $T$. This gives us
the 12-table%
\[
\operatorname*{res}\nolimits_{2}T=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 1 \\
%\none& 1 & 1 & 2 \\
%2 & 1 & 1 \\
%2 & 1 & 2 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 1 \\
\none& 1 & 1 & 2 \\
2 & 1 & 1 \\
2 & 1 & 2 \\
2
\end{ytableau}%
%EndExpansion
.
\]
(In fact, we have seen this in Example \ref{exa.resolve.short} already, but we
denoted the 12-table by $P$ there.) Next, resolving the conflict $\left(
4,5\right)  $ in $\operatorname*{res}\nolimits_{2}T$, we obtain the 12-table%
\[
\operatorname*{res}\nolimits_{4}\left(  \operatorname*{res}\nolimits_{2}%
T\right)  =%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 1 & 2 \\
%\none& 1 & 1 & 1 \\
%2 & 1 & 1 \\
%2 & 1 & 2 \\
%2
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 1 & 2 \\
\none& 1 & 1 & 1 \\
2 & 1 & 1 \\
2 & 1 & 2 \\
2
\end{ytableau}%
%EndExpansion
.
\]
We go on by resolving the conflict $\left(  1,2\right)  $ in
$\operatorname*{res}\nolimits_{4}\left(  \operatorname*{res}\nolimits_{2}%
T\right)  $, and thus obtain%
\[
\operatorname*{res}\nolimits_{1}\left(  \operatorname*{res}\nolimits_{4}%
\left(  \operatorname*{res}\nolimits_{2}T\right)  \right)  =%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 1 & 2 \\
%\none& 2 & 1 & 1 \\
%1 & 2 & 1 \\
%1 & 2 & 2 \\
%1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 1 & 2 \\
\none& 2 & 1 & 1 \\
1 & 2 & 1 \\
1 & 2 & 2 \\
1
\end{ytableau}%
%EndExpansion
.
\]
Next, we resolve the conflict $\left(  2,3\right)  $ in $\operatorname*{res}%
\nolimits_{1}\left(  \operatorname*{res}\nolimits_{4}\left(
\operatorname*{res}\nolimits_{2}T\right)  \right)  $, and obtain%
\[
\operatorname*{res}\nolimits_{2}\left(  \operatorname*{res}\nolimits_{1}%
\left(  \operatorname*{res}\nolimits_{4}\left(  \operatorname*{res}%
\nolimits_{2}T\right)  \right)  \right)  =%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 2 & 1 & 2 \\
%\none& 1 & 2 & 1 \\
%1 & 1 & 2 \\
%1 & 2 & 2 \\
%1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 2 & 1 & 2 \\
\none& 1 & 2 & 1 \\
1 & 1 & 2 \\
1 & 2 & 2 \\
1
\end{ytableau}%
%EndExpansion
.
\]
Next, we resolve the conflict $\left(  3,4\right)  $ in $\operatorname*{res}%
\nolimits_{2}\left(  \operatorname*{res}\nolimits_{1}\left(
\operatorname*{res}\nolimits_{4}\left(  \operatorname*{res}\nolimits_{2}%
T\right)  \right)  \right)  $, and this leads us to%
\[
\operatorname*{res}\nolimits_{3}\left(  \operatorname*{res}\nolimits_{2}%
\left(  \operatorname*{res}\nolimits_{1}\left(  \operatorname*{res}%
\nolimits_{4}\left(  \operatorname*{res}\nolimits_{2}T\right)  \right)
\right)  \right)  =%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 2 \\
%\none& 1 & 1 & 2 \\
%1 & 1 & 1 \\
%1 & 2 & 1 \\
%1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 2 \\
\none& 1 & 1 & 2 \\
1 & 1 & 1 \\
1 & 2 & 1 \\
1
\end{ytableau}%
%EndExpansion
.
\]
Finally, we resolve the conflict $\left(  2,3\right)  $ in
$\operatorname*{res}\nolimits_{3}\left(  \operatorname*{res}\nolimits_{2}%
\left(  \operatorname*{res}\nolimits_{1}\left(  \operatorname*{res}%
\nolimits_{4}\left(  \operatorname*{res}\nolimits_{2}T\right)  \right)
\right)  \right)  $, and thus obtain%
\[
\operatorname*{res}\nolimits_{2}\left(  \operatorname*{res}\nolimits_{3}%
\left(  \operatorname*{res}\nolimits_{2}\left(  \operatorname*{res}%
\nolimits_{1}\left(  \operatorname*{res}\nolimits_{4}\left(
\operatorname*{res}\nolimits_{2}T\right)  \right)  \right)  \right)  \right)
=%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& 1 & 2 & 2 \\
%\none& 1 & 1 & 2 \\
%1 & 1 & 1 \\
%1 & 1 & 2 \\
%1
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& 1 & 2 & 2 \\
\none& 1 & 1 & 2 \\
1 & 1 & 1 \\
1 & 1 & 2 \\
1
\end{ytableau}%
%EndExpansion
.
\]
This 12-table $\operatorname*{res}\nolimits_{2}\left(  \operatorname*{res}%
\nolimits_{3}\left(  \operatorname*{res}\nolimits_{2}\left(
\operatorname*{res}\nolimits_{1}\left(  \operatorname*{res}\nolimits_{4}%
\left(  \operatorname*{res}\nolimits_{2}T\right)  \right)  \right)  \right)
\right)  $ has no more conflicts, and thus is final. So $\operatorname*{norm}%
\left(  T\right)  =\operatorname*{res}\nolimits_{2}\left(  \operatorname*{res}%
\nolimits_{3}\left(  \operatorname*{res}\nolimits_{2}\left(
\operatorname*{res}\nolimits_{1}\left(  \operatorname*{res}\nolimits_{4}%
\left(  \operatorname*{res}\nolimits_{2}T\right)  \right)  \right)  \right)
\right)  $.

Notice that we have needed six steps to compute $\operatorname*{norm}\left(
T\right)  $, although $T$ only had $4$ conflicts. So the number of conflicts
does not always decrease when we resolve a conflict. (It is easy to construct
an example where it can actually increase.) This is why we could not have used
a function $\ell:\mathbf{S}\rightarrow\mathbb{N}$ that counts the number of
conflicts to satisfy the length-decrease condition.
\end{example}


\subsection{Definition of $\mathbf{B}$}

We can now finally prove Lemma \ref{lem.BK}

\begin{definition}
Let us define a map $\mathbf{B}:\mathbf{R}\rightarrow\mathbf{R}$ as follows:

Let $T\in\mathbf{R}$. Then, $T\in\mathbf{R}\subseteq\mathbf{S}$. Hence,
$\operatorname*{flip}\left(  T\right)  \in\mathbf{S}$ is well-defined, and
thus $\operatorname*{norm}\left(  \operatorname*{flip}\left(  T\right)
\right)  \in\mathbf{R}$ is well-defined. We define $\mathbf{B}\left(
T\right)  $ to be $\operatorname*{norm}\left(  \operatorname*{flip}\left(
T\right)  \right)  $.
\end{definition}

Thus, the map $\mathbf{B}$ is defined. In order to complete the proof of Lemma
\ref{lem.BK}, we need to show that this map $\mathbf{B}$ is an involution and
that, for every $S\in\mathbf{R}$, the equalities (\ref{eq.lem.BK.ceq}) and
(\ref{eq.lem.BK.ircont}) hold. At this point, all of this is easy:

\textit{Proof that }$\mathbf{B}$ \textit{is an involution:} Let $T\in
\mathbf{R}$. The definition of $\mathbf{B}$ yields $\mathbf{B}\left(
T\right)  =\operatorname*{norm}\left(  \operatorname*{flip}\left(  T\right)
\right)  $. From (\ref{pf.lem.BK.norm.=>}) (applied to $\operatorname*{flip}%
\left(  T\right)  $ instead of $T$), we have $\operatorname*{flip}\left(
T\right)  \overset{\ast}{\Rrightarrow}\operatorname*{norm}\left(
\operatorname*{flip}\left(  T\right)  \right)  $. This rewrites as
$\operatorname*{flip}\left(  T\right)  \overset{\ast}{\Rrightarrow}%
\mathbf{B}\left(  T\right)  $ (since $\mathbf{B}\left(  T\right)
=\operatorname*{norm}\left(  \operatorname*{flip}\left(  T\right)  \right)
$). Lemma \ref{lem.conflict-resolution-*props} \textbf{(c)} (applied to
$P=\operatorname*{flip}\left(  T\right)  $ and $Q=\mathbf{B}\left(  T\right)
$) thus yields $\operatorname*{flip}\left(  \mathbf{B}\left(  T\right)
\right)  \overset{\ast}{\Rrightarrow}\operatorname*{flip}\left(
\operatorname*{flip}T\right)  $. Since $\operatorname*{flip}\left(
\operatorname*{flip}T\right)  =\underbrace{\left(  \operatorname*{flip}%
\circ\operatorname*{flip}\right)  }_{\substack{=\operatorname*{id}\\\text{(by
Proposition \ref{prop.flip} \textbf{(a)})}}}\left(  T\right)
=\operatorname*{id}\left(  T\right)  =T$, this rewrites as
$\operatorname*{flip}\left(  \mathbf{B}\left(  T\right)  \right)
\overset{\ast}{\Rrightarrow}T$.

But $T\in\mathbf{R}$. In other words, $T$ is a 12-rpp (since $\mathbf{R}$ is
the set of all 12-rpps of shape $Z$). Thus, $T$ is final (because Proposition
\ref{prop.finality} (applied to $P=T$) yields that $T$ is final if and only if
$T$ is a 12-rpp).

Now, recall that $\operatorname*{norm}\left(  T\right)  $ is the unique final
element $b\in\mathbf{S}$ such that $T\overset{\ast}{\Rrightarrow}b$ (by the
definition of $\operatorname*{norm}\left(  T\right)  $). Applying this to
$\operatorname*{flip}\left(  \mathbf{B}\left(  T\right)  \right)  $ instead of
$T$, we see that $\operatorname*{norm}\left(  \operatorname*{flip}\left(
\mathbf{B}\left(  T\right)  \right)  \right)  $ is the unique final element
$b\in\mathbf{S}$ such that $\operatorname*{flip}\left(  \mathbf{B}\left(
T\right)  \right)  \overset{\ast}{\Rrightarrow}b$. Hence, every final element
$b\in\mathbf{S}$ such that $\operatorname*{flip}\left(  \mathbf{B}\left(
T\right)  \right)  \overset{\ast}{\Rrightarrow}b$ must satisfy
$b=\operatorname*{norm}\left(  \operatorname*{flip}\left(  \mathbf{B}\left(
T\right)  \right)  \right)  $. Applying this to $b=T$, we obtain
$T=\operatorname*{norm}\left(  \operatorname*{flip}\left(  \mathbf{B}\left(
T\right)  \right)  \right)  $ (since $T$ is a final element of $\mathbf{S}$
satisfying $\operatorname*{flip}\left(  \mathbf{B}\left(  T\right)  \right)
\overset{\ast}{\Rrightarrow}T$).

But $\left(  \mathbf{B}\circ\mathbf{B}\right)  \left(  T\right)
=\mathbf{B}\left(  \mathbf{B}\left(  T\right)  \right)  =\operatorname*{norm}%
\left(  \operatorname*{flip}\left(  \mathbf{B}\left(  T\right)  \right)
\right)  $ (by the definition of $\mathbf{B}\left(  \mathbf{B}\left(
T\right)  \right)  $). Comparing this with $T=\operatorname*{norm}\left(
\operatorname*{flip}\left(  \mathbf{B}\left(  T\right)  \right)  \right)  $,
we obtain $\left(  \mathbf{B}\circ\mathbf{B}\right)  \left(  T\right)  =T$.

Let us now forget that we fixed $T$. We thus have shown that $\left(
\mathbf{B}\circ\mathbf{B}\right)  \left(  T\right)  =T$ for every
$T\in\mathbf{R}$. In other words, $\mathbf{B}\circ\mathbf{B}%
=\operatorname*{id}$. In other words, $\mathbf{B}$ is an involution.

\textit{Proof of the equality (\ref{eq.lem.BK.ceq}) for every }$S\in
\mathbf{R}$\textit{:} Let $S\in\mathbf{R}$. The definition of $\mathbf{B}$
yields $\mathbf{B}\left(  S\right)  =\operatorname*{norm}\left(
\operatorname*{flip}\left(  S\right)  \right)  $. But (\ref{pf.lem.BK.norm.=>}%
) (applied to $T=\operatorname*{flip}\left(  S\right)  $) yields
$\operatorname*{flip}\left(  S\right)  \overset{\ast}{\Rrightarrow
}\operatorname*{norm}\left(  \operatorname*{flip}\left(  S\right)  \right)  $.
This rewrites as $\operatorname*{flip}\left(  S\right)  \overset{\ast
}{\Rrightarrow}\mathbf{B}\left(  S\right)  $ (since $\mathbf{B}\left(
S\right)  =\operatorname*{norm}\left(  \operatorname*{flip}\left(  S\right)
\right)  $). Lemma \ref{lem.conflict-resolution-*props} \textbf{(a)} (applied
to $P=\operatorname*{flip}\left(  S\right)  $ and $Q=\mathbf{B}\left(
S\right)  $) thus yields
\[
\operatorname*{ceq}\left(  \mathbf{B}\left(  S\right)  \right)
=\operatorname*{ceq}\left(  \operatorname*{flip}\left(  S\right)  \right)
=\operatorname*{ceq}\left(  S\right)
\]
(by (\ref{pf.lem.BK.flip.ceq}), applied to $T=S$). This proves
(\ref{eq.lem.BK.ceq}).

\textit{Proof of the equality (\ref{eq.lem.BK.ircont}) for every }%
$S\in\mathbf{R}$\textit{:} Let $S\in\mathbf{R}$. The definition of
$\mathbf{B}$ yields $\mathbf{B}\left(  S\right)  =\operatorname*{norm}\left(
\operatorname*{flip}\left(  S\right)  \right)  $. But (\ref{pf.lem.BK.norm.=>}%
) (applied to $T=\operatorname*{flip}\left(  S\right)  $) yields
$\operatorname*{flip}\left(  S\right)  \overset{\ast}{\Rrightarrow
}\operatorname*{norm}\left(  \operatorname*{flip}\left(  S\right)  \right)  $.
This rewrites as $\operatorname*{flip}\left(  S\right)  \overset{\ast
}{\Rrightarrow}\mathbf{B}\left(  S\right)  $ (since $\mathbf{B}\left(
S\right)  =\operatorname*{norm}\left(  \operatorname*{flip}\left(  S\right)
\right)  $). Lemma \ref{lem.conflict-resolution-*props} \textbf{(b)} (applied
to $P=\operatorname*{flip}\left(  S\right)  $ and $Q=\mathbf{B}\left(
S\right)  $) thus yields
\[
\operatorname*{ircont}\left(  \mathbf{B}\left(  S\right)  \right)
=\operatorname*{ircont}\left(  \operatorname*{flip}\left(  S\right)  \right)
=s_{1}\cdot\operatorname*{ircont}\left(  S\right)
\]
(by (\ref{pf.lem.BK.flip.ircont}), applied to $T=S$). This proves
(\ref{eq.lem.BK.ircont}).

We have thus shown that $\mathbf{B}$ is an involution, and that, for every
$S\in\mathbf{R}$, the equalities (\ref{eq.lem.BK.ceq}) and
(\ref{eq.lem.BK.ircont}) hold. This completes the proof of Lemma \ref{lem.BK}.
Thus, Lemma \ref{lem.BKi} is proven (since we have proven it using Lemma
\ref{lem.BK}), and consequently Theorem \ref{thm.BK} is proven (since we have
derived it from Lemma \ref{lem.BKi}). This, in turn, finishes the proof of
Theorem \ref{thm.gtilde.symm} (since we have proven Theorem
\ref{thm.gtilde.symm} using Theorem \ref{thm.BK}).

\begin{todo}
This argument reminds me of partially commutative monoids and heaps. Maybe
they have something to do with it?
\end{todo}

\section{\label{sect.BKclassical}The classical Bender-Knuth involutions}

\subsection{Recalling the definition of $\mathbf{B}_{i}$}

We fix a skew partition $\lambda/\mu$ and a positive integer $i$ for the whole
Section \ref{sect.BKclassical}.

Theorem \ref{thm.BK} merely claims the existence of an involution
$\mathbf{B}_{i}:\operatorname*{RPP}\left(  \lambda/\mu\right)  \rightarrow
\operatorname*{RPP}\left(  \lambda/\mu\right)  $ satisfying certain
properties. Such an involution, per se, needs not be unique. However, if we
trace back the proof of Theorem \ref{thm.BK} (and the proofs of the lemmas
that were used in this proof), we notice that this proof constructs a specific
involution $\mathbf{B}_{i}$. This construction is spread across various
proofs; we can summarize it as follows:

\begin{itemize}
\item The main step of the construction was the construction of the involution
$\mathbf{B}:\mathbf{R}\rightarrow\mathbf{R}$ in Lemma \ref{lem.BK} (for a
given finite convex subset $Z$ of $\mathbb{N}_{+}^{2}$). This is an involution
which sends 12-rpps of shape $Z$ to 12-rpps of the same shape $Z$, and it was
constructed as follows: Given a 12-rpp $T$ of shape $Z$, we set $\mathbf{B}%
\left(  T\right)  =\operatorname*{norm}\left(  \operatorname*{flip}\left(
T\right)  \right)  $. (Recall that $\operatorname*{flip}\left(  T\right)  $
fills all the 1-pure columns of $T$ with $2$'s while simultaneously filling
all the 2-pure columns of $T$ with $1$'s. Recall furthermore that
$\operatorname*{norm}\left(  \operatorname*{flip}\left(  T\right)  \right)  $
is obtained from $\operatorname*{flip}\left(  T\right)  $ by repeatedly
resolving conflicts until no conflicts remain.)

\item Having constructed this map $\mathbf{B}:\mathbf{R}\rightarrow\mathbf{R}%
$, we can construct the involution $\mathbf{B}_{Z}:\mathbf{R}_{Z}%
\rightarrow\mathbf{R}_{Z}$ in Lemma \ref{lem.BKi} (for a given finite convex
subset $Z$ of $\mathbb{N}_{+}^{2}$) as follows: Given an rpp $S$ of shape $Z$
whose entries are $i$'s and $\left(  i+1\right)  $'s, we first replace these
entries by $1$'s and $2$'s (respectively), so that we obtain a 12-rpp; then,
we apply the involution $\mathbf{B}:\mathbf{R}\rightarrow\mathbf{R}$ to this
12-rpp; and then, in the resulting 12-rpp, we change the $1$'s and $2$'s back
into $i$'s and $\left(  i+1\right)  $'s. The resulting rpp is $\mathbf{B}%
_{Z}\left(  S\right)  $.

\item Finally, we can construct the involution $\mathbf{B}_{i}%
:\operatorname*{RPP}\left(  \lambda/\mu\right)  \rightarrow\operatorname*{RPP}%
\left(  \lambda/\mu\right)  $. To wit, if we are given an rpp $S\in
\operatorname*{RPP}\left(  \lambda/\mu\right)  $, then we can restrict our
attention to the cells of $S$ which contain the entries $i$ and $i+1$. These
cells form an rpp of some shape $Z$. We then apply the involution
$\mathbf{B}_{Z}$ to this new rpp, while leaving all the remaining entries of
$S$ unchanged. The result is an rpp of shape $Y\left(  \lambda/\mu\right)  $
again; this rpp is $\mathbf{B}_{i}\left(  S\right)  $.
\end{itemize}

In the following, whenever we will be talking about the involution
$\mathbf{B}_{i}$, we will always mean this particular involution
$\mathbf{B}_{i}$, rather than an arbitrary involution $\mathbf{B}_{i}$ which
satisfies the claims of Theorem \ref{thm.BK}.

\subsection{The Bender-Knuth involutions}

We claimed that our involution $\mathbf{B}_{i}:\operatorname*{RPP}\left(
\lambda/\mu\right)  \rightarrow\operatorname*{RPP}\left(  \lambda/\mu\right)
$ is a generalization of the $i$-th Bender-Knuth involution defined for
semistandard tableaux. Let us now elaborate on this claim. First, we shall
define the $i$-th Bender-Knuth involution (following \cite[proof of
Proposition 2.11]{GriRei15} and \cite[proof of Theorem 7.10.2]{Stan99}).

Let $\operatorname*{SST}\left(  \lambda/\mu\right)  $ denote the set of all
semistandard tableaux of shape $Y\left(  \lambda/\mu\right)  $. We define a
map $B_{i}:\operatorname*{SST}\left(  \lambda/\mu\right)  \rightarrow
\operatorname*{SST}\left(  \lambda/\mu\right)  $ as follows:\footnote{We refer
to Example \ref{exa.BKclassical} below for illustration.}

Let $T\in\operatorname*{SST}\left(  \lambda/\mu\right)  $. Then, $T$ is a
semistandard tableau, so that every column of $T$ contains at most one $i$ and
at most one $i+1$. We shall ignore all columns of $T$ which contain both an
$i$ and an $i+1$; that is, we mark all the entries of all such columns as
\textquotedblleft ignored\textquotedblright. Now, let $k\in\mathbb{N}_{+}$.
The $k$-th row of $T$ is a weakly increasing sequence of positive integers;
thus, it contains a (possibly empty) string of $i$'s followed by a (possibly
empty) string of $\left(  i+1\right)  $'s. These two strings together form a
substring of the $k$-th row which looks as follows:%
\[
\left(  i,i,\ldots,i,i+1,i+1,\ldots,i+1\right)
\]
\footnote{Of course, this might contain no $i$'s or no $\left(  i+1\right)
$'s.}. Some of the entries of this substring are \textquotedblleft
ignored\textquotedblright; it is easy to see that the \textquotedblleft
ignored\textquotedblright\ $i$'s are gathered at the left end of the substring
whereas the \textquotedblleft ignored\textquotedblright\ $\left(  i+1\right)
$'s are gathered end of the substring. So the substring looks as follows:%
\[
\left(  \underbrace{i,i,\ldots,i}_{\substack{a\text{ many }i\text{'s
which}\\\text{are \textquotedblleft ignored\textquotedblright}}%
},\underbrace{i,i,\ldots,i}_{\substack{r\text{ many }i\text{'s which}%
\\\text{are not \textquotedblleft ignored\textquotedblright}}%
},\underbrace{i+1,i+1,\ldots,i+1}_{\substack{s\text{ many }\left(  i+1\right)
\text{'s which}\\\text{are not \textquotedblleft ignored\textquotedblright}%
}},\underbrace{i+1,i+1,\ldots,i+1}_{\substack{b\text{ many }\left(
i+1\right)  \text{'s which}\\\text{are not \textquotedblleft
ignored\textquotedblright}}}\right)
\]
for some $a,r,s,b\in\mathbb{N}$. Now, we change this substring into%
\[
\left(  \underbrace{i,i,\ldots,i}_{\substack{a\text{ many }i\text{'s
which}\\\text{are \textquotedblleft ignored\textquotedblright}}%
},\underbrace{i,i,\ldots,i}_{\substack{s\text{ many }i\text{'s which}%
\\\text{are not \textquotedblleft ignored\textquotedblright}}%
},\underbrace{i+1,i+1,\ldots,i+1}_{\substack{r\text{ many }\left(  i+1\right)
\text{'s which}\\\text{are not \textquotedblleft ignored\textquotedblright}%
}},\underbrace{i+1,i+1,\ldots,i+1}_{\substack{b\text{ many }\left(
i+1\right)  \text{'s which}\\\text{are not \textquotedblleft
ignored\textquotedblright}}}\right)  .
\]
And we do this for every $k\in\mathbb{N}_{+}$ (simultaneously or consecutively
-- it does not matter). At the end, we have obtained a new semistandard
tableau of shape $Y\left(  \lambda/\mu\right)  $. We define $B_{i}\left(
T\right)  $ to be this new tableau.

\Needspace{25\baselineskip}

\begin{example}
\label{exa.BKclassical}Let us give an example of this construction of $B_{i}$.
Namely, let $i=2$, let $\lambda=\left(  7,6,4,1\right)  $, and let
$\mu=\left(  3\right)  $. Let $T$ be the semistandard tableau%
\[%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& 1 & 1 & 2 & 2 \\
%1 & 2 & 2 & 2 & 3 & 3 \\
%3 & 3 & 5 & 6 \\
%4
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& 1 & 1 & 2 & 2 \\
1 & 2 & 2 & 2 & 3 & 3 \\
3 & 3 & 5 & 6 \\
4
\end{ytableau}%
%EndExpansion
\]
of shape $Y\left(  \lambda/\mu\right)  $. We want to find $B_{i}\left(
T\right)  $.

The columns that contain both an $i$ and an $i+1$ (that is, both a $2$ and a
$3$) are the second and the sixth columns. So we mark all entries of these two
columns as \textquotedblleft ignored\textquotedblright. Now, the substring of
the $2$-nd row of $T$ formed by the $i$'s and the $\left(  i+1\right)  $'s
looks as follows:%
\[
\left(  \underbrace{2}_{\substack{1\text{ many }2\text{'s which}\\\text{are
\textquotedblleft ignored\textquotedblright}}},\underbrace{2,2}%
_{\substack{2\text{ many }2\text{'s which}\\\text{are not \textquotedblleft
ignored\textquotedblright}}},\underbrace{3}_{\substack{1\text{ many }3\text{'s
which}\\\text{are not \textquotedblleft ignored\textquotedblright}%
}},\underbrace{3}_{\substack{2\text{ many }3\text{'s which}\\\text{are not
\textquotedblleft ignored\textquotedblright}}}\right)  .
\]
So we change it into%
\[
\left(  \underbrace{2}_{\substack{1\text{ many }2\text{'s which}\\\text{are
\textquotedblleft ignored\textquotedblright}}},\underbrace{2}%
_{\substack{1\text{ many }2\text{'s which}\\\text{are not \textquotedblleft
ignored\textquotedblright}}},\underbrace{3,3}_{\substack{2\text{ many
}3\text{'s which}\\\text{are not \textquotedblleft ignored\textquotedblright}%
}},\underbrace{3}_{\substack{2\text{ many }3\text{'s which}\\\text{are not
\textquotedblleft ignored\textquotedblright}}}\right)  .
\]
Similarly, we change the substring $\left(  2,2\right)  $ of the $1$-st row of
$T$ into $\left(  2,3\right)  $ (because its first $2$ is \textquotedblleft
ignored\textquotedblright\ but its second $2$ is not), and we change the
substring $\left(  3,3\right)  $ of the $3$-rd row of $T$ into $\left(
2,3\right)  $ (because its first $3$ is not \textquotedblleft
ignored\textquotedblright\ but its second $3$ is). The substring of the $4$-th
row, of the $5$-th row, of the $6$-th row, etc., formed by the $i$'s and
$\left(  i+1\right)  $'s are empty (because these rows have neither $i$'s nor
$\left(  i+1\right)  $'s), and thus we do not make any changes on them. Now,
$B_{i}\left(  T\right)  $ is defined to be the tableau that results from all
of these changes; thus,%
\[
B_{i}\left(  T\right)  =%
%TCIMACRO{\TeXButton{Y}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& 1 & 1 & 2 & 3 \\
%1 & 2 & 2 & 3 & 3 & 3 \\
%2 & 3 & 5 & 6 \\
%4
%\end{ytableau}}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& 1 & 1 & 2 & 3 \\
1 & 2 & 2 & 3 & 3 & 3 \\
2 & 3 & 5 & 6 \\
4
\end{ytableau}%
%EndExpansion
.
\]

\end{example}

\begin{proposition}
\label{prop.BKclassical}The map $B_{i}:\operatorname*{SST}\left(  \lambda
/\mu\right)  \rightarrow\operatorname*{SST}\left(  \lambda/\mu\right)  $ thus
defined is an involution. It is known as the $i$\textit{-th Bender-Knuth
involution}.
\end{proposition}

Proposition \ref{prop.BKclassical} is easy to prove (and is usually proven in
less or more detail everywhere the map $B_{i}$ is defined).

Now, every semistandard tableau of shape $Y\left(  \lambda/\mu\right)  $ is
also an rpp of shape $Y\left(  \lambda/\mu\right)  $. In other words,
$\operatorname*{SST}\left(  \lambda/\mu\right)  \subseteq\operatorname*{RPP}%
\left(  \lambda/\mu\right)  $. Hence, $\mathbf{B}_{i}\left(  T\right)  $ is
defined for every $T\in\operatorname*{SST}\left(  \lambda/\mu\right)  $. Now,
the claim that we want to make (that our involution $\mathbf{B}_{i}$ is a
generalization of the $i$-th Bender-Knuth involution $B_{i}$) can be stated as follows:

\begin{proposition}
\label{prop.BK=BK}For every $T\in\operatorname*{SST}\left(  \lambda
/\mu\right)  $, we have $B_{i}\left(  T\right)  =\mathbf{B}_{i}\left(
T\right)  $.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.BK=BK} (sketched).]We shall abbreviate
\textquotedblleft semistandard tableau\textquotedblright\ as \textquotedblleft
sst\textquotedblright. We define a \textit{12-sst} to be an sst whose entries
all belong to the set $\left\{  1,2\right\}  $.

Let $Z$ be a finite convex subset of $\mathbb{N}_{+}^{2}$. Let $R$ denote the
set of all 12-ssts of shape $Z$. We define a map $B:R\rightarrow R$ in the
same way as we defined the map $B_{i}:\operatorname*{SST}\left(  \lambda
/\mu\right)  \rightarrow\operatorname*{SST}\left(  \lambda/\mu\right)  $, with
the only differences that we replace every appearance of \textquotedblleft%
$\operatorname*{SST}\left(  \lambda/\mu\right)  $\textquotedblright, of
\textquotedblleft$i$\textquotedblright\ and of \textquotedblleft%
$i+1$\textquotedblright\ by \textquotedblleft$R$\textquotedblright,
\textquotedblleft$1$\textquotedblright\ and \textquotedblleft$2$%
\textquotedblright, respectively. Then, this map $B:R\rightarrow R$ is an involution.

Now let us forget that we fixed $Z$. We thus have constructed a map
$B:R\rightarrow R$ for every finite convex subset $Z$ of $\mathbb{N}_{+}^{2}$.
Now, recall how the map $\mathbf{B}_{i}:\operatorname*{RPP}\left(  \lambda
/\mu\right)  \rightarrow\operatorname*{RPP}\left(  \lambda/\mu\right)  $ was
constructed from the maps $\mathbf{B}:\mathbf{R}\rightarrow\mathbf{R}$ for
every finite convex subset $Z$ of $\mathbb{N}_{+}^{2}$ (essentially by
forgetting all entries of an rpp except for the entries $i$ and $i+1$ and
relabelling these entries $i$ and $i+1$ as $1$ and $2$). Similarly, the map
$B_{i}:\operatorname*{SST}\left(  \lambda/\mu\right)  \rightarrow
\operatorname*{SST}\left(  \lambda/\mu\right)  $ can be constructed from the
maps $B:R\rightarrow R$ for every finite convex subset $Z$ of $\mathbb{N}%
_{+}^{2}$ (essentially by forgetting all entries of an sst except for the
entries $i$ and $i+1$ and relabelling these entries $i$ and $i+1$ as $1$ and
$2$). Thus, in order to prove that $B_{i}\left(  T\right)  =\mathbf{B}%
_{i}\left(  T\right)  $ for every $T\in\operatorname*{SST}\left(  \lambda
/\mu\right)  $, it suffices to show that $B\left(  T\right)  =\mathbf{B}%
\left(  T\right)  $ for every finite convex subset $Z$ of $\mathbb{N}_{+}^{2}$
and any 12-sst $T$ of shape $Z$.

\begin{todo}
Is this readable?
\end{todo}

So let $Z$ be any finite convex subset of $\mathbb{N}_{+}^{2}$, and let $T$ be
a 12-sst of shape $Z$. We need to prove that $B\left(  T\right)
=\mathbf{B}\left(  T\right)  $.

\begin{example}
Here is an example of a 12-sst:%
\begin{equation}
T=%
%TCIMACRO{\TeXButton{ytableau}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& \none& \none& \none& \none& \none& 1 \\
%\none& \none& \none& \none& \none& 1 & 1 & 2 \\
%\none& \none& \none& 1 & 2 & 2 & 2 \\
%1 & 2 \\
%2
%\end{ytableau}
%}}%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& \none& \none& \none& \none& \none& 1 \\
\none& \none& \none& \none& \none& 1 & 1 & 2 \\
\none& \none& \none& 1 & 2 & 2 & 2 \\
1 & 2 \\
2
\end{ytableau}
%EndExpansion
. \label{pf.prop.BK=BK.exampleT}%
\end{equation}
It satisfies%
\begin{equation}
B\left(  T\right)  =%
%TCIMACRO{\TeXButton{ytableau}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& \none& \none& \none& \none& \none& 1 \\
%\none& \none& \none& \none& \none& 1 & 2 & 2 \\
%\none& \none& \none& 1 & 1 & 2 & 2 \\
%1 & 1 \\
%2
%\end{ytableau}} }%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& \none& \none& \none& \none& \none& 1 \\
\none& \none& \none& \none& \none& 1 & 2 & 2 \\
\none& \none& \none& 1 & 1 & 2 & 2 \\
1 & 1 \\
2
\end{ytableau}
%EndExpansion
\label{pf.prop.BK=BK.exampleBT}%
\end{equation}
and%
\begin{equation}
\operatorname*{flip}\left(  T\right)  =%
%TCIMACRO{\TeXButton{ytableau}{\ytableausetup{notabloids}
%\begin{ytableau}
%\none& \none& \none& \none& \none& \none& \none& \none& 1 \\
%\none& \none& \none& \none& \none& 1 & 2 & 2 \\
%\none& \none& \none& 2 & 1 & 1 & 2 \\
%1 & 1 \\
%2
%\end{ytableau}} }%
%BeginExpansion
\ytableausetup{notabloids}
\begin{ytableau}
\none& \none& \none& \none& \none& \none& \none& \none& 1 \\
\none& \none& \none& \none& \none& 1 & 2 & 2 \\
\none& \none& \none& 2 & 1 & 1 & 2 \\
1 & 1 \\
2
\end{ytableau}
%EndExpansion
\label{pf.prop.BK=BK.exampleflipT}%
\end{equation}
(where $\operatorname*{flip}\left(  T\right)  $ is defined as in the
construction of $\mathbf{B}\left(  T\right)  $).
\end{example}

We make a few basic observations: The columns which are ignored in the
construction of $B\left(  T\right)  $ are the columns which contain both a $1$
and a $2$.\ \ \ \ \footnote{For instance, in the 12-sst
(\ref{pf.prop.BK=BK.exampleT}), the ignored columns are the $1$-st, the $7$-th
and the $9$-th columns.} These columns contain exactly two entries each
(because a column of a 12-sst can only contain at most one $1$, at most one
$2$ and no other entries), while every other column is either empty or
contains only one entry. As a consequence, every entry of $T$ which is not
\textquotedblleft ignored\textquotedblright\ in the construction of $B\left(
T\right)  $ is alone in its column.

Let us compare the basic ideas of the constructions of $B\left(  T\right)  $
and $\mathbf{B}\left(  T\right)  $:

\begin{itemize}
\item To construct $B\left(  T\right)  $, we ignore all columns of $T$ which
contain both a $1$ and a $2$; that is, we mark all entries in these columns as
\textquotedblleft ignored\textquotedblright. Then, in every row, we let $r$ be
the number of $1$'s which are not \textquotedblleft ignored\textquotedblright,
and let $s$ be the number of $2$'s which are not \textquotedblleft
ignored\textquotedblright. We replace these $r$ many $1$'s and $s$ many $2$'s
by $s$ many $1$'s and $r$ many $2$'s. This we do for every row; the resulting
12-sst is $B\left(  T\right)  $.

\item To construct $\mathbf{B}\left(  T\right)  $, we consider $T$ as a
12-rpp, and we identify which of its columns are 1-pure, which are 2-pure and
which are mixed. Then, we replace all entries of all 1-pure columns by $1$'s,
while simultaneously replacing all entries of all 2-pure columns by $2$'s. The
resulting 12-table is denoted $\operatorname*{flip}\left(  T\right)  $. Then,
we repeatedly resolve conflicts in $\operatorname*{flip}\left(  T\right)  $
until no more conflicts remain. The resulting 12-table $\operatorname*{norm}%
\left(  \operatorname*{flip}\left(  T\right)  \right)  $ is a 12-rpp, and is
denoted $\mathbf{B}\left(  T\right)  $.
\end{itemize}

If we compare the two constructions just described, we first notice that the
columns ignored in the construction of $B\left(  T\right)  $ are precisely the
mixed columns of $T$. Thus, the 12-table $\operatorname*{flip}\left(
T\right)  $ can be obtained from $T$ by replacing all $1$'s which are not
\textquotedblleft ignored\textquotedblright\ by $2$'s while simultaneously
replacing all $2$'s which are not \textquotedblleft ignored\textquotedblright%
\ by $1$'s. Thus, for any given $r\in\mathbb{N}_{+}$, if the $r$-th row of $T$
contains $r$ many $1$'s which are not \textquotedblleft
ignored\textquotedblright\ and $s$ many $2$'s which are not \textquotedblleft
ignored\textquotedblright, then the $r$-th row of $\operatorname*{flip}\left(
T\right)  $ contains $r$ many $2$'s which are not \textquotedblleft
ignored\textquotedblright\ and $s$ many $1$'s which are not \textquotedblleft
ignored\textquotedblright\ (while the \textquotedblleft
ignored\textquotedblright\ entries in $T$ appear in $\operatorname*{flip}%
\left(  T\right)  $ unchanged). So we can restate the construction of
$\operatorname*{flip}\left(  T\right)  $ as follows:

\begin{itemize}
\item To construct $\operatorname*{flip}\left(  T\right)  $ from $T$, do the
following: In every row of $T$, let $r$ be the number of $1$'s which are not
\textquotedblleft ignored\textquotedblright, and let $s$ be the number of
$2$'s which are not \textquotedblleft ignored\textquotedblright. We replace
these $r$ many $1$'s and $s$ many $2$'s by $r$ many $2$'s and $s$ many $1$'s
(in this order). This we do for every row; the resulting 12-table is
$\operatorname*{flip}\left(  T\right)  $.
\end{itemize}

Compare this to our construction of $B\left(  T\right)  $:

\begin{itemize}
\item To construct $B\left(  T\right)  $ from $T$, do the following: In every
row of $T$, let $r$ be the number of $1$'s which are not \textquotedblleft
ignored\textquotedblright, and let $s$ be the number of $2$'s which are not
\textquotedblleft ignored\textquotedblright. We replace these $r$ many $1$'s
and $s$ many $2$'s by $s$ many $1$'s and $r$ many $2$'s (in this order). This
we do for every row; the resulting 12-sst is $B\left(  T\right)  $.
\end{itemize}

Comparing these two constructions makes it clear that each row of $B\left(
T\right)  $ differs from the corresponding row of $\operatorname*{flip}\left(
T\right)  $ merely in the order in which the non-\textquotedblleft
ignored\textquotedblright\ entries appear: In $B\left(  T\right)  $, the
non-\textquotedblleft ignored\textquotedblright\ $1$'s appear before the
non-\textquotedblleft ignored\textquotedblright\ $2$'s (as they must,
$B\left(  T\right)  $ being an sst), whereas in $\operatorname*{flip}\left(
T\right)  $ they appear in the opposite order. Hence, $B\left(  T\right)  $
can be obtained from $\operatorname*{flip}\left(  T\right)  $ by sorting all
non-\textquotedblleft ignored\textquotedblright\ entries into increasing order
in each row.

Now, let us notice that every pair of a non-\textquotedblleft
ignored\textquotedblright\ $2$ and a non-\textquotedblleft
ignored\textquotedblright\ $1$ lying in the same row of $\operatorname*{flip}%
\left(  T\right)  $ cause a conflict\footnote{More precisely: If
$r\in\mathbb{N}_{+}$, $i\in\mathbb{N}_{+}$ and $j\in\mathbb{N}_{+}$ are such
that $\left(  \operatorname*{flip}T\right)  \left(  r,i\right)  $ is a
non-\textquotedblleft ignored\textquotedblright\ $2$ and that $\left(
\operatorname*{flip}T\right)  \left(  r,j\right)  $ is a non-\textquotedblleft
ignored\textquotedblright\ $1$, then $\left(  i,j\right)  $ is a conflict of
$\operatorname*{flip}T$.}. Conversely, all conflicts of $\operatorname*{flip}%
\left(  T\right)  $ are caused by a non-\textquotedblleft
ignored\textquotedblright\ $2$ and a non-\textquotedblleft
ignored\textquotedblright\ $1$ lying in the same row (because all
\textquotedblleft ignored\textquotedblright\ entries are carried over from $T$
without change and thus cannot take part in conflicts). We can resolve these
conflicts one after the other (starting with the $2$ and the $1$ that are
adjacent to each other), until none are left. The result is a 12-rpp. What is
this 12-rpp?

\begin{itemize}
\item On the one hand, this 12-rpp is $\operatorname*{norm}\left(
\operatorname*{flip}\left(  T\right)  \right)  $, because
$\operatorname*{norm}\left(  \operatorname*{flip}\left(  T\right)  \right)  $
is defined as what results when all conflicts of $\operatorname*{flip}\left(
T\right)  $ are resolved.

\item On the other hand, this 12-rpp is $B\left(  T\right)  $. In fact,
resolving a conflict caused by a non-\textquotedblleft
ignored\textquotedblright\ $2$ and a non-\textquotedblleft
ignored\textquotedblright\ $1$ lying in the same row results in this $2$
getting switched with the $1$ (while no other entries get moved\footnote{This
is because every non-\textquotedblleft ignored\textquotedblright\ entry is
alone in its column.}). Hence, when we resolve the conflicts, we just sort all
non-\textquotedblleft ignored\textquotedblright\ entries into increasing order
in each row. But as we know, the 12-table obtained from $\operatorname*{flip}%
\left(  T\right)  $ by sorting all non-\textquotedblleft
ignored\textquotedblright\ entries into increasing order in each row is
$B\left(  T\right)  $.
\end{itemize}

So we have found a 12-rpp which equals both $\operatorname*{norm}\left(
\operatorname*{flip}\left(  T\right)  \right)  $ and $B\left(  T\right)  $.
Thus, $B\left(  T\right)  =\operatorname*{norm}\left(  \operatorname*{flip}%
\left(  T\right)  \right)  =\mathbf{B}\left(  T\right)  $. This completes our
proof of Proposition \ref{prop.BK=BK}.
\end{proof}

\begin{todo}
Can you follow the above argument? (Preferrably at 3AM and/or under the
influence.)
\end{todo}



\section{The structure of 12-rpps}
\label{sect.structure}
\def\seplist{{\operatorname*{seplist}}} % what would be a good notation here? same question for the below:
\def\ceq{{\operatorname*{ceq}}}
\def\ircont{{\operatorname*{ircont}}}
\def\ceqvar{{{\alpha}}} %??
\def\seplistvar{{{\nu}}} % ???
\def\supp{{\operatorname*{supp}}}
\def\NS{{\operatorname*{NS}}}
\def\g{{\widetilde{g}}}
\def\t{{\mathbf{t}}}
\def\lm{{\lambda/\mu}}
\def\lmp{{(\lambda/\mu)}}
\def\N{{\mathbb{N}}}
\def\Z{\mathbb{Z}}
\def\xx{{\mathbf{x}}}

\def\OneTwoRPP{{\operatorname*{RPP}^{12}\left(  \lambda/\mu\right)}}
\def\OneTwoRPPCutvar{{\operatorname*{RPP}^{12}\left(  \lambda/\mu ;\seplistvar \right)}}
\def\flip{{\operatorname*{flip}}}

In this section, we let $\kk$ be the polynomial ring
$\Z\left[t_1, t_2, t_3, \ldots\right]$ in countably many
indeterminates, and we restrict ourselves to the
two-variable dual stable Grothendieck polynomial
$\g_\lm(x_1,x_2,0,0,\dots;\t)$ defined as the result of
substituting $0, 0, 0, \ldots$ for $x_3, x_4, x_5, \ldots$
in $\g_\lm$. We can represent it as a polynomial in
$\t$ with coefficients in $\Z[x_1,x_2]$:
$$\g_\lm(x_1,x_2,0,0,\dots;\t)=\sum_{\ceqvar\in \N^{\N_+}}\t^\ceqvar Q_\ceqvar(x_1,x_2),$$
where the sum ranges over all weak compositions $\alpha$,
and all but finitely many $Q_\ceqvar(x_1,x_2)$ are $0$.
(The $Q_\ceqvar(x_1,x_2)$ here belong to $\Z[x_1, x_2]$.)

We shall show that each $Q_\ceqvar(x_1,x_2)$ is either zero or has the form
$$Q_\ceqvar(x_1,x_2)=(x_1x_2)^{M} P_{n_0}(x_1,x_2)P_{n_1}(x_1,x_2)\cdots P_{n_r}(x_1,x_2) ,$$
where $M,r$ and $n_0,n_1,\dots,n_{r}$ are nonnegative integers naturally associated to $\ceqvar$ and $\lm$ and 
$$P_n(x_1,x_2)=(x_1^{n+1}-x_2^{n+1})/(x_1-x_2)=x_1^{n}+x_1^{n-1}x_2+\dots+x_1x_2^{n-1}+x_2^n.$$
We fix the skew partition $\lm$ throughout the whole section.
Abusing notation, we shall abbreviate $Y\left(\lm\right)$ as $\lm$.
We will have a running example with $\lambda=(7,7,7,4,4)$ and $\mu=(5,3,2)$.


\subsection{Irreducible components}
We recall that a \textit{12-rpp} means an rpp whose entries all belong to the set $\left\{1, 2\right\}$. 

Given a 12-rpp $T$, consider the set $\NS(T)$ of all cells $(i,j)\in \lm$ such that $T(i,j)=1$ but $(i+1,j) \in \lm$ and $T(i+1,j)=2$. (In other words, $\NS(T)$ is the set of all non-stagnant cells in $T$ which are filled with a $1$ and which are not the lowest cells in their columns.)
Clearly, $\NS(T)$ contains at most one cell from each column; thus, let us write $\NS(T)=\{(i_1,j_1),(i_2,j_2),\dots,(i_s,j_s)\}$ with $j_1<j_2<\dots<j_s$. Because $T$ is a 12-rpp, it follows that the numbers $i_1,i_2,\dots,i_s$ decrease weakly, therefore they form a partition which we called \textit{the seplist-partition of} $T$ and denoted 
$$\seplist(T):=(i_1,i_2,\dots,i_s)$$ 
in Section \ref{subsection:benign}.
An example of calculation of $\seplist(T)$ and $\NS(T)$ is illustrated on Figure \ref{fig:seplist}. 

\def\one{{\mathbf{1}}}
\def\two{{\mathbf{2}}}

\begin{figure}
\begin{tabular}{c|c}
 & \\
\begin{ytableau}
\none& \none& \none&\none&\none & 1   & 2 \\
\none& \none& \none& 1   & 1    &\one & 2 \\
\none& \none& \one &\one & 1    & 2   & 2 \\
\one &    2 & 2    & 2 \\
2    &    2 & 2    & 2
\end{ytableau}\ \  &
\begin{ytableau}
\none& \none& \none&\none&\none & 1   & 1    \\
\none& \none& \none& 1   & 1    & 1   & \one \\
\none& \none& \one &\one & 1    & 1   & 2    \\
1    & \one & 2    & 2 \\
2    &    2 & 2    & 2
\end{ytableau}\\
 & \\
$\NS(T_1)=\{(4,1),(3,3),(3,4),(2,6)\}$ & $\NS(T_2)=\{(4,2),(3,3),(3,4),(2,7)\}$ \\
$\seplist(T_1)=(4,3,3,2)$ & $\seplist(T_2)=(4,3,3,2)$ 
\end{tabular}\\
\caption{\label{fig:seplist} Two 12-rpps of the same shape and with the same seplist-partition.}
\end{figure}



We would like to answer the following question: for which partitions $\seplistvar=(i_1\geq \dots\geq i_s>0)$ does there exist a 12-rpp $T$ of shape $\lm$ such that $\seplist(T)=\seplistvar$?

A trivial necessary condition for this to happen is that there should exist some numbers $j_1<j_2<\dots<j_s$ such that 
\begin{equation}\label{cond:necessary}
(i_1,j_1),(i_1+1,j_1),(i_2,j_2),(i_2+1,j_2),\dots,(i_s,j_s),(i_s+1,j_s)\in \lm. 
\end{equation}
We say that a partition $\seplistvar$ is \textit{admissible} if such $j_1<j_2<\dots<j_s$ exist.

Until the end of Section \ref{sect.structure}, we make one further
assumption: namely, that the skew partition $\lm$ is
connected\footnote{By this, we mean that $\lm$ has at least one
cell, and cannot be represented
as a disjoint union of two nonempty skew partitions $\alpha/\beta$
and $\gamma/\delta$ such that no cell of $\alpha/\beta$ is adjacent
to any cell of $\gamma/\delta$. This is a harmless assumption,
since every skew partition $\lm$ can be written as a disjoint union
of such connected skew partitions, and these ``connected
components'' do not interact when it comes to studying rpps:
Choosing a 12-rpp of shape $\lm$ is tantamount to choosing
a 12-rpp for each of these components; and choosing a 12-rpp of
shape $\lm$ with seplist-partition equal to a given partition
$\seplistvar$ is tantamount to choosing a 12-rpp for each of the
components with seplist-partition equal to the ``appropriate piece''
of $\seplistvar$. (What an ``appropriate piece'' is should be
clear enough, since two distinct connected components are supported
on different rows.)}.

\newcommand{\nuxy}[2]{\seplistvar\big|_{\subseteq[#1,#2)}}
\newcommand{\nuxycap}[2]{\seplistvar\big|_{\cap[#1,#2)}}
\newcommand{\nupxy}[2]{\seplistvar^{\prime}\big|_{\subseteq[#1,#2)}}

\def\nuab{\nuxy{a}{b}}
\def\nuabcap{\nuxycap{a}{b}}



For each integer $i$ the set of all integers $j$ such that $(i,j),(i+1,j)\in\lm$ is just an interval $[\mu_{i}+1,\lambda_{i+1}]$, which we call \textit{the support of $i$} and denote $\supp(i):=[\mu_{i}+1,\lambda_{i+1}]$.

Assume that $\seplistvar = \left(i_1 \geq \cdots \geq i_s > 0\right)$ is an admissible partition. Then, $\supp(i_k)$ is nonempty for each $k$. For two integers $a< b$, by $\nuab$ we denote the subpartition $(i_r,i_{r+1},\dots,i_{r+q})$ of $\seplistvar$ such that for $r\leq k\leq r+q$ we have $\supp(i_k)\subseteq [a,b)$. In this case, we put $\#\nuab:=q+1$ which is just the number of entries in $\nuab$. Similarly, we put $\nuabcap$ to be the subpartition $(i_r,i_{r+1},\dots,i_{r+q})$ of $\seplistvar$ such that for $r\leq k\leq r+q$ we have $\supp(i_k)\cap [a,b)\neq\emptyset$.
For example, for $\seplistvar=(4,3,3,2)$ and $\lm$ as on Figure \ref{fig:seplist}, we have 
$$\supp(3)=[3,4],\ \supp(2)=[4,7],\ \supp(4)=[1,4],$$ 
$$\nuxy{2}{7}=(3,3),\ \nuxy{2}{8}=(3,3,2),\ \nuxy{4}{8}=(2),\ \nuxycap{4}{5}=(4,3,3,2),\ \#\nuxy{2}{7}=2.$$

We introduce several definitions: An admissible partition $\seplistvar=(i_1\geq \dots\geq i_s>0)$ is called

\begin{tabular}{@{$\bullet$ }lll}
 \textit{non-representable} & if for some $a<b$ we have & $\#\nuab>b-a$;\\
 \textit{representable}& if for all $a<b$ we have& $\#\nuab\leq b-a$;\\
\end{tabular}

a representable partition $\seplistvar$ is called

\begin{tabular}{@{$\bullet$ }lll} 
 \textit{irreducible}& if for all  $a<b$ we have &$\#\nuab < b-a$;\\
 \textit{reducible} &if for some $a<b$ we have &$\#\nuab=b-a$.
\end{tabular}

For example, $\seplistvar=(4,3,3,2)$ is representable but reducible because we have $\nuxy{3}{5}=(3,3)$ so $\#\nuxy{3}{5}=2=5-3$.

Note that these notions depend on the skew partition; thus, when we want to use a skew partition $\widetilde\lm$ rather than $\lm$, we will write that $\seplistvar$ is non-representable/irreducible/etc. \textit{with respect to $\widetilde\lm$}, and we denote the corresponding partitions by $\nuab^{\widetilde{\lm}}$.

These definitions can be motivated as follows. Suppose that a partition $\seplistvar$ is non-representable, so there exist integers $a<b$ such that $\#\nuab>b-a$. Recall that $\nuab=:(i_r,i_{r+1},\dots,i_{r+q})$ contains all entries of $\seplistvar$ whose support is a subset of $[a,b)$. Thus in order for condition (\ref{cond:necessary}) to be true there must exist some integers $j_r<j_{r+1}<\dots<j_{r+q}$ such that 
$$(i_r, j_r),(i_r+1, j_r),\dots,(i_{r+q},j_{r+q}),(i_{r+q}+1,j_{r+q})\in\lm.$$
On the other hand, by the definition of the support, we must have $j_k\in \supp(i_k)\subseteq [a,b)$ for all $r\leq k\leq r+q$. Therefore we get $q+1$ distinct elements of $[a,b)$ which is impossible if $q+1=\#\nuab>b-a$. It means that a non-representable partition $\seplistvar$ is never a seplist-partition of a 12-rpp $T$. 

Suppose now that a partition $\seplistvar$ is reducible, so for some $a<b$ we get an equality $\#\nuab=b-a$. Then these integers $j_r<\dots<j_{r+q}$ should still all belong to $[a,b)$ and there are exactly $b-a$ of them, hence 
\begin{equation}
j_r=a,\ j_{r+1}=a+1,\ \dots,\ j_{r+q}=a+q=b-1 .
\label{eq.reducible.mixblock-j}
\end{equation}
Because $\supp(i_r)\subseteq[a,b)$ but $\supp(i_r)\neq\varnothing$ (since $\nu$ is admissible), we have $(i_r,a-1)\notin\lm$. Thus, placing a $1$ into $(i_r,a)$ and $2$'s into $(i_r+1,a),(i_r+2,a),\dots$ does not put any restrictions on entries in columns $1,\dots, a-1$. And the same is true for columns $b,b+1,\dots$ when we place a $2$ into $(i_{r+q}+1,b-1)$ and $1$'s into all cells above. Thus, if a partition $\seplistvar$ is reducible, then the filling of columns $a,a+1,\dots, b-1$ is uniquely determined (by (\ref{eq.reducible.mixblock-j})), and the filling of the rest can be arbitrary -- the problem of existence of a 12-rpp $T$ such that $\seplist(T)=\seplistvar$ reduces to two smaller independent problems of the same kind (one for the columns $1,2,\ldots,a-1$, the other for the columns\footnote{Recall that a 12-rpp of shape $\lm$ cannot have any nonempty column beyond the $\lambda_1$'th one.} $b,b+1,\ldots,\lambda_1$). One can continue this reduction process and end up with several independent irreducible components separated from each other by mixed columns. An illustration of this phenomenon can be seen on Figure \ref{fig:seplist}: the columns $3$ and $4$ must be mixed for any 12-rpps $T$ with $\seplist(T)=(4,3,3,2)$.

More explicitly, we have thus shown that every interval $\left[a,b\right) \subseteq \left[1, \lambda_1+1\right)$ satisfying $\#\nuab = b-a$ splits our problem into two independent subproblems. But if two such intervals $\left[a,b\right)$ and $\left[c,d\right)$ intersect, then their union is another such interval\footnote{\textit{Proof.} Assume that two intervals $\left[a,b\right)$ and $\left[c,d\right)$ satisfying $\#\nuab = b-a$ and $\#\nuxy{c}{d} = d-c$ intersect. We need to show that their union is another such interval.
\par We WLOG assume that $a \leq c$. Then, $c \leq b$ (since the intervals intersect). If $b > d$, then the union of the two intervals is simply $\left[a,b\right)$, which makes our claim obvious. Hence, we WLOG assume that $b \leq d$. Thus, $a \leq c \leq b \leq d$. The union of the two intervals is therefore $\left[a, d\right)$, and we must show that $\#\nuxy{a}{d} = d-a$.
A set of positive integers is a subset of both $\left[a, b\right)$ and $\left[c, d\right)$ if and only if it is a subset of $\left[c, b\right)$. On the other hand, a set of positive integers that is a subset of either $\left[a, b\right)$ or $\left[c, d\right)$ must be a subset of $\left[a, d\right)$ (but not conversely). Combining these two observations, we obtain $\#\nuxy{a}{d} \geq \#\nuab + \#\nuxy{c}{d} - \#\nuxy{c}{b}$. Since $\seplistvar$ is representable (or, when $b=c$, for obvious reasons), we have $\#\nuxy{c}{b} \leq b-c$. Thus,
\[
\#\nuxy{a}{d} \geq \underbrace{\#\nuab}_{=b-a} + \underbrace{\#\nuxy{c}{d}}_{=d-c} - \underbrace{\#\nuxy{c}{b}}_{\leq b-c} \geq \left(b-a\right) + \left(d-c\right) - \left(b-c\right) = d-a.
\]
Combined with $\#\nuxy{a}{d} \leq d-a$ (since $\seplistvar$ is representable), this yields $\#\nuxy{a}{d} = d-a$, qed.}. Hence, the maximal (with respect to inclusion) among all such intervals are pairwise disjoint and separated from each other by at least a distance of $1$.
This yields part \textbf{(a)} of the following lemma:
\begin{lemma}
\label{lemma:irreducible}
 Let $\seplistvar$ be a representable partition.

\textbf{(a)} There exist unique integers $(1=b_0\leq a_1<b_1<a_2<b_2<\dots<a_r<b_r\leq a_{r+1}=\lambda_1+1)$ satisfying the following two conditions:
 \begin{enumerate}
  \item For all $1\leq k\leq r$, we have $\#\nuxy{a_k}{b_k} =b_k-a_k$.
  \item The set $\bigcup_{k=0}^{r}[b_k,a_{k+1})$ is minimal (with respect to inclusion) among all sequences $(1=b_0\leq a_1<b_1<a_2<b_2<\dots<a_r<b_r\leq a_{r+1}=\lambda_1+1)$ satisfying property 1.
 \end{enumerate}

Furthermore, for these integers, we have:

\textbf{(b)} The partition $\nu$ is the concatenation
\[
\left(\nuxycap{b_0}{a_1}\right) \left(\nuxy{a_1}{b_1}\right) \left(\nuxycap{b_1}{a_2}\right) \left(\nuxy{a_2}{b_2}\right) \cdots \left(\nuxycap{b_r}{a_{r+1}}\right)
\]
(where we regard a partition as a sequence of positive integers, with no trailing zeroes).

\textbf{(c)} The partitions $\nuxycap{b_k}{a_{k+1}}$ are irreducible with respect to $\lm\big|_{[b_k,a_{k+1})}$,
 which is the skew partition $\lm$ with columns $1,2,\dots,b_k-1,a_{k+1},a_{k+1}+1,\dots$ removed.
\end{lemma}

\begin{proof}
Part \textbf{(a)} has already been proven.

\textbf{(b)} [Fill me in]

To verify the second claim, we need to show that if $\left[c,d\right)$ is a nonempty interval contained in $\left[b_k, a_{k+1}\right)$ for some $k$, then $\#\nupxy{c}{d}^{J} < d-c$, where $J$ denotes the restricted skew partition $\lm\big|_{[b_k,a_{k+1})}$, and where $\seplistvar^{\prime} = \nuxycap{b_k}{a_{k+1}}$.
[Fill me in]
\end{proof}

\begin{definition}
 
 In the context of Lemma \ref{lemma:irreducible}, for $0\leq k\leq r$ the subpartitions $\nuxycap{b_k}{a_{k+1}}$ are called \textit{the irreducible components of $\seplistvar$} and the numbers $n_k:=a_{k+1}-b_k-\#\nuxycap{b_k}{a_{k+1}}$ are called their \textit{degrees}  (for $T$ with $\seplist(T)=\seplistvar$, the $k$-th degree $n_k$ is equal to the number of pure columns of $T$ inside the corresponding $k$-th irreducible component).
\end{definition}
%\begin{remark}
% Note that the conditions on $b_0,a_1,\dots,a_{r+1}$ guarantee that $\seplistvar$ is just a concatenation of partitions %$\nuxycap{b_0}{a_1},\nuxy{a_1}{b_1},\dots,\nuxycap{b_r}{a_{r+1}}$. 
%\end{remark}

\begin{example}
 For $\seplistvar=(4,3,3,2)$ we have $r=1,b_0=1,a_1=3,b_1=5,a_2=8$. The irreducible components of $\seplistvar$ are $(4)$ and $(2)$ and their degrees are $3-1-1=1$ and $8-5-1=2$ respectively. We have $\nuxycap{1}{3}=(4),\nuxy{3}{5}=(3,3),\nuxycap{5}{8}=(2)$.
\end{example}


\subsection{The structural theorem and its applications}
It is easy to see that for a 12-rpp $T$, the number $\#\seplist(T)$ is equal to the number of mixed columns in $T$.

Let $\OneTwoRPP$ denote the set of all 12-rpps $T$ of shape $\lm$, and let $\OneTwoRPPCutvar$ denote its subset that contains only 12-rpps $T$ with $\seplist(T)=\seplistvar$. Now we are ready to state a theorem that completely describes the structure of irreducible components:
\begin{theorem}
\label{thm:12rpps}
 Let $\seplistvar$ be an irreducible partition. Then for all $0\leq m\leq \lambda_1-\#\seplistvar$ there is exactly one 12-rpp $T\in\OneTwoRPPCutvar$ with $\#\seplistvar$ mixed columns, $m$ $1$-pure columns and $(\lambda_1-\#\seplistvar-m)$ $2$-pure columns. Moreover, these are the only elements of $\OneTwoRPPCutvar$. In other words, for an irreducible partition $\seplistvar$ we have
  \begin{equation}
 \label{eq:thm12rpps}
 \sum_{T\in\OneTwoRPPCutvar} \xx^{\ircont(T)}=(x_1x_2)^{\#\seplistvar} P_{\lambda_1-\#\seplistvar}(x_1,x_2).
 \end{equation}
\end{theorem}

\begin{example}
 Each of the two 12-rpps on Figure \ref{fig:seplist} has two irreducible components. One of them is supported on the first two columns and the other one is supported on the last three columns. Here are all possible 12-rpps for each component:
 
%\begin{figure}
\begin{tabular}{c|c}
\begin{tabular}{cc}
 & \\
\begin{ytableau}
1 & \one \\
1 & 2
\end{ytableau}\ &
\begin{ytableau}
\one& 2\\
2   & 2
\end{ytableau}\\
\end{tabular} & 
\begin{tabular}{ccc}
\begin{ytableau}
\none & 1 & 1\\
1 & 1 & \one \\
1 & 1 & 2
\end{ytableau}\ &
\begin{ytableau}
\none & 1 & 2\\
1 & \one & 2 \\
1 & 2 & 2
\end{ytableau}\ &
\begin{ytableau}
\none & 2 & 2\\
\one & 2 & 2 \\
2 & 2 & 2
\end{ytableau} \\
\end{tabular}\\
$\lambda=(2,2);\ \mu=();\ \seplistvar=(1)$ & $\lambda=(3,3,3);\ \mu=(1);\ \seplistvar=(2)$. 
\end{tabular}\\
%\caption{\label{fig:irr} Irreducible components and all possible 12-rpps for them}
%\end{figure}
\end{example}


After decomposing into irreducible components, we can obtain a formula for general representable partitions:
\begin{corollary}
 Let $\seplistvar$ be a representable partition. Then
  \begin{equation}
  \label{eq:thm12rppsComposite}
\sum_{T\in\OneTwoRPPCutvar} \xx^{\ircont(T)}=(x_1x_2)^{M} P_{n_0}(x_1,x_2)P_{n_1}(x_1,x_2)\dots P_{n_r}(x_1,x_2),
  \end{equation}
 where the numbers $M,r,n_0,\dots,n_r$ are defined above: $M=\#\seplistvar$, $r+1$ is the number of irreducible components of $\seplistvar$ and $n_0,n_1,\dots,n_r$ are their degrees.
\end{corollary}

 For a 12-rpp $T$, the vectors $\seplist(T)$ and $\ceq(T)$ uniquely determine each other: if $(\ceq(T))_i=h$ then $\seplist(T)$ contains exactly $\lambda_{i+1}-\mu_i-h$ entries equal to $i$, and this correspondence is one-to-one. Therefore, the polynomials on both sides of (\ref{eq:thm12rppsComposite}) are equal to $Q_{\ceqvar}(x_1,x_2)$ where the vector $\ceqvar$ is the one that corresponds to $\seplistvar$.

 Note that the polynomials $P_n(x_1,x_2)$ are symmetric for all $n$. Since the question about the symmetry of $\g_\lm$ can be reduced to the two-variable case, Theorem \ref{thm:12rpps} gives an alternative proof of the symmetry of $\g_\lm$:
\begin{corollary}
 The polynomials $\g_\lm \in \kk\left[x_1, x_2, x_3, \ldots\right]$ are symmetric.
\end{corollary}
 This holds for any $\kk$ and any $t_1, t_2, t_3, \ldots \in \kk$, since the case we have considered (where $t_1, t_2, t_3, \ldots$ are polynomial indeterminates over $\Z$) is universal.\footnote{Of course, our standing assumption that $\lm$ is connected can be lifted here, because in general, $\g_\lm$ is the product of the analogous power series corresponding to the connected components of $\lm$. So we have obtained a new proof of Theorem \ref{thm.gtilde.symm}.}

Another application of Theorem \ref{thm:12rpps} is a complete description of Bender-Knuth involutions on rpps.

\begin{corollary}
\label{cor:uniqueBK}
Let $\seplistvar$ be an irreducible partition. Then there is a unique map $b:\OneTwoRPPCutvar\to\OneTwoRPPCutvar$ such that for all $T\in\OneTwoRPPCutvar$ we have 
$$\ircont(T)=(c_1,c_2,0,0,\dots)\Longrightarrow \ircont(b(T))=(c_2,c_1,0,0,\dots).$$
In this case, such a map is an involution on $\OneTwoRPPCutvar$. So, for irreducible partition $\seplistvar$ the corresponding Bender-Knuth involution exists and is unique.
\end{corollary}

Take any 12-rpp $T\in\OneTwoRPPCutvar$ and recall that a 12-table $\flip(T)$ is obtained from $T$ by simultaneously replacing all entries in $1$-pure columns by $2$ and all entries in $2$-pure columns by $1$. 

\begin{corollary}
\label{cor:confluence}
 If $\seplistvar$ is an irreducible partition, then no matter in which order one resolves conflicts in $\flip(T)$, the resulting tableau $T'$ will be the same. The map $T\to T'$ is the unique Bender-Knuth involution on $\OneTwoRPPCutvar$.
\end{corollary}
\begin{proof}[Proof of Corollary \ref{cor:confluence}]
 By Proposition \ref{prop.finality}, conflict-resolving steps applied in any order give an element of $\OneTwoRPPCutvar$. So we get a map $\OneTwoRPPCutvar\to \OneTwoRPPCutvar$ that satisfies the assumptions of Corollary \ref{cor:uniqueBK}.
\end{proof}


Finally, notice that for a general representable partition $\seplistvar$ conflicts may only occur inside each irreducible component independently, so we conclude the chain of corollaries by stating that our constructed involutions are canonical in the following sense:

\begin{corollary}
 For a representable partition, the map $\mathbf{B}:\OneTwoRPPCutvar\to\OneTwoRPPCutvar$ is the unique involution that interchanges the number of $1$-pure columns with the number of $2$-pure columns inside each irreducible component.
\end{corollary}

\subsection{The proof}
Let $\seplistvar=(i_1,\dots,i_s)$ be an irreducible partition. We start with the following simple observation:
\begin{lemma}
\label{lemma:leftRight}
 Let $T\in\OneTwoRPPCutvar$. Then any $1$-pure column of $T$ is to the left of any $2$-pure column of $T$.
\end{lemma}
\begin{proof}[Proof of Lemma \ref{lemma:leftRight}]
Suppose it is false and we have a $1$-pure column to the right of a $2$-pure column. Consider the closest pair of columns $a$ and $b$ such that $a$ is $2$-pure and $b$ is $1$-pure, then the columns $a+1,\dots,b-1$ must all be mixed. %, otherwise if some column $k\in (a,b)$ is $1$-pure (resp., $2$-pure) then the columns $a$ and $k$ (resp., $k$ and $b$) would be closer to each other than $a$ and $b$.
Therefore the set $\NS(T)$ contains $\{(i_1,a+1),(i_2,a+2),\dots,(i_{b-1-a},b-1)\}$. And because $a$ is $2$-pure and $b$ is $1$-pure, the support of any $i_k$ for $k=1\dots b-1-a$ is a subset of $[a+1,b)$ which contradicts the irreducibility of $\seplistvar$.
\end{proof}


\begin{proof}[Proof of Theorem \ref{thm:12rpps}]
We proceed by induction on the number of columns in $\lm$. If the number of columns is one then the statement of Theorem \ref{thm:12rpps} is obvious. Suppose that we have proven that for all skew partitions $\widetilde{\lm}$ with less than $\lambda_1$ columns and for all partitions $\widetilde\seplistvar$  irreducible with respect to $\widetilde{\lm}$ and for all $0\leq \widetilde m\leq \widetilde{\lambda}_1)-\#\widetilde\seplistvar$, there is exactly one 12-rpp $\widetilde T$ of shape $\widetilde{\lm}$ with exactly $\widetilde m$ $1$-pure columns, exactly $\#\widetilde\seplistvar$ mixed columns and exactly $(\widetilde{\lambda}_1-\#\widetilde\seplistvar-\widetilde m)$ $2$-pure columns. Now we want to prove the same for $\lm$.

Take any 12-rpp $T\in\OneTwoRPPCutvar$ with $\seplist(T)=\seplistvar$ and with $m$ $1$-pure columns for $0\leq m\leq \lambda_1-\#\seplistvar$. Suppose first that $m>0$. Then there is at least one $1$-pure column in $T$. Let $q+1$ be the leftmost such column for some $q\geq 0$. Then by Lemma \ref{lemma:leftRight} the columns $1,2,\dots,q$ are mixed. If $q>0$ then the supports of $i_1,i_2,\dots,i_q$ are all contained inside $[1,q+1)$ and we get a contradiction with the irreducibility of $\seplistvar$. The only remaining case is that $q=0$ and the first column of $T$ is $1$-pure. Let $\widetilde\lm$ denote $\lm$ with the first column removed. Then $\seplistvar$ may not be irreducible with respect to $\widetilde{\lm}$, because it may happen that $\#\nuxy{1}{b}^{\widetilde{\lm}}=b-1$ for some $b$. In this case we can ignore these first $b-1$ mixed columns and apply the induction hypothesis. We are done with the case $m>0$. If $m<\lambda_1-\#\seplistvar$ then we can apply a mirrored argument to the last column, and it remains to note that for $\lambda_1-\#\seplistvar>0$ the cases $m>0$ and $m<\lambda_1-\#\seplistvar$ cover everything and for $\lambda_1=\#\seplistvar$ we get that $T$ is a 12-rpp with all mixed columns, but there is obviously a unique such 12-rpp.
\end{proof}




\begin{thebibliography}{99999999}                                                                                         %


\bibitem[BaaNip98]{BaaNip98}Franz Baader, Tobias Nipkow, \textit{Term
Rewriting and All That}, Cambridge University Press 1998.

\bibitem[BezCoq03]{BezCoq}Marc Bezem, Thierry Coquand, \textit{Newman's Lemma
-- a Case Study in Proof Automation and Geometric Logic}, Bulletin of the
European Association for Theoretical Computer Science, February 2003.\newline%
\texttt{\url{http://www.ii.uib.no/~bezem/NL/}}

\bibitem[FomGre06]{FomGre}Sergey Fomin, Curtis Greene, \textit{Noncommutative
Schur functions and their applications}, Discrete Mathematics 306 (2006) 1080--1096.
doi:10.1016/S0012-365X(98)00140-X.

\bibitem[Fulton97]{Fulton97}William Fulton, \textit{Young Tableaux}, London
Mathematical Society Student Texts 35, Cambridge University Press 1997.

\bibitem[GriRei15]{GriRei15}Darij Grinberg, Victor Reiner, \textit{Hopf
algebras in Combinatorics}, June 1, 2015,
\href{http://arxiv.org/abs/1409.8356v2}{arXiv:1409.8356v2}. \newline See also
\url{http://web.mit.edu/~darij/www/algebra/HopfComb.pdf} for a version which
is more frequently updated.

\bibitem[LamPyl07]{LamPyl}Thomas Lam, Pavlo Pylyavskyy, \textit{Combinatorial
Hopf algebras and }$K$\textit{-homology of Grassmanians},
\href{http://arxiv.org/abs/0705.2189v1}{arXiv:0705.2189v1}. An updated version
was later published in: International Mathematics Research Notices, Vol. 2007,
Article ID rnm125, 48 pages. doi:10.1093/imrn/rnm125.

\bibitem[Macdon95]{Macdon95}Ian G. Macdonald, \textit{Symmetric Functions and
Hall Polynomials}, 2nd edition, Oxford University Press 1995.

\bibitem[Stan99]{Stan99}Richard Stanley, \textit{Enumerative Combinatorics,
volume 2}, Cambridge University Press, 1999.
\end{thebibliography}


\end{document}